{"file":"utils-b6642872.js","mappings":"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","names":["DOMPurify"],"sources":["src/utils/utils.ts"],"sourcesContent":["import DOMPurify from 'dompurify';\n\n/**\n * Returns a function that can be executed only once\n */\nexport function once<T extends unknown[]>(fn: (...args: T) => unknown) {\n  let result: unknown;\n  return function (this: unknown, ...args: T) {\n    if (fn) {\n      result = fn.apply(this, args);\n      fn = () => {};\n    }\n    return result;\n  };\n}\n\nexport function camelToKebab(value: string) {\n  return value.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport function kebabToCamel(value: string) {\n  return value.replace(/-./g, (x) => x[1].toUpperCase());\n}\n\nexport function snakeToCamel(value: string) {\n  return value\n    .toLowerCase()\n    .replace(/([_][a-z])/g, (group) => group.toUpperCase().replace('_', ''));\n}\n\nexport function titleToKebab(value: string) {\n  return value.replace(/\\s/g, '-').toLowerCase();\n}\n\nexport function randomID(prepend?: string, length = 5) {\n  const randomStr = Math.random()\n    .toString(36)\n    .substring(2, 2 + length);\n  if (!prepend) {\n    return randomStr;\n  }\n  return prepend + randomStr;\n}\n\nexport function getRandomArbitrary(min: number, max: number) {\n  return Math.random() * (max - min) + min;\n}\n\nexport function parseXML(string: string) {\n  return new window.DOMParser().parseFromString(string, 'text/xml');\n}\n\nexport function parseHTML(string: string) {\n  return new window.DOMParser().parseFromString(string, 'text/html');\n}\n\nexport function isElementNode(node: Node): node is Element {\n  return node.nodeType === Node.ELEMENT_NODE;\n}\n\nexport function isTextNode(node: Node): node is Text {\n  return node.nodeType === Node.TEXT_NODE;\n}\n\nexport function isVisualNode(node: Node) {\n  if (isElementNode(node)) {\n    return !(node instanceof HTMLStyleElement);\n  }\n  if (isTextNode(node)) {\n    return !!node.textContent?.trim();\n  }\n  return false;\n}\n\nexport function containsVisualElement(node: Node) {\n  for (let i = 0; i < node.childNodes.length; i++) {\n    const child = node.childNodes.item(i);\n    if (isVisualNode(child)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function elementHasAncestorTag(\n  el: HTMLElement,\n  tagName: string\n): boolean {\n  const parentElement = el.parentElement;\n  if (!parentElement) {\n    return false;\n  }\n  if (parentElement.tagName === tagName.toUpperCase()) {\n    return true;\n  }\n  return elementHasAncestorTag(parentElement, tagName);\n}\n\nexport function sanitizeStyle(style: string) {\n  const purifiedOuterHTML = DOMPurify.sanitize(`<style>${style}</style>`, {\n    ALLOWED_TAGS: ['style'],\n    ALLOWED_ATTR: [],\n    FORCE_BODY: true,\n  });\n  const wrapperEl = document.createElement('div');\n  // deepcode ignore ReactSetInnerHtml: sanitized by dompurify\n  wrapperEl.innerHTML = purifiedOuterHTML;\n  return wrapperEl.querySelector('style')?.innerHTML;\n}\n\nexport function getFocusedElement(\n  rootElement: Document | ShadowRoot = document\n): Element | null {\n  const activeElement = rootElement.activeElement;\n  if (activeElement?.shadowRoot) {\n    return getFocusedElement(activeElement.shadowRoot) ?? activeElement;\n  }\n  return activeElement;\n}\n\nexport function isFocusingOut(event: FocusEvent) {\n  return (\n    document.hasFocus() &&\n    (!(event.relatedTarget instanceof Node) ||\n      (event.currentTarget instanceof Node &&\n        !event.currentTarget.contains(event.relatedTarget)))\n  );\n}\n\n// https://terodox.tech/how-to-tell-if-an-element-is-in-the-dom-including-the-shadow-dom/\nexport function isInDocument(element: Node) {\n  let currentElement = element;\n  while (currentElement && currentElement.parentNode) {\n    if (currentElement.parentNode === document) {\n      return true;\n    } else if (currentElement.parentNode instanceof ShadowRoot) {\n      currentElement = currentElement.parentNode.host;\n    } else {\n      currentElement = currentElement.parentNode;\n    }\n  }\n  return false;\n}\n\nexport function isPropValuesEqual<ObjectWithProperties extends object>(\n  subject: ObjectWithProperties,\n  target: ObjectWithProperties,\n  propNames: (keyof ObjectWithProperties)[]\n) {\n  return propNames.every((propName) => subject[propName] === target[propName]);\n}\n\nexport function getParent(element: Element | ShadowRoot) {\n  if (element.parentNode) {\n    return element.parentNode as Element | ShadowRoot;\n  }\n  if (element instanceof ShadowRoot) {\n    return element.host;\n  }\n  return null;\n}\n\nexport function isAncestorOf(\n  ancestor: Element | ShadowRoot,\n  element: Element | ShadowRoot\n): boolean {\n  if (element === ancestor) {\n    return true;\n  }\n  if (\n    element instanceof HTMLElement &&\n    element.assignedSlot &&\n    isAncestorOf(ancestor, element.assignedSlot)\n  ) {\n    return true;\n  }\n  const parent = getParent(element);\n  return parent === null ? false : isAncestorOf(ancestor, parent);\n}\n\nexport function aggregate<V, K extends PropertyKey>(\n  values: readonly V[],\n  getKey: (value: V, index: number) => K\n): Record<K, V[] | undefined> {\n  return values.reduce(\n    (aggregatedValues, value, i) => {\n      const key = getKey(value, i);\n      if (!(key in aggregatedValues)) {\n        aggregatedValues[key] = [];\n      }\n      aggregatedValues[key]!.push(value);\n      return aggregatedValues;\n    },\n    <Record<K, V[] | undefined>>{}\n  );\n}\n\n/**\n * Similar as a classic spread, but preserve all characteristics of properties (e.g. getter/setter).\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#description\n * for an explanation why (spread & assign work similarly).\n * @param objects the objects to \"spread\" together\n * @returns the spread result\n */\nexport function spreadProperties<Output extends object = {}>(\n  ...objects: object[]\n) {\n  const returnObject = {};\n  for (const obj of objects) {\n    Object.defineProperties(\n      returnObject,\n      Object.getOwnPropertyDescriptors(obj)\n    );\n  }\n  return returnObject as Output;\n}\n\nexport const sortByDocumentPosition = (a: Node, b: Node): 1 | -1 =>\n  a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;\n\nexport async function defer() {\n  return new Promise<void>((resolve) => setTimeout(resolve, 10));\n}\n"],"version":3}