{"version":3,"names":["TriStateCheckbox","props","isSelected","state","isExcluded","partName","part","classNames","parts","push","class","attributes","key","id","join","ariaLabel","text","value","ref","h","role","onClick","onToggle","onMouseDown","e","style","stroke","fill","icon","Tick","Close","iconPart","FacetValueExclude","FacetValueCheckbox","children","randomID","count","numberOfResults","toLocaleString","i18n","language","ariaLabelAttributes","displayValue","formattedCount","interpolation","escapeValue","selectedAriaLabel","t","excludedAriaLabel","labelRef","isTriStateCheckbox","a","renderCheckbox","buttonRef","createRipple","color","parent","StencilCheckbox","checked","renderExclusion","onExclude","htmlFor"],"sources":["src/components/common/stencil-triStateCheckbox.tsx","src/components/common/facets/facet-value-exclude/stencil-facet-value-exclude.tsx","src/components/common/facets/facet-value-checkbox/stencil-facet-value-checkbox.tsx"],"sourcesContent":["import {FacetValueState} from '@coveo/headless';\nimport {FunctionalComponent, h} from '@stencil/core';\nimport Tick from '../../images/checkbox.svg';\nimport Close from '../../images/close.svg';\nimport {StencilCheckboxProps} from './stencil-checkbox';\n\nexport type TriStateCheckboxProps = Omit<StencilCheckboxProps, 'checked'> & {\n  state: FacetValueState;\n};\n\n/**\n * @deprecated Should only be used for Stencil components; for Lit components, use the triStateCheckbox.ts\n * This file is required to be in a tsx file to be able to use it in Stencil components.\n */\nexport const TriStateCheckbox: FunctionalComponent<TriStateCheckboxProps> = (\n  props\n) => {\n  const isSelected = props.state === 'selected';\n  const isExcluded = props.state === 'excluded';\n  const partName = props.part ?? 'checkbox';\n\n  const classNames = [\n    'w-4 h-4 grid place-items-center rounded focus-visible:outline-none hover:border-primary-light focus-visible:border-primary-light',\n  ];\n  const parts = [partName];\n  if (isSelected) {\n    classNames.push(\n      'selected bg-primary hover:bg-primary-light focus-visible:bg-primary-light'\n    );\n    parts.push(`${partName}-checked`);\n  } else if (isExcluded) {\n    classNames.push(\n      'excluded bg-error hover:bg-error focus-visible:bg-error hover:border-error focus-visible:border-error'\n    );\n    parts.push(`${partName}-checked`);\n  } else {\n    classNames.push('border border-neutral-dark');\n  }\n  if (props.class) {\n    classNames.push(props.class);\n  }\n\n  const attributes = {\n    key: props.key,\n    id: props.id,\n    class: classNames.join(' '),\n    part: parts.join(' '),\n    'aria-pressed': isSelected ? 'true' : isExcluded ? 'mixed' : 'false',\n    'aria-label': props.ariaLabel ?? props.text,\n    value: props.text,\n    ref: props.ref,\n  };\n\n  return (\n    <button\n      {...attributes}\n      role=\"button\"\n      onClick={() => props.onToggle?.(!isSelected)}\n      onMouseDown={(e) => props.onMouseDown?.(e)}\n    >\n      <atomic-icon\n        style={{stroke: 'white', fill: 'white'}}\n        class={`w-3/5 ${isSelected || isExcluded ? 'block' : 'hidden'}`}\n        icon={isSelected ? Tick : Close}\n        part={props.iconPart}\n      ></atomic-icon>\n    </button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport Tick from '../../../../images/clear.svg';\n\nexport interface ExcludeProps {\n  onClick(): void;\n  ariaLabel?: string;\n}\n\nexport const FacetValueExclude: FunctionalComponent<ExcludeProps> = (props) => {\n  return (\n    <button\n      part=\"value-exclude-button\"\n      aria-label={props.ariaLabel}\n      class=\"value-exclude-button peer invisible absolute right-2 z-1 order-last ml-auto flex group-hover:visible\"\n      onClick={() => props.onClick?.()}\n    >\n      <atomic-icon\n        class=\"bg-neutral hover:bg-error order-last w-4 rounded p-1 hover:fill-white\"\n        icon={Tick}\n      ></atomic-icon>\n    </button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {createRipple} from '../../../../utils/ripple';\nimport {randomID} from '../../../../utils/utils';\nimport {StencilCheckbox} from '../../stencil-checkbox';\nimport {TriStateCheckbox} from '../../stencil-triStateCheckbox';\nimport {FacetValueExclude} from '../facet-value-exclude/stencil-facet-value-exclude';\nimport {FacetValueProps} from '../stencil-facet-common';\n\ntype TriStateFacetValueProps = Omit<FacetValueProps, 'isSelected'> & {\n  state: 'idle' | 'selected' | 'excluded';\n  onExclude(): void;\n};\n\nexport const FacetValueCheckbox: FunctionalComponent<\n  FacetValueProps | TriStateFacetValueProps\n> = (props, children) => {\n  const id = randomID('facet-value-');\n  const count = props.numberOfResults.toLocaleString(props.i18n.language);\n  const ariaLabelAttributes = {\n    value: props.displayValue,\n    count: props.numberOfResults,\n    formattedCount: count,\n    interpolation: {escapeValue: false},\n  };\n  const selectedAriaLabel = props.i18n.t('facet-value', ariaLabelAttributes);\n  const excludedAriaLabel = props.i18n.t(\n    'facet-value-exclude',\n    ariaLabelAttributes\n  );\n  let labelRef: HTMLLabelElement;\n\n  const isTriStateCheckbox = (\n    a: FacetValueProps | TriStateFacetValueProps\n  ): a is TriStateFacetValueProps => {\n    return 'state' in a && 'isSelected' in a;\n  };\n\n  const renderCheckbox = () => {\n    const attributes = {\n      id,\n      onToggle: () => props.onClick(),\n      part: 'value-checkbox',\n      class: 'value-checkbox',\n      ariaLabel: selectedAriaLabel,\n      ref: props.buttonRef,\n      onMouseDown: (e: MouseEvent) =>\n        createRipple(e, {color: 'neutral', parent: labelRef}),\n      iconPart: 'value-checkbox-icon',\n    };\n\n    if (isTriStateCheckbox(props)) {\n      return <TriStateCheckbox {...attributes} state={props.state} />;\n    }\n\n    return <StencilCheckbox {...attributes} checked={props.isSelected} />;\n  };\n\n  const renderExclusion = () => {\n    if (isTriStateCheckbox(props)) {\n      return (\n        <FacetValueExclude\n          onClick={() => props.onExclude?.()}\n          ariaLabel={excludedAriaLabel}\n        ></FacetValueExclude>\n      );\n    }\n  };\n\n  return (\n    <li key={props.displayValue} class=\"group relative flex items-center\">\n      {renderCheckbox()}\n      <label\n        ref={(ref) => (labelRef = ref!)}\n        htmlFor={id}\n        part=\"value-checkbox-label\"\n        class=\"items-center\"\n        onMouseDown={(e) => createRipple(e, {color: 'neutral'})}\n        aria-hidden=\"true\"\n      >\n        {children}\n        <span part=\"value-count\" class=\"value-count\">\n          {props.i18n.t('between-parentheses', {\n            text: count,\n          })}\n        </span>\n      </label>\n      {renderExclusion()}\n    </li>\n  );\n};\n"],"mappings":"2LAcO,MAAMA,EACXC,IAEA,MAAMC,EAAaD,EAAME,QAAU,WACnC,MAAMC,EAAaH,EAAME,QAAU,WACnC,MAAME,EAAWJ,EAAMK,MAAQ,WAE/B,MAAMC,EAAa,CACjB,oIAEF,MAAMC,EAAQ,CAACH,GACf,GAAIH,EAAY,CACdK,EAAWE,KACT,6EAEFD,EAAMC,KAAK,GAAGJ,Y,MACT,GAAID,EAAY,CACrBG,EAAWE,KACT,yGAEFD,EAAMC,KAAK,GAAGJ,Y,KACT,CACLE,EAAWE,KAAK,6B,CAElB,GAAIR,EAAMS,MAAO,CACfH,EAAWE,KAAKR,EAAMS,M,CAGxB,MAAMC,EAAa,CACjBC,IAAKX,EAAMW,IACXC,GAAIZ,EAAMY,GACVH,MAAOH,EAAWO,KAAK,KACvBR,KAAME,EAAMM,KAAK,KACjB,eAAgBZ,EAAa,OAASE,EAAa,QAAU,QAC7D,aAAcH,EAAMc,WAAad,EAAMe,KACvCC,MAAOhB,EAAMe,KACbE,IAAKjB,EAAMiB,KAGb,OACEC,EAAA,aACMR,EACJS,KAAK,SACLC,QAAS,IAAMpB,EAAMqB,YAAYpB,GACjCqB,YAAcC,GAAMvB,EAAMsB,cAAcC,IAExCL,EAAA,eACEM,MAAO,CAACC,OAAQ,QAASC,KAAM,SAC/BjB,MAAO,SAASR,GAAcE,EAAa,QAAU,WACrDwB,KAAM1B,EAAa2B,EAAOC,EAC1BxB,KAAML,EAAM8B,WAEP,E,+KC1DN,MAAMC,EAAwD/B,GAEjEkB,EAAA,UACEb,KAAK,uBAAsB,aACfL,EAAMc,UAClBL,MAAM,uGACNW,QAAS,IAAMpB,EAAMoB,aAErBF,EAAA,eACET,MAAM,wEACNkB,KAAMC,K,MCLDI,EAET,CAAChC,EAAOiC,KACV,MAAMrB,EAAKsB,EAAS,gBACpB,MAAMC,EAAQnC,EAAMoC,gBAAgBC,eAAerC,EAAMsC,KAAKC,UAC9D,MAAMC,EAAsB,CAC1BxB,MAAOhB,EAAMyC,aACbN,MAAOnC,EAAMoC,gBACbM,eAAgBP,EAChBQ,cAAe,CAACC,YAAa,QAE/B,MAAMC,EAAoB7C,EAAMsC,KAAKQ,EAAE,cAAeN,GACtD,MAAMO,EAAoB/C,EAAMsC,KAAKQ,EACnC,sBACAN,GAEF,IAAIQ,EAEJ,MAAMC,EACJC,GAEO,UAAWA,GAAK,eAAgBA,EAGzC,MAAMC,EAAiB,KACrB,MAAMzC,EAAa,CACjBE,KACAS,SAAU,IAAMrB,EAAMoB,UACtBf,KAAM,iBACNI,MAAO,iBACPK,UAAW+B,EACX5B,IAAKjB,EAAMoD,UACX9B,YAAcC,GACZ8B,EAAa9B,EAAG,CAAC+B,MAAO,UAAWC,OAAQP,IAC7ClB,SAAU,uBAGZ,GAAImB,EAAmBjD,GAAQ,CAC7B,OAAOkB,EAACnB,EAAgB,IAAKW,EAAYR,MAAOF,EAAME,O,CAGxD,OAAOgB,EAACsC,EAAe,IAAK9C,EAAY+C,QAASzD,EAAMC,YAAc,EAGvE,MAAMyD,EAAkB,KACtB,GAAIT,EAAmBjD,GAAQ,CAC7B,OACEkB,EAACa,EAAiB,CAChBX,QAAS,IAAMpB,EAAM2D,cACrB7C,UAAWiC,G,GAMnB,OACE7B,EAAA,MAAIP,IAAKX,EAAMyC,aAAchC,MAAM,oCAChC0C,IACDjC,EAAA,SACED,IAAMA,GAAS+B,EAAW/B,EAC1B2C,QAAShD,EACTP,KAAK,uBACLI,MAAM,eACNa,YAAcC,GAAM8B,EAAa9B,EAAG,CAAC+B,MAAO,YAAW,cAC3C,QAEXrB,EACDf,EAAA,QAAMb,KAAK,cAAcI,MAAM,eAC5BT,EAAMsC,KAAKQ,EAAE,sBAAuB,CACnC/B,KAAMoB,MAIXuB,IACE,S","ignoreList":[]}