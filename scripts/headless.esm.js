/**
 * @license
 *
 * Copyright 2025 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g,f){if(typeof exports=="object"&&typeof module<"u"){module.exports=f(require)}else if("function"==typeof define && define.amd){define("CoveoHeadless",["crypto"],function(_d_0){var d={"crypto": _d_0},r=function(m){if(m in d) return d[m];if(typeof require=="function") return require(m);throw new Error("Cannot find module '"+m+"'")};return f(r)})}else {var gN={"crypto":"crypto"},gReq=function(r){var mod = r in gN ? g[gN[r]] : g[r]; return mod };g["CoveoHeadless"]=f(gReq)}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(require){var exports={};var __exports=exports;var module={exports};
"use strict";var Fv=Object.create;var ms=Object.defineProperty;var Rv=Object.getOwnPropertyDescriptor;var bv=Object.getOwnPropertyNames;var vv=Object.getPrototypeOf,Pv=Object.prototype.hasOwnProperty;var wv=(e,t,r)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fs=(e,t)=>()=>(e&&(t=e(e=0)),t);var We=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),cS=(e,t)=>{for(var r in t)ms(e,r,{get:t[r],enumerable:!0})},uS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of bv(t))!Pv.call(e,o)&&o!==r&&ms(e,o,{get:()=>t[o],enumerable:!(n=Rv(t,o))||n.enumerable});return e};var _t=(e,t,r)=>(r=e!=null?Fv(vv(e)):{},uS(t||!e||!e.__esModule?ms(r,"default",{value:e,enumerable:!0}):r,e)),Ev=e=>uS(ms({},"__esModule",{value:!0}),e);var Ae=(e,t,r)=>wv(e,typeof t!="symbol"?t+"":t,r);var g,s=fs(()=>{"use strict";g=typeof globalThis<"u"?globalThis:window});function Bc(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bc=function(t){return typeof t}:Bc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(e)}function Ov(){"navigator"in this||(this.navigator={}),typeof this.navigator.sendBeacon!="function"&&(this.navigator.sendBeacon=kv.bind(this))}function kv(e,t){var r=this.event&&this.event.type,n=r==="unload"||r==="beforeunload",o="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!n),o.withCredentials=!0,o.setRequestHeader("Accept","*/*"),Iv(t)?(o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text"):Tv(t)&&t.type&&o.setRequestHeader("Content-Type",t.type);try{o.send(t)}catch{return!1}return!0}var Iv,Tv,c=fs(()=>{"use strict";Iv=function(t){return typeof t=="string"},Tv=function(t){return t instanceof Blob};Ov.call((typeof window>"u"?"undefined":Bc(window))==="object"?window:{})});var Jp=We(gs=>{"use strict";l();s();u();c();Object.defineProperty(gs,"__esModule",{value:!0});function lS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dv(e,t,r){return t=Ho(t),Nv(e,fS()?Reflect.construct(t,r||[],Ho(e).constructor):t.apply(e,r))}function zp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bv(n.key),n)}}function Kp(e,t,r){return t&&dS(e.prototype,t),r&&dS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pS(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Uv(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(m){throw m},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,d=!0,p=!1;return{s:function(){r=r.call(e)},n:function(){var m=r.next();return d=m.done,m},e:function(m){p=!0,a=m},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw a}}}}function Gp(){return Gp=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Mv(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Gp.apply(null,arguments)}function Ho(e){return Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ho(e)}function Vv(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wp(e,t)}function fS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fS=function(){return!!e})()}function Nv(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qv(e)}function Wp(e,t){return Wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Wp(e,t)}function Mv(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Ho(e))!==null;);return e}function Lv(e,t,r,n){var o=Gp(Ho(1&n?e.prototype:e),t,r);return 2&n&&typeof o=="function"?function(a){return o.apply(r,a)}:o}function Qv(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bv(e){var t=Qv(e,"string");return typeof t=="symbol"?t:t+""}function Uv(e,t){if(e){if(typeof e=="string")return lS(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lS(e,t):void 0}}(function(e){return{NativeAbortSignal:e.AbortSignal,NativeAbortController:e.AbortController}})(typeof self<"u"?self:global);function _v(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}function jv(e){if(e===void 0)if(typeof document>"u")e=new Error("This operation was aborted"),e.name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch{e=new Error("This operation was aborted"),e.name="AbortError"}return e}var mS=function(){function e(){zp(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return Kp(e,[{key:"addEventListener",value:function(r,n,o){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:n,options:o})}},{key:"removeEventListener",value:function(r,n){if(r in this.listeners){for(var o=this.listeners[r],a=0,d=o.length;a<d;a++)if(o[a].callback===n){o.splice(a,1);return}}}},{key:"dispatchEvent",value:function(r){var n=this;if(r.type in this.listeners){for(var o=this.listeners[r.type],a=o.slice(),d=function(){var h=a[p];try{h.callback.call(n,r)}catch(x){Promise.resolve().then(function(){throw x})}h.options&&h.options.once&&n.removeEventListener(r.type,h.callback)},p=0,m=a.length;p<m;p++)d();return!r.defaultPrevented}}}])}(),Yp=function(e){function t(){var r;return zp(this,t),r=Dv(this,t),r.listeners||mS.call(r),Object.defineProperty(r,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(r,"reason",{value:void 0,writable:!0,configurable:!0}),r}return Vv(t,e),Kp(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),Lv(t,"dispatchEvent",this,3)([n])}},{key:"throwIfAborted",value:function(){var n=this.aborted,o=this.reason,a=o===void 0?"Aborted":o;if(n)throw a}}],[{key:"timeout",value:function(n){var o=new Uc;return setTimeout(function(){return o.abort(new DOMException("This signal is timeout in ".concat(n,"ms"),"TimeoutError"))},n),o.signal}},{key:"any",value:function(n){var o=new Uc;function a(){o.abort(this.reason),d()}function d(){var h=pS(n),x;try{for(h.s();!(x=h.n()).done;){var A=x.value;A.removeEventListener("abort",a)}}catch(C){h.e(C)}finally{h.f()}}var p=pS(n),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;if(f.aborted){o.abort(f.reason);break}else f.addEventListener("abort",a)}}catch(h){p.e(h)}finally{p.f()}return o.signal}}])}(mS),Uc=function(){function e(){zp(this,e),Object.defineProperty(this,"signal",{value:new Yp,writable:!0,configurable:!0})}return Kp(e,[{key:"abort",value:function(r){var n=jv(r),o=_v(n);this.signal.reason=n,this.signal.dispatchEvent(o)}},{key:"toString",value:function(){return"[object AbortController]"}}])}();typeof Symbol<"u"&&Symbol.toStringTag&&(Uc.prototype[Symbol.toStringTag]="AbortController",Yp.prototype[Symbol.toStringTag]="AbortSignal");function $v(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function Hv(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,o=n===void 0?r.Request:n,a=t.AbortController,d=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,p=d===void 0?!1:d;if(!$v({fetch:r,Request:o,AbortController:a,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:p}))return{fetch:r,Request:m};var m=o;(m&&!m.prototype.hasOwnProperty("signal")||p)&&(m=function(A,C){var F;C&&C.signal&&(F=C.signal,delete C.signal);var w=new o(A,C);return F&&Object.defineProperty(w,"signal",{writable:!1,enumerable:!1,configurable:!0,value:F}),w},m.prototype=o.prototype);var f=r,h=function(A,C){var F=m&&m.prototype.isPrototypeOf(A)?A.signal:C?C.signal:void 0;if(F){var w;try{w=new DOMException("Aborted","AbortError")}catch{w=new Error("Aborted"),w.name="AbortError"}if(F.aborted)return Promise.reject(w);var b=new Promise(function(R,E){F.addEventListener("abort",function(){return E(w)},{once:!0})});return C&&C.signal&&delete C.signal,Promise.race([b,f(A,C)])}return f(A,C)};return{fetch:h,Request:m}}gs.AbortController=Uc;gs.AbortSignal=Yp;gs.abortableFetch=Hv});var gS,i,S,u=fs(()=>{"use strict";gS=_t(Jp(),1),i=_t(Jp(),1),{fetch:S}=(0,gS.abortableFetch)({fetch})});function Ss(e){if(tP.test(e)||e.trim()==="")throw new TypeError("Invalid character in header field name");return e.trim().toLowerCase()}function Xp(e){return e.replace(rP,"")}function hs(e){if(typeof e!="string"||e.length===0)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>127||!nP(r))return!1}return!0}function nP(e){return![127,32,"(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].includes(e)}function hS(e){if(typeof e!="string"||e.trim()!==e)return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r===0||r===10||r===13)return!1}return!0}var Gv,FS,Wv,RS,zv,Kv,Yv,Jv,Xv,Zv,eP,tP,SS,rP,Go,Zp,yS,CS,xS,AS,y,vS=fs(()=>{"use strict";l();s();u();c();Gv=Object.create,FS=Object.defineProperty,Wv=Object.getOwnPropertyDescriptor,RS=Object.getOwnPropertyNames,zv=Object.getPrototypeOf,Kv=Object.prototype.hasOwnProperty,Yv=(e,t)=>function(){return t||(0,e[RS(e)[0]])((t={exports:{}}).exports,t),t.exports},Jv=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of RS(t))!Kv.call(e,o)&&o!==r&&FS(e,o,{get:()=>t[o],enumerable:!(n=Wv(t,o))||n.enumerable});return e},Xv=(e,t,r)=>(r=e!=null?Gv(zv(e)):{},Jv(t||!e||!e.__esModule?FS(r,"default",{value:e,enumerable:!0}):r,e)),Zv=Yv({"node_modules/set-cookie-parser/lib/set-cookie.js"(e,t){"use strict";var r={decodeValues:!0,map:!1,silent:!1};function n(m){return typeof m=="string"&&!!m.trim()}function o(m,f){var h=m.split(";").filter(n),x=h.shift(),A=a(x),C=A.name,F=A.value;f=f?Object.assign({},r,f):r;try{F=f.decodeValues?decodeURIComponent(F):F}catch(b){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+F+"'. Set options.decodeValues to false to disable this feature.",b)}var w={name:C,value:F};return h.forEach(function(b){var R=b.split("="),E=R.shift().trimLeft().toLowerCase(),P=R.join("=");E==="expires"?w.expires=new Date(P):E==="max-age"?w.maxAge=parseInt(P,10):E==="secure"?w.secure=!0:E==="httponly"?w.httpOnly=!0:E==="samesite"?w.sameSite=P:w[E]=P}),w}function a(m){var f="",h="",x=m.split("=");return x.length>1?(f=x.shift(),h=x.join("=")):h=m,{name:f,value:h}}function d(m,f){if(f=f?Object.assign({},r,f):r,!m)return f.map?{}:[];if(m.headers)if(typeof m.headers.getSetCookie=="function")m=m.headers.getSetCookie();else if(m.headers["set-cookie"])m=m.headers["set-cookie"];else{var h=m.headers[Object.keys(m.headers).find(function(A){return A.toLowerCase()==="set-cookie"})];!h&&m.headers.cookie&&!f.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),m=h}if(Array.isArray(m)||(m=[m]),f=f?Object.assign({},r,f):r,f.map){var x={};return m.filter(n).reduce(function(A,C){var F=o(C,f);return A[F.name]=F,A},x)}else return m.filter(n).map(function(A){return o(A,f)})}function p(m){if(Array.isArray(m))return m;if(typeof m!="string")return[];var f=[],h=0,x,A,C,F,w;function b(){for(;h<m.length&&/\s/.test(m.charAt(h));)h+=1;return h<m.length}function R(){return A=m.charAt(h),A!=="="&&A!==";"&&A!==","}for(;h<m.length;){for(x=h,w=!1;b();)if(A=m.charAt(h),A===","){for(C=h,h+=1,b(),F=h;h<m.length&&R();)h+=1;h<m.length&&m.charAt(h)==="="?(w=!0,h=F,f.push(m.substring(x,C)),x=h):h=C+1}else h+=1;(!w||h>=m.length)&&f.push(m.substring(x,m.length))}return f}t.exports=d,t.exports.parse=d,t.exports.parseString=o,t.exports.splitCookiesString=p}}),eP=Xv(Zv()),tP=/[^a-z0-9\-#$%&'*+.^_`|~]/i;SS=[`
`,"\r","	"," "],rP=new RegExp(`(^[${SS.join("")}]|$[${SS.join("")}])`,"g");Go=Symbol("normalizedHeaders"),Zp=Symbol("rawHeaderNames"),yS=", ",y=class bS{constructor(t){this[CS]={},this[xS]=new Map,this[AS]="Headers",["Headers","HeadersPolyfill"].includes(t?.constructor.name)||t instanceof bS||typeof g.Headers<"u"&&t instanceof g.Headers?t.forEach((n,o)=>{this.append(o,n)},this):Array.isArray(t)?t.forEach(([r,n])=>{this.append(r,Array.isArray(n)?n.join(yS):n)}):t&&Object.getOwnPropertyNames(t).forEach(r=>{let n=t[r];this.append(r,Array.isArray(n)?n.join(yS):n)})}[(CS=Go,xS=Zp,AS=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*keys(){for(let[t]of this.entries())yield t}*values(){for(let[,t]of this.entries())yield t}*entries(){let t=Object.keys(this[Go]).sort((r,n)=>r.localeCompare(n));for(let r of t)if(r==="set-cookie")for(let n of this.getSetCookie())yield[r,n];else yield[r,this.get(r)]}has(t){if(!hs(t))throw new TypeError(`Invalid header name "${t}"`);return this[Go].hasOwnProperty(Ss(t))}get(t){if(!hs(t))throw TypeError(`Invalid header name "${t}"`);return this[Go][Ss(t)]??null}set(t,r){if(!hs(t)||!hS(r))return;let n=Ss(t),o=Xp(r);this[Go][n]=Xp(o),this[Zp].set(n,t)}append(t,r){if(!hs(t)||!hS(r))return;let n=Ss(t),o=Xp(r),a=this.has(n)?`${this.get(n)}, ${o}`:o;this.set(t,a)}delete(t){if(!hs(t)||!this.has(t))return;let r=Ss(t);delete this[Go][r],this[Zp].delete(r)}forEach(t,r){for(let[n,o]of this.entries())t.call(r,o,n,this)}getSetCookie(){let t=this.get("set-cookie");return t===null?[]:t===""?[""]:(0,eP.splitCookiesString)(t)}}});var l=fs(()=>{"use strict";vS()});var QS=We(As=>{"use strict";l();s();u();c();var zc=As&&As.__assign||function(){return zc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zc.apply(this,arguments)};Object.defineProperty(As,"__esModule",{value:!0});var CP={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function xP(e){var t=zc(zc({},CP),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}As.getSanitizedOptions=xP});var BS=We(sm=>{"use strict";l();s();u();c();Object.defineProperty(sm,"__esModule",{value:!0});function AP(e){var t=Math.random()*e;return Math.round(t)}sm.fullJitter=AP});var US=We(cm=>{"use strict";l();s();u();c();Object.defineProperty(cm,"__esModule",{value:!0});function FP(e){return e}cm.noJitter=FP});var _S=We(um=>{"use strict";l();s();u();c();Object.defineProperty(um,"__esModule",{value:!0});var RP=BS(),bP=US();function vP(e){switch(e.jitter){case"full":return RP.fullJitter;case"none":default:return bP.noJitter}}um.JitterFactory=vP});var dm=We(lm=>{"use strict";l();s();u();c();Object.defineProperty(lm,"__esModule",{value:!0});var PP=_S(),wP=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=PP.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();lm.Delay=wP});var jS=We(Mr=>{"use strict";l();s();u();c();var EP=Mr&&Mr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IP=Mr&&Mr.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function p(h){try{f(n.next(h))}catch(x){d(x)}}function m(h){try{f(n.throw(h))}catch(x){d(x)}}function f(h){h.done?a(h.value):o(h.value).then(p,m)}f((n=n.apply(e,t||[])).next())})},TP=Mr&&Mr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(f){return function(h){return m([f,h])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=f[0]&2?o.return:f[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,f[1])).done)return a;switch(o=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],o=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Mr,"__esModule",{value:!0});var OP=dm(),kP=function(e){EP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return IP(this,void 0,void 0,function(){return TP(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(OP.Delay);Mr.SkipFirstDelay=kP});var $S=We(Fs=>{"use strict";l();s();u();c();var qP=Fs&&Fs.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Fs,"__esModule",{value:!0});var DP=dm(),VP=function(e){qP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(DP.Delay);Fs.AlwaysDelay=VP});var HS=We(pm=>{"use strict";l();s();u();c();Object.defineProperty(pm,"__esModule",{value:!0});var NP=jS(),MP=$S();function LP(e,t){var r=QP(e);return r.setAttemptNumber(t),r}pm.DelayFactory=LP;function QP(e){return e.delayFirstAttempt?new MP.AlwaysDelay(e):new NP.SkipFirstDelay(e)}});var GS=We(ao=>{"use strict";l();s();u();c();var mm=ao&&ao.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function p(h){try{f(n.next(h))}catch(x){d(x)}}function m(h){try{f(n.throw(h))}catch(x){d(x)}}function f(h){h.done?a(h.value):o(h.value).then(p,m)}f((n=n.apply(e,t||[])).next())})},fm=ao&&ao.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(f){return function(h){return m([f,h])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=f[0]&2?o.return:f[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,f[1])).done)return a;switch(o=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],o=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(ao,"__esModule",{value:!0});var BP=QS(),UP=HS();function _P(e,t){return t===void 0&&(t={}),mm(this,void 0,void 0,function(){var r,n;return fm(this,function(o){switch(o.label){case 0:return r=BP.getSanitizedOptions(t),n=new jP(e,r),[4,n.execute()];case 1:return[2,o.sent()]}})})}ao.backOff=_P;var jP=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return mm(this,void 0,void 0,function(){var t,r;return fm(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return mm(this,void 0,void 0,function(){var t;return fm(this,function(r){switch(r.label){case 0:return t=UP.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var Hu=We((Cf,xf)=>{"use strict";l();s();u();c();(function(e,t){typeof Cf=="object"&&typeof xf<"u"?xf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs=t()})(Cf,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",a="minute",d="hour",p="day",m="week",f="month",h="quarter",x="year",A="date",C="Invalid Date",F=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var _=["th","st","nd","rd"],U=$%100;return"["+$+(_[(U-20)%10]||_[U]||_[0])+"]"}},R=function($,_,U){var z=String($);return!z||z.length>=_?$:""+Array(_+1-z.length).join(U)+$},E={s:R,z:function($){var _=-$.utcOffset(),U=Math.abs(_),z=Math.floor(U/60),j=U%60;return(_<=0?"+":"-")+R(z,2,"0")+":"+R(j,2,"0")},m:function $(_,U){if(_.date()<U.date())return-$(U,_);var z=12*(U.year()-_.year())+(U.month()-_.month()),j=_.clone().add(z,f),X=U-j<0,Z=_.clone().add(z+(X?-1:1),f);return+(-(z+(U-j)/(X?j-Z:Z-j))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:x,w:m,d:p,D:A,h:d,m:a,s:o,ms:n,Q:h}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},P="en",T={};T[P]=b;var M="$isDayjsObject",q=function($){return $ instanceof Q||!(!$||!$[M])},O=function $(_,U,z){var j;if(!_)return P;if(typeof _=="string"){var X=_.toLowerCase();T[X]&&(j=X),U&&(T[X]=U,j=X);var Z=_.split("-");if(!j&&Z.length>1)return $(Z[0])}else{var se=_.name;T[se]=_,j=se}return!z&&j&&(P=j),j||!z&&P},k=function($,_){if(q($))return $.clone();var U=typeof _=="object"?_:{};return U.date=$,U.args=arguments,new Q(U)},V=E;V.l=O,V.i=q,V.w=function($,_){return k($,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var Q=function(){function $(U){this.$L=O(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[M]=!0}var _=$.prototype;return _.parse=function(U){this.$d=function(z){var j=z.date,X=z.utc;if(j===null)return new Date(NaN);if(V.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var Z=j.match(F);if(Z){var se=Z[2]-1||0,ge=(Z[7]||"0").substring(0,3);return X?new Date(Date.UTC(Z[1],se,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ge)):new Date(Z[1],se,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ge)}}return new Date(j)}(U),this.init()},_.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},_.$utils=function(){return V},_.isValid=function(){return this.$d.toString()!==C},_.isSame=function(U,z){var j=k(U);return this.startOf(z)<=j&&j<=this.endOf(z)},_.isAfter=function(U,z){return k(U)<this.startOf(z)},_.isBefore=function(U,z){return this.endOf(z)<k(U)},_.$g=function(U,z,j){return V.u(U)?this[z]:this.set(j,U)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(U,z){var j=this,X=!!V.u(z)||z,Z=V.p(U),se=function(Re,Oe){var Ve=V.w(j.$u?Date.UTC(j.$y,Oe,Re):new Date(j.$y,Oe,Re),j);return X?Ve:Ve.endOf(p)},ge=function(Re,Oe){return V.w(j.toDate()[Re].apply(j.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(Oe)),j)},Ce=this.$W,me=this.$M,Se=this.$D,pe="set"+(this.$u?"UTC":"");switch(Z){case x:return X?se(1,0):se(31,11);case f:return X?se(1,me):se(0,me+1);case m:var he=this.$locale().weekStart||0,ke=(Ce<he?Ce+7:Ce)-he;return se(X?Se-ke:Se+(6-ke),me);case p:case A:return ge(pe+"Hours",0);case d:return ge(pe+"Minutes",1);case a:return ge(pe+"Seconds",2);case o:return ge(pe+"Milliseconds",3);default:return this.clone()}},_.endOf=function(U){return this.startOf(U,!1)},_.$set=function(U,z){var j,X=V.p(U),Z="set"+(this.$u?"UTC":""),se=(j={},j[p]=Z+"Date",j[A]=Z+"Date",j[f]=Z+"Month",j[x]=Z+"FullYear",j[d]=Z+"Hours",j[a]=Z+"Minutes",j[o]=Z+"Seconds",j[n]=Z+"Milliseconds",j)[X],ge=X===p?this.$D+(z-this.$W):z;if(X===f||X===x){var Ce=this.clone().set(A,1);Ce.$d[se](ge),Ce.init(),this.$d=Ce.set(A,Math.min(this.$D,Ce.daysInMonth())).$d}else se&&this.$d[se](ge);return this.init(),this},_.set=function(U,z){return this.clone().$set(U,z)},_.get=function(U){return this[V.p(U)]()},_.add=function(U,z){var j,X=this;U=Number(U);var Z=V.p(z),se=function(me){var Se=k(X);return V.w(Se.date(Se.date()+Math.round(me*U)),X)};if(Z===f)return this.set(f,this.$M+U);if(Z===x)return this.set(x,this.$y+U);if(Z===p)return se(1);if(Z===m)return se(7);var ge=(j={},j[a]=t,j[d]=r,j[o]=e,j)[Z]||1,Ce=this.$d.getTime()+U*ge;return V.w(Ce,this)},_.subtract=function(U,z){return this.add(-1*U,z)},_.format=function(U){var z=this,j=this.$locale();if(!this.isValid())return j.invalidDate||C;var X=U||"YYYY-MM-DDTHH:mm:ssZ",Z=V.z(this),se=this.$H,ge=this.$m,Ce=this.$M,me=j.weekdays,Se=j.months,pe=j.meridiem,he=function(Oe,Ve,ct,Rt){return Oe&&(Oe[Ve]||Oe(z,X))||ct[Ve].slice(0,Rt)},ke=function(Oe){return V.s(se%12||12,Oe,"0")},Re=pe||function(Oe,Ve,ct){var Rt=Oe<12?"AM":"PM";return ct?Rt.toLowerCase():Rt};return X.replace(w,function(Oe,Ve){return Ve||function(ct){switch(ct){case"YY":return String(z.$y).slice(-2);case"YYYY":return V.s(z.$y,4,"0");case"M":return Ce+1;case"MM":return V.s(Ce+1,2,"0");case"MMM":return he(j.monthsShort,Ce,Se,3);case"MMMM":return he(Se,Ce);case"D":return z.$D;case"DD":return V.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return he(j.weekdaysMin,z.$W,me,2);case"ddd":return he(j.weekdaysShort,z.$W,me,3);case"dddd":return me[z.$W];case"H":return String(se);case"HH":return V.s(se,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return Re(se,ge,!0);case"A":return Re(se,ge,!1);case"m":return String(ge);case"mm":return V.s(ge,2,"0");case"s":return String(z.$s);case"ss":return V.s(z.$s,2,"0");case"SSS":return V.s(z.$ms,3,"0");case"Z":return Z}return null}(Oe)||Z.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(U,z,j){var X,Z=this,se=V.p(z),ge=k(U),Ce=(ge.utcOffset()-this.utcOffset())*t,me=this-ge,Se=function(){return V.m(Z,ge)};switch(se){case x:X=Se()/12;break;case f:X=Se();break;case h:X=Se()/3;break;case m:X=(me-Ce)/6048e5;break;case p:X=(me-Ce)/864e5;break;case d:X=me/r;break;case a:X=me/t;break;case o:X=me/e;break;default:X=me}return j?X:V.a(X)},_.daysInMonth=function(){return this.endOf(f).$D},_.$locale=function(){return T[this.$L]},_.locale=function(U,z){if(!U)return this.$L;var j=this.clone(),X=O(U,z,!0);return X&&(j.$L=X),j},_.clone=function(){return V.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},$}(),Y=Q.prototype;return k.prototype=Y,[["$ms",n],["$s",o],["$m",a],["$H",d],["$W",p],["$M",f],["$y",x],["$D",A]].forEach(function($){Y[$[1]]=function(_){return this.$g(_,$[0],$[1])}}),k.extend=function($,_){return $.$i||($(_,Q,k),$.$i=!0),k},k.locale=O,k.isDayjs=q,k.unix=function($){return k(1e3*$)},k.en=T[P],k.Ls=T,k.p={},k})});var rC=We((Af,Ff)=>{"use strict";l();s();u();c();(function(e,t){typeof Af=="object"&&typeof Ff<"u"?Ff.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_quarterOfYear=t()})(Af,function(){"use strict";var e="month",t="quarter";return function(r,n){var o=n.prototype;o.quarter=function(p){return this.$utils().u(p)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(p-1))};var a=o.add;o.add=function(p,m){return p=Number(p),this.$utils().p(m)===t?this.add(3*p,e):a.bind(this)(p,m)};var d=o.startOf;o.startOf=function(p,m){var f=this.$utils(),h=!!f.u(m)||m;if(f.p(p)===t){var x=this.quarter()-1;return h?this.month(3*x).startOf(e).startOf("day"):this.month(3*x+2).endOf(e).endOf("day")}return d.bind(this)(p,m)}}})});var nC=We((Rf,bf)=>{"use strict";l();s();u();c();(function(e,t){typeof Rf=="object"&&typeof bf<"u"?bf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_customParseFormat=t()})(Rf,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,n=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,d={},p=function(F){return(F=+F)+(F>68?1900:2e3)},m=function(F){return function(w){this[F]=+w}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(F){(this.zone||(this.zone={})).offset=function(w){if(!w||w==="Z")return 0;var b=w.match(/([+-]|\d\d)/g),R=60*b[1]+(+b[2]||0);return R===0?0:b[0]==="+"?-R:R}(F)}],h=function(F){var w=d[F];return w&&(w.indexOf?w:w.s.concat(w.f))},x=function(F,w){var b,R=d.meridiem;if(R){for(var E=1;E<=24;E+=1)if(F.indexOf(R(E,0,w))>-1){b=E>12;break}}else b=F===(w?"pm":"PM");return b},A={A:[a,function(F){this.afternoon=x(F,!1)}],a:[a,function(F){this.afternoon=x(F,!0)}],Q:[r,function(F){this.month=3*(F-1)+1}],S:[r,function(F){this.milliseconds=100*+F}],SS:[n,function(F){this.milliseconds=10*+F}],SSS:[/\d{3}/,function(F){this.milliseconds=+F}],s:[o,m("seconds")],ss:[o,m("seconds")],m:[o,m("minutes")],mm:[o,m("minutes")],H:[o,m("hours")],h:[o,m("hours")],HH:[o,m("hours")],hh:[o,m("hours")],D:[o,m("day")],DD:[n,m("day")],Do:[a,function(F){var w=d.ordinal,b=F.match(/\d+/);if(this.day=b[0],w)for(var R=1;R<=31;R+=1)w(R).replace(/\[|\]/g,"")===F&&(this.day=R)}],w:[o,m("week")],ww:[n,m("week")],M:[o,m("month")],MM:[n,m("month")],MMM:[a,function(F){var w=h("months"),b=(h("monthsShort")||w.map(function(R){return R.slice(0,3)})).indexOf(F)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[a,function(F){var w=h("months").indexOf(F)+1;if(w<1)throw new Error;this.month=w%12||w}],Y:[/[+-]?\d+/,m("year")],YY:[n,function(F){this.year=p(F)}],YYYY:[/\d{4}/,m("year")],Z:f,ZZ:f};function C(F){var w,b;w=F,b=d&&d.formats;for(var R=(F=w.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,V,Q){var Y=Q&&Q.toUpperCase();return V||b[Q]||e[Q]||b[Y].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function($,_,U){return _||U.slice(1)})})).match(t),E=R.length,P=0;P<E;P+=1){var T=R[P],M=A[T],q=M&&M[0],O=M&&M[1];R[P]=O?{regex:q,parser:O}:T.replace(/^\[|\]$/g,"")}return function(k){for(var V={},Q=0,Y=0;Q<E;Q+=1){var $=R[Q];if(typeof $=="string")Y+=$.length;else{var _=$.regex,U=$.parser,z=k.slice(Y),j=_.exec(z)[0];U.call(V,j),k=k.replace(j,"")}}return function(X){var Z=X.afternoon;if(Z!==void 0){var se=X.hours;Z?se<12&&(X.hours+=12):se===12&&(X.hours=0),delete X.afternoon}}(V),V}}return function(F,w,b){b.p.customParseFormat=!0,F&&F.parseTwoDigitYear&&(p=F.parseTwoDigitYear);var R=w.prototype,E=R.parse;R.parse=function(P){var T=P.date,M=P.utc,q=P.args;this.$u=M;var O=q[1];if(typeof O=="string"){var k=q[2]===!0,V=q[3]===!0,Q=k||V,Y=q[2];V&&(Y=q[2]),d=this.$locale(),!k&&Y&&(d=b.Ls[Y]),this.$d=function(z,j,X,Z){try{if(["x","X"].indexOf(j)>-1)return new Date((j==="X"?1e3:1)*z);var se=C(j)(z),ge=se.year,Ce=se.month,me=se.day,Se=se.hours,pe=se.minutes,he=se.seconds,ke=se.milliseconds,Re=se.zone,Oe=se.week,Ve=new Date,ct=me||(ge||Ce?1:Ve.getDate()),Rt=ge||Ve.getFullYear(),rn=0;ge&&!Ce||(rn=Ce>0?Ce-1:Ve.getMonth());var jo,$o=Se||0,ps=pe||0,$p=he||0,Hp=ke||0;return Re?new Date(Date.UTC(Rt,rn,ct,$o,ps,$p,Hp+60*Re.offset*1e3)):X?new Date(Date.UTC(Rt,rn,ct,$o,ps,$p,Hp)):(jo=new Date(Rt,rn,ct,$o,ps,$p,Hp),Oe&&(jo=Z(jo).week(Oe).toDate()),jo)}catch{return new Date("")}}(T,O,M,b),this.init(),Y&&Y!==!0&&(this.$L=this.locale(Y).$L),Q&&T!=this.format(O)&&(this.$d=new Date("")),d={}}else if(O instanceof Array)for(var $=O.length,_=1;_<=$;_+=1){q[1]=O[_-1];var U=b.apply(this,q);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}_===$&&(this.$d=new Date(""))}else E.call(this,P)}}})});var px=We((Zf,eg)=>{"use strict";l();s();u();c();(function(e,t){typeof Zf=="object"&&typeof eg<"u"?eg.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_timezone=t()})(Zf,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var a,d=function(h,x,A){A===void 0&&(A={});var C=new Date(h),F=function(w,b){b===void 0&&(b={});var R=b.timeZoneName||"short",E=w+"|"+R,P=t[E];return P||(P=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:w,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:R}),t[E]=P),P}(x,A);return F.formatToParts(C)},p=function(h,x){for(var A=d(h,x),C=[],F=0;F<A.length;F+=1){var w=A[F],b=w.type,R=w.value,E=e[b];E>=0&&(C[E]=parseInt(R,10))}var P=C[3],T=P===24?0:P,M=C[0]+"-"+C[1]+"-"+C[2]+" "+T+":"+C[4]+":"+C[5]+":000",q=+h;return(o.utc(M).valueOf()-(q-=q%1e3))/6e4},m=n.prototype;m.tz=function(h,x){h===void 0&&(h=a);var A,C=this.utcOffset(),F=this.toDate(),w=F.toLocaleString("en-US",{timeZone:h}),b=Math.round((F-new Date(w))/1e3/60),R=15*-Math.round(F.getTimezoneOffset()/15)-b;if(!Number(R))A=this.utcOffset(0,x);else if(A=o(w,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(R,!0),x){var E=A.utcOffset();A=A.add(C-E,"minute")}return A.$x.$timezone=h,A},m.offsetName=function(h){var x=this.$x.$timezone||o.tz.guess(),A=d(this.valueOf(),x,{timeZoneName:h}).find(function(C){return C.type.toLowerCase()==="timezonename"});return A&&A.value};var f=m.startOf;m.startOf=function(h,x){if(!this.$x||!this.$x.$timezone)return f.call(this,h,x);var A=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(A,h,x).tz(this.$x.$timezone,!0)},o.tz=function(h,x,A){var C=A&&x,F=A||x||a,w=p(+o(),F);if(typeof h!="string")return o(h).tz(F);var b=function(T,M,q){var O=T-60*M*1e3,k=p(O,q);if(M===k)return[O,M];var V=p(O-=60*(k-M)*1e3,q);return k===V?[O,k]:[T-60*Math.min(k,V)*1e3,Math.max(k,V)]}(o.utc(h,C).valueOf(),w,F),R=b[0],E=b[1],P=o(R).utcOffset(E);return P.$x.$timezone=F,P},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(h){a=h}}})});var mx=We((tg,rg)=>{"use strict";l();s();u();c();(function(e,t){typeof tg=="object"&&typeof rg<"u"?rg.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof g<"u"?g:e||self).dayjs_plugin_utc=t()})(tg,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,a){var d=o.prototype;a.utc=function(C){var F={date:C,utc:!0,args:arguments};return new o(F)},d.utc=function(C){var F=a(this.toDate(),{locale:this.$L,utc:!0});return C?F.add(this.utcOffset(),e):F},d.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var p=d.parse;d.parse=function(C){C.utc&&(this.$u=!0),this.$utils().u(C.$offset)||(this.$offset=C.$offset),p.call(this,C)};var m=d.init;d.init=function(){if(this.$u){var C=this.$d;this.$y=C.getUTCFullYear(),this.$M=C.getUTCMonth(),this.$D=C.getUTCDate(),this.$W=C.getUTCDay(),this.$H=C.getUTCHours(),this.$m=C.getUTCMinutes(),this.$s=C.getUTCSeconds(),this.$ms=C.getUTCMilliseconds()}else m.call(this)};var f=d.utcOffset;d.utcOffset=function(C,F){var w=this.$utils().u;if(w(C))return this.$u?0:w(this.$offset)?f.call(this):this.$offset;if(typeof C=="string"&&(C=function(P){P===void 0&&(P="");var T=P.match(t);if(!T)return null;var M=(""+T[0]).match(r)||["-",0,0],q=M[0],O=60*+M[1]+ +M[2];return O===0?0:q==="+"?O:-O}(C),C===null))return this;var b=Math.abs(C)<=16?60*C:C,R=this;if(F)return R.$offset=b,R.$u=C===0,R;if(C!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(R=this.local().add(b+E,e)).$offset=b,R.$x.$localOffset=E}else R=this.utc();return R};var h=d.format;d.format=function(C){var F=C||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,F)},d.valueOf=function(){var C=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*C},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var x=d.toDate;d.toDate=function(C){return C==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var A=d.diff;d.diff=function(C,F,w){if(C&&this.$u===C.$u)return A.call(this,C,F,w);var b=this.local(),R=a(C).local();return A.call(b,R,F,w)}}})});var bx=We((iZ,Rx)=>{"use strict";l();s();u();c();function fk(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Rx.exports=gk;function gk(e,t,r){var n=r&&r.stringify||fk,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var d=new Array(a);d[0]=n(e);for(var p=1;p<a;p++)d[p]=n(t[p]);return d.join(" ")}if(typeof e!="string")return e;var m=t.length;if(m===0)return e;for(var f="",h=1-o,x=-1,A=e&&e.length||0,C=0;C<A;){if(e.charCodeAt(C)===37&&C+1<A){switch(x=x>-1?x:0,e.charCodeAt(C+1)){case 100:case 102:if(h>=m||t[h]==null)break;x<C&&(f+=e.slice(x,C)),f+=Number(t[h]),x=C+2,C++;break;case 105:if(h>=m||t[h]==null)break;x<C&&(f+=e.slice(x,C)),f+=Math.floor(Number(t[h])),x=C+2,C++;break;case 79:case 111:case 106:if(h>=m||t[h]===void 0)break;x<C&&(f+=e.slice(x,C));var F=typeof t[h];if(F==="string"){f+="'"+t[h]+"'",x=C+2,C++;break}if(F==="function"){f+=t[h].name||"<anonymous>",x=C+2,C++;break}f+=n(t[h]),x=C+2,C++;break;case 115:if(h>=m)break;x<C&&(f+=e.slice(x,C)),f+=String(t[h]),x=C+2,C++;break;case 37:x<C&&(f+=e.slice(x,C)),f+="%",x=C+2,C++,h--;break}++h}++C}return x===-1?e:(x<A&&(f+=e.slice(x)),f)}});var Tx=We((dZ,ql)=>{"use strict";l();s();u();c();var vx=bx();ql.exports=Gr;var dc=Tk().console||{},Sk={mapHttpRequest:kl,mapHttpResponse:kl,wrapRequestSerializer:og,wrapResponseSerializer:og,wrapErrorSerializer:og,req:kl,res:kl,err:wx,errWithCause:wx};function kn(e,t){return e==="silent"?1/0:t.levels.values[e]}var sg=Symbol("pino.logFuncs"),ag=Symbol("pino.hierarchy"),hk={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Px(e,t){let r={logger:t,parent:e[ag]};t[ag]=r}function yk(e,t,r){let n={};t.forEach(o=>{n[o]=r[o]?r[o]:dc[o]||dc[hk[o]||"log"]||ri}),e[sg]=n}function Ck(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Gr(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||dc;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=Ck(e.browser.serialize,n),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let d=Object.keys(e.customLevels||{}),p=["error","fatal","warn","info","debug","trace"].concat(d);typeof r=="function"&&p.forEach(function(w){r[w]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let m=e.level||"info",f=Object.create(r);f.log||(f.log=ri),yk(f,p,r),Px({},f),Object.defineProperty(f,"levelVal",{get:x}),Object.defineProperty(f,"level",{get:A,set:C});let h={transmit:t,serialize:o,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:p,timestamp:wk(e),messageKey:e.messageKey||"msg",onChild:e.onChild||ri};f.levels=xk(e),f.level=m,f.isLevelEnabled=function(w){return this.levels.values[w]?this.levels.values[w]>=this.levels.values[this.level]:!1},f.setMaxListeners=f.getMaxListeners=f.emit=f.addListener=f.on=f.prependListener=f.once=f.prependOnceListener=f.removeListener=f.removeAllListeners=f.listeners=f.listenerCount=f.eventNames=f.write=f.flush=ri,f.serializers=n,f._serialize=o,f._stdErrSerialize=a,f.child=function(...w){return F.call(this,h,...w)},t&&(f._logEvent=ig());function x(){return kn(this.level,this)}function A(){return this._level}function C(w){if(w!=="silent"&&!this.levels.values[w])throw Error("unknown level "+w);this._level=w,Fo(this,h,f,"error"),Fo(this,h,f,"fatal"),Fo(this,h,f,"warn"),Fo(this,h,f,"info"),Fo(this,h,f,"debug"),Fo(this,h,f,"trace"),d.forEach(b=>{Fo(this,h,f,b)})}function F(w,b,R){if(!b)throw new Error("missing bindings for child Pino");R=R||{},o&&b.serializers&&(R.serializers=b.serializers);let E=R.serializers;if(o&&E){var P=Object.assign({},n,E),T=e.browser.serialize===!0?Object.keys(P):o;delete b.serializers,cg([b],T,P,this._stdErrSerialize)}function M(O){this._childLevel=(O._childLevel|0)+1,this.bindings=b,P&&(this.serializers=P,this._serialize=T),t&&(this._logEvent=ig([].concat(O._logEvent.bindings,b)))}M.prototype=this;let q=new M(this);return Px(this,q),q.child=function(...O){return F.call(this,w,...O)},q.level=R.level||this.level,w.onChild(q),q}return f}function xk(e){let t=e.customLevels||{},r=Object.assign({},Gr.levels.values,t),n=Object.assign({},Gr.levels.labels,Ak(t));return{values:r,labels:n}}function Ak(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}Gr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Gr.stdSerializers=Sk;Gr.stdTimeFunctions=Object.assign({},{nullTime:Ex,epochTime:Ix,unixTime:Ek,isoTime:Ik});function Fk(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[ag];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Fo(e,t,r,n){if(Object.defineProperty(e,n,{value:kn(e.level,r)>kn(n,r)?ri:r[sg][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===ri){if(!t.transmit)return;let a=t.transmit.level||e.level,d=kn(a,r);if(kn(n,r)<d)return}e[n]=bk(e,t,r,n);let o=Fk(e);o.length!==0&&(e[n]=Rk(o,e[n]))}function Rk(e,t){return function(){return t.apply(this,[...e,...arguments])}}function bk(e,t,r,n){return function(o){return function(){let d=t.timestamp(),p=new Array(arguments.length),m=Object.getPrototypeOf&&Object.getPrototypeOf(this)===dc?dc:this;for(var f=0;f<p.length;f++)p[f]=arguments[f];var h=!1;if(t.serialize&&(cg(p,this._serialize,this.serializers,this._stdErrSerialize),h=!0),t.asObject||t.formatters?o.call(m,...vk(this,n,p,d,t)):o.apply(m,p),t.transmit){let x=t.transmit.level||e._level,A=kn(x,r),C=kn(n,r);if(C<A)return;Pk(this,{ts:d,methodLevel:n,methodValue:C,transmitLevel:x,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:kn(e._level,r)},p,h)}}}(e[sg][n])}function vk(e,t,r,n,o){let{level:a,log:d=x=>x}=o.formatters||{},p=r.slice(),m=p[0],f={},h=(e._childLevel|0)+1;if(h<1&&(h=1),n&&(f.time=n),a){let x=a(t,e.levels.values[t]);Object.assign(f,x)}else f.level=e.levels.values[t];if(o.asObjectBindingsOnly){if(m!==null&&typeof m=="object")for(;h--&&typeof p[0]=="object";)Object.assign(f,p.shift());return[d(f),...p]}else{if(m!==null&&typeof m=="object"){for(;h--&&typeof p[0]=="object";)Object.assign(f,p.shift());m=p.length?vx(p.shift(),p):void 0}else typeof m=="string"&&(m=vx(p.shift(),p));return m!==void 0&&(f[o.messageKey]=m),[d(f)]}}function cg(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=Gr.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o])&&t)for(let a in e[o])t.indexOf(a)>-1&&a in r&&(e[o][a]=r[a](e[o][a]))}function Pk(e,t,r,n=!1){let o=t.send,a=t.ts,d=t.methodLevel,p=t.methodValue,m=t.val,f=e._logEvent.bindings;n||cg(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter(function(h){return f.indexOf(h)===-1}),e._logEvent.level.label=d,e._logEvent.level.value=p,o(d,e._logEvent,m),e._logEvent=ig(f)}function ig(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function wx(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function wk(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Ex:Ix}function kl(){return{}}function og(e){return e}function ri(){}function Ex(){return!1}function Ix(){return Date.now()}function Ek(){return Math.round(Date.now()/1e3)}function Ik(){return new Date(Date.now()).toISOString()}function Tk(){function e(t){return typeof t<"u"&&t}try{return typeof g<"u"?g:(Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),g)}catch{return e(self)||e(window)||e(this)||{}}}ql.exports.default=Gr;ql.exports.pino=Gr});var AL={};cS(AL,{API_DATE_FORMAT:()=>La,DefaultFieldsToInclude:()=>mg,EcommerceDefaultFieldsToInclude:()=>zx,HighlightUtils:()=>rm,MinimumFieldsToInclude:()=>Vl,ResultTemplatesHelpers:()=>wC,SortBy:()=>So,SortOrder:()=>Us,VERSION:()=>un,baseFacetResponseSelector:()=>Ht,buildAutomaticFacetGenerator:()=>Jb,buildBreadcrumbManager:()=>_R,buildCategoryFacet:()=>zA,buildCategoryFieldSuggestions:()=>Gb,buildContext:()=>Zx,buildController:()=>ee,buildCriterionExpression:()=>nr,buildDateFacet:()=>gF,buildDateFilter:()=>IF,buildDateRange:()=>Wn,buildDateSortCriterion:()=>Iu,buildDictionaryFieldContext:()=>eA,buildDidYouMean:()=>iA,buildExecuteTrigger:()=>vb,buildFacet:()=>cF,buildFacetConditionsManager:()=>$b,buildFacetManager:()=>QR,buildFieldSortCriterion:()=>Tu,buildFieldSuggestions:()=>Hb,buildFoldedResultList:()=>hb,buildGeneratedAnswer:()=>tv,buildHistoryManager:()=>WF,buildInstantResults:()=>wR,buildInteractiveCitation:()=>nv,buildInteractiveInstantResult:()=>nR,buildInteractiveRecentResult:()=>jb,buildInteractiveResult:()=>rR,buildNoSortCriterion:()=>ku,buildNotifyTrigger:()=>wb,buildNumericFacet:()=>CF,buildNumericFilter:()=>bF,buildNumericRange:()=>Pi,buildPager:()=>YF,buildQueryError:()=>XF,buildQueryExpression:()=>CL,buildQueryRankingExpressionSortCriterion:()=>Ou,buildQuerySummary:()=>eR,buildQueryTrigger:()=>bb,buildQuickview:()=>db,buildRecentQueriesList:()=>Lb,buildRecentResultsList:()=>_b,buildRedirectionTrigger:()=>Rb,buildRelevanceInspector:()=>Yx,buildRelevanceSortCriterion:()=>ha,buildResultList:()=>tR,buildResultTemplatesManager:()=>cv,buildResultsPerPage:()=>aR,buildSearchBox:()=>ip,buildSearchEngine:()=>jx,buildSearchParameterManager:()=>vp,buildSearchParameterSerializer:()=>Vc,buildSearchStatus:()=>sb,buildSmartSnippet:()=>Ob,buildSmartSnippetQuestionsList:()=>Db,buildSort:()=>OR,buildStandaloneSearchBox:()=>GR,buildStaticFilter:()=>kR,buildStaticFilterValue:()=>Ng,buildTab:()=>VR,buildTabManager:()=>MR,buildUrlManager:()=>ib,currentPageSelector:()=>Zr,currentPagesSelector:()=>Xd,deserializeRelativeDate:()=>mC,facetRequestSelector:()=>Eu,facetResponseSelectedValuesSelector:()=>xy,facetResponseSelector:()=>la,getAnalyticsNextApiBaseUrl:()=>Kc,getOrganizationEndpoint:()=>Ke,getSampleSearchEngineConfiguration:()=>dg,getSearchApiBaseUrl:()=>Me,loadAdvancedSearchQueryActions:()=>IM,loadBreadcrumbActions:()=>nL,loadCategoryFacetSetActions:()=>TM,loadClickAnalyticsActions:()=>pL,loadConfigurationActions:()=>kM,loadContextActions:()=>DM,loadDateFacetSetActions:()=>MM,loadDebugActions:()=>NM,loadDictionaryFieldContextActions:()=>VM,loadDidYouMeanActions:()=>QM,loadExcerptLengthActions:()=>iL,loadFacetOptionsActions:()=>LM,loadFacetSetActions:()=>OM,loadFieldActions:()=>BM,loadFoldingActions:()=>jM,loadGeneratedAnswerActions:()=>cL,loadGenericAnalyticsActions:()=>mL,loadHistoryActions:()=>UM,loadIPXActionsHistoryActions:()=>fL,loadInstantResultsActions:()=>zM,loadNumericFacetSetActions:()=>_M,loadPaginationActions:()=>$M,loadPipelineActions:()=>HM,loadQueryActions:()=>GM,loadQuerySetActions:()=>WM,loadQuerySuggestActions:()=>KM,loadQuestionAnsweringActions:()=>rL,loadRecentQueriesActions:()=>oL,loadRecentResultsActions:()=>aL,loadResultPreviewActions:()=>sL,loadSearchActions:()=>YM,loadSearchAnalyticsActions:()=>dL,loadSearchConfigurationActions:()=>qM,loadSearchHubActions:()=>JM,loadSortCriteriaActions:()=>XM,loadStandaloneSearchBoxSetActions:()=>ZM,loadStaticFilterSetActions:()=>eL,loadTabSetActions:()=>tL,maxPageSelector:()=>Pc,parseCriterionExpression:()=>lv,validateRelativeDate:()=>Fn});module.exports=Ev(AL);l();s();u();c();var rm={};cS(rm,{escape:()=>Yo,getHighlightedSuggestion:()=>tm,highlightString:()=>dP});l();s();u();c();l();s();u();c();function oP(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new ys(r)}var ys=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},ue=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let a=this.definition[o].validate(r[o]);a&&n.push(`${o}: ${a}`)}if(n.length)throw oP(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},ve=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&ne(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ze(e){return e===void 0}function aP(e){return e===null}function ne(e){return ze(e)||aP(e)}var J=class{constructor(e={}){Ae(this,"value");this.config=e,this.value=new ve(e)}validate(e){let t=this.value.validate(e);return t||(iP(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function iP(e){return ze(e)||PS(e)}function PS(e){return typeof e=="number"&&!isNaN(e)}var oe=class{constructor(e={}){Ae(this,"value");this.value=new ve(e)}validate(e){let t=this.value.validate(e);return t||(sP(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function sP(e){return ze(e)||_c(e)}function _c(e){return typeof e=="boolean"}var cP=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,D=class{constructor(e={}){Ae(this,"value");Ae(this,"config");this.config={emptyAllowed:!0,url:!1,...e},this.value=new ve(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o,ISODate:a}=this.config,d=this.value.validate(e);if(d)return d;if(ze(e))return null;if(!Wo(e))return"value is not a string.";if(!t&&!e.length)return"value is an empty string.";if(r)try{new URL(e)}catch{return"value is not a valid URL."}return n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:a&&!(cP.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null}get default(){return this.value.default}get required(){return this.value.required}};function Wo(e){return Object.prototype.toString.call(e)==="[object String]"}var B=class{constructor(e={}){Ae(this,"config");this.config={options:{required:!1},values:{},...e}}validate(e){if(ze(e))return this.config.options.required?"value is required and is currently undefined":null;if(!wS(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&ne(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],a=n.validate(o);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function wS(e){return e!==void 0&&typeof e=="object"}var te=class{constructor(e={}){Ae(this,"value");this.config=e,this.value=new ve(this.config)}validate(e){if(!ne(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(ne(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&ne(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=" "+o)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return _c(e)||Wo(e)||PS(e)||wS(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function zo(e){return Array.isArray(e)}var jt=class{constructor(e){Ae(this,"value");this.config=e,this.value=new ve(e)}validate(e){let t=this.value.validate(e);return t!==null?t:ze(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};l();s();u();c();var nn=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function jc(e){return Array.isArray(e)}function $c(e){return e.trim()===""}function ES(e,t){return[...e.reduce((r,n)=>{let o=t(n);return r.has(o)||r.set(o,n),r},new Map).values()]}function uP(e){return btoa(encodeURI(e))}function Hc(e,t){let{[e]:r,...n}=t;return n}function Ko(e){return uP(JSON.stringify(e))}var lP=new Set(["1",1,"yes",!0]);function IS(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>lP.has(r))}function TS(e){let t={};for(let[r,n]of e)t[r]=n;return t}function OS(e,t,r){return clearTimeout(t),setTimeout(e,r)}function Cs(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function dP(e){if($c(e.openingDelimiter)||$c(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(ne(e.content)||$c(e.content))return e.content;if(e.highlights.length===0)return Yo(e.content);let t=e.content.length,r="",n=0;for(let o=0;o<e.highlights.length;o++){let a=e.highlights[o],d=a.offset,p=d+a.length;if(p>t)break;r+=Yo(e.content.slice(n,d)),r+=e.openingDelimiter,r+=Yo(e.content.slice(d,p)),r+=e.closingDelimiter,n=p}return n!==t&&(r+=Yo(e.content.slice(n))),r}function tm(e,t){return e=Yo(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,o,a)=>n?em(n,t.notMatchDelimiters):o?em(o,t.exactMatchDelimiters):a?em(a,t.correctionDelimiters):r)}function em(e,t){return t?t.open+e+t.close:e}function Yo(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return n.test(e)?e.replace(o,a=>t[a]):e}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();async function qS(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function DS(e){let t,r,n,o=!1;return function(d){t===void 0?(t=d,r=0,n=-1):t=mP(t,d);let p=t.length,m=0;for(;r<p;){o&&(t[r]===10&&(m=++r),o=!1);let f=-1;for(;r<p&&f===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-m);break;case 13:o=!0,f=r;break;case 10:f=r;break}if(f===-1)break;e(t.subarray(m,f),n),m=r,n=-1}m===p?t=void 0:m!==0&&(t=t.subarray(m),r-=m)}}function VS(e,t,r){let n=kS(),o=new TextDecoder;return function(d,p){if(d.length===0)r?.(n),n=kS();else if(p>0){let m=o.decode(d.subarray(0,p)),f=p+(d[p+1]===32?2:1),h=o.decode(d.subarray(f));switch(m){case"data":n.data=n.data?n.data+`
`+h:h;break;case"event":n.event=h;break;case"id":e(n.id=h);break;case"retry":pP(h,n,t);break}}}}function pP(e,t,r){let n=parseInt(e,10);isNaN(n)||r(t.retry=n)}function mP(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function kS(){return{data:"",event:"",id:"",retry:void 0}}var nm="text/event-stream",fP=1e3,NS="last-event-id";function MS(){return typeof window<"u"}function Gc(e,{signal:t,headers:r,onopen:n,onmessage:o,onclose:a,onerror:d,openWhenHidden:p,fetch:m,...f}){return new Promise((h,x)=>{let A={...r};A.accept||(A.accept=nm);let C;function F(){C?.abort(),document.hidden||T()}!p&&MS()&&document.addEventListener("visibilitychange",F);let w=fP,b;function R(){MS()&&document.removeEventListener("visibilitychange",F),clearTimeout(b),C?.abort()}t?.addEventListener("abort",()=>{R(),h()});let E=m??S,P=n??gP;async function T(){C=i.AbortController?new i.AbortController:null;try{let M=await E(e,{...f,headers:A,signal:C?.signal});await P(M),await qS(M.body,DS(VS(q=>{q?A[NS]=q:delete A[NS]},q=>{w=q},o))),a?.(),R(),h()}catch(M){if(!C?.signal?.aborted)try{let q=d?.(M)??w;clearTimeout(b),b=setTimeout(T,q)}catch(q){R(),x(q)}}}T()})}function gP(e){let t=e.headers.get("content-type");if(!t?.startsWith(nm))throw new Error(`Expected content-type to be ${nm}, Actual: ${t}`)}l();s();u();c();var on=class{constructor(t){Ae(this,"_basePath");Ae(this,"_params",{});this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}};var SP=(e,t,r)=>new on(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,LS=3,hP=5e3,yP="text/event-stream",im=1,om=class extends Error{},xs=class extends Error{constructor(r){super(r.message);this.payload=r}},am=class{constructor(){Ae(this,"timeouts",new Set)}add(t){this.timeouts.add(t)}remove(t){clearTimeout(t),this.timeouts.delete(t)}isActive(t){return this.timeouts.has(t)}},Wc=class{constructor(t){Ae(this,"logger");this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:n,organizationId:o,streamId:a,accessToken:d}=t,{write:p,abort:m,close:f,resetAnswer:h}=r,x=new am;if(!a){this.logger.error("No stream ID found");return}let A=0,C,F=()=>{C&&!x.isActive(C)&&(b?.abort(),h(),R())},w=()=>{x.remove(C),C=OS(F,C,hP),x.add(C)},b=new i.AbortController,R=()=>Gc(SP(n,o,a),{method:"GET",fetch:S,headers:{Authorization:`Bearer ${d}`,accept:"*/*"},openWhenHidden:!0,signal:b?.signal,async onopen(E){if(E.ok&&E.headers.get("content-type")===yP)return;throw E.status>=400&&E.status<500&&E.status!==429?new xs({message:"Error opening stream",code:E.status}):new om},onmessage:E=>{if(b?.signal.aborted)return;let P=JSON.parse(E.data);if(P.finishReason==="ERROR"){x.remove(C),b?.abort(),m({message:P.errorMessage,code:P.statusCode});return}p(P),A=0,P.finishReason==="COMPLETED"?(x.remove(C),f()):w()},onerror:E=>{if(!b?.signal.aborted){if(x.remove(C),E instanceof xs)throw b?.abort(),m(E),E;if(++A>LS){this.logger.info("Maximum retry exceeded.");let P={message:"Failed to complete stream.",code:im};throw b?.abort(),m(P),new xs(P)}this.logger.info(`Retrying...(${A}/${LS})`),h()}}});return R(),b}};l();s();u();c();var YS=_t(GS(),1);l();s();u();c();l();s();u();c();var $P="recommendation-internal-options",E0=Symbol.for($P);var W=new Error("Failed to load reducers."),Jo=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}};var io=class extends Error{constructor(r,n){super();Ae(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=n??0}};l();s();u();c();function WS(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`)}return t.join("&")}function zS(e){return typeof e!="object"||!e?!1:Object.values(e).every(HP)}function HP(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function KS(e){return e===429}var bt=class e{static async call(t){let r=GP(t),{logger:n}=t,o=await e.preprocessRequest(r,t);n.info(o,"Platform request");let{url:a,...d}=o,p=async()=>{let m=await S(a,d);if(KS(m.status))throw m;return m};try{let m=await(0,YS.backOff)(p,{retry:f=>{let h=f&&KS(f.status);return h&&n.info("Platform retrying request"),h}});switch(m.status){case 419:case 401:throw n.info("Platform renewing token"),new Jo;case 404:throw new io(a,m.status);default:return n.info({response:m,requestInfo:o},"Platform response"),m}}catch(m){return m.message==="Failed to fetch"?new io(a):m}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:o,logger:a,requestMetadata:d}=r,{signal:p,...m}=t,f=Cs(m);try{let h=await o(t,n,d);return{...t,...h}}catch(h){a.error(h,"Platform request preprocessing failed. Returning default request options.")}return f}};function Ke(e,t="prod",r="platform"){let n=t==="prod"?"":t,o=r==="platform"?"":`.${r}`;return`https://${e}${o}.org${n}.coveo.com`}function Me(e,t="prod"){return`${Ke(e,t)}/rest/search/v2`}function Kc(e,t="prod"){return`${Ke(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function GP(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:a,signal:d}=e,p=e.method==="POST"||e.method==="PUT",m=WP(n,o);return{url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${a}`,...e.headers},...p&&{body:m},signal:d}}function WP(e,t){return t==="application/x-www-form-urlencoded"?zS(e)?WS(e):"":JSON.stringify(e)}l();s();u();c();var Yc=e=>e;l();s();u();c();var JS=e=>e,XS=e=>e,ZS=e=>e;l();s();u();c();l();s();u();c();function Xo(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function St(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Xo(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Xo(),extendedResults:{}}}l();s();u();c();function an(e){let{url:t,accessToken:r,organizationId:n,authentication:o,...a}=e;return a}var sn=e=>{let{response:t}=e;return t.body?zP(e):KP(t)},zP=e=>JP(e)?XP(e):YP(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},KP=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function YP(e){return e.body.statusCode!==void 0}function JP(e){return e.body.exception!==void 0}var XP=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});l();s();u();c();var cn=class{constructor(){Ae(this,"currentAbortController",null)}async enqueue(t,r){let n=this.currentAbortController,o=this.currentAbortController=new i.AbortController;n&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),n.abort());try{return await t(o?.signal??null)}finally{this.currentAbortController===o&&(this.currentAbortController=null)}}};l();s();u();c();l();s();u();c();function eh(e){return((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}l();s();u();c();var Lr=(e,t,r,n)=>{let o=new on(`${e.url}${n}`);return o.addParam("organizationId",e.organizationId),e.authentication&&o.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:o.href,origin:"searchApiFetch"}};var th=(e,t)=>{let r=new on(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.authentication&&r.addParam("authentication",e.authentication),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),r.href},rh=async(e,t)=>{let r=await bt.call({...Lr(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:an(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=eh(r),o=await r.arrayBuffer(),d=new TextDecoder(n).decode(o);return ZP(d)?{success:d}:{error:sn({response:r,body:d})}};function ZP(e){return typeof e=="string"}l();s();u();c();function ew(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function tw(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Rs(e,t){if(t&&e.name==="AbortError")return{error:tw(e)};if(e instanceof io)return{error:ew(e)};throw e}var Jc=class{constructor(t){this.options=t;Ae(this,"apiCallsQueues",{unknown:new cn,mainSearch:new cn,facetValues:new cn,foldingCollection:new cn,instantResults:new cn})}async plan(t){let r=await bt.call({...Lr(t,"POST","application/json","/plan"),requestParams:an(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return Rs(r);let n=await r.json();return nw(n)?{success:n}:{error:sn({response:r,body:n})}}async querySuggest(t){let r=await bt.call({...Lr(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:an(t),...this.options});if(r instanceof Error)return Rs(r);let n=await r.json(),o={response:r,body:n};return rw(n)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(o)).body}:{error:sn(o)}}async search(t,r){let n=r?.origin??"unknown",o=await this.apiCallsQueues[n].enqueue(p=>bt.call({...Lr(t,"POST","application/json",""),requestParams:an(t),requestMetadata:{method:"search",origin:r?.origin},...this.options,signal:p??void 0}),{logger:this.options.logger,warnOnAbort:!r?.disableAbortWarning});if(o instanceof Error)return Rs(o,r?.disableAbortWarning);let a=await o.json(),d={response:o,body:a};return nh(a)?(d.body=oh(a),{success:(await this.options.postprocessSearchResponseMiddleware(d)).body}):{error:sn(d)}}async facetSearch(t){let r=await bt.call({...Lr(t,"POST","application/json","/facet"),requestParams:an(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let n=await r.json(),o={response:r,body:n};return(await this.options.postprocessFacetSearchResponseMiddleware(o)).body}async recommendations(t){let r=await bt.call({...Lr(t,"POST","application/json",""),requestParams:an(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();if(nh(n)){let o={response:r,body:n};return o.body=oh(n),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}}return{error:sn({response:r,body:n})}}async html(t){return rh(t,{...this.options})}async fieldDescriptions(t){let r=await bt.call({...Lr(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return ow(n)?{success:n}:{error:sn({response:r,body:n})}}},Xc=e=>e.success!==void 0,_e=e=>e.error!==void 0;function nh(e){return e.results!==void 0}function oh(e){let t=Xo();return ne(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function rw(e){return e.completions!==void 0}function nw(e){return e.preprocessingOutput!==void 0}function ow(e){return e.fields!==void 0}l();s();u();c();l();s();u();c();var H=new D({required:!0,emptyAllowed:!1}),Ee=new D({required:!1,emptyAllowed:!1}),be=new D({required:!0,emptyAllowed:!0}),ah=new D({required:!1,emptyAllowed:!0}),Zc=new te({each:H,required:!0}),ih=new D({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),sh=new D({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),CU=new D({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),Qr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),vt=(e,t)=>{if("required"in t)return{payload:new ue({value:t}).validate({value:e}).value};let o=new B({options:{required:!0},values:t}).validate(e);if(o)throw new ys(o);return{payload:e}},I=(e,t)=>{try{return vt(e,t)}catch(r){return{payload:e,error:Qr(r)}}},Le=(e,t,r,n)=>{let o=`Check the initialState of ${n}`;return ch(e,t,r,o,"Controller initialization error")},Pe=(e,t,r,n)=>{let o=`Check the options of ${n}`;return ch(e,t,r,o,"Controller initialization error")},ch=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(a){throw e.logger.error(a,o),a}};l();s();u();c();l();s();u();c();l();s();u();c();function Ye(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var aw=typeof Symbol=="function"&&Symbol.observable||"@@observable",uh=aw,gm=()=>Math.random().toString(36).substring(7).split("").join("."),iw={INIT:`@@redux/INIT${gm()}`,REPLACE:`@@redux/REPLACE${gm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gm()}`},eu=iw;function Zt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Sm(e,t,r){if(typeof e!="function")throw new Error(Ye(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ye(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ye(1));return r(Sm)(e,t)}let n=e,o=t,a=new Map,d=a,p=0,m=!1;function f(){d===a&&(d=new Map,a.forEach((b,R)=>{d.set(R,b)}))}function h(){if(m)throw new Error(Ye(3));return o}function x(b){if(typeof b!="function")throw new Error(Ye(4));if(m)throw new Error(Ye(5));let R=!0;f();let E=p++;return d.set(E,b),function(){if(R){if(m)throw new Error(Ye(6));R=!1,f(),d.delete(E),a=null}}}function A(b){if(!Zt(b))throw new Error(Ye(7));if(typeof b.type>"u")throw new Error(Ye(8));if(typeof b.type!="string")throw new Error(Ye(17));if(m)throw new Error(Ye(9));try{m=!0,o=n(o,b)}finally{m=!1}return(a=d).forEach(E=>{E()}),b}function C(b){if(typeof b!="function")throw new Error(Ye(10));n=b,A({type:eu.REPLACE})}function F(){let b=x;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(Ye(11));function E(){let T=R;T.next&&T.next(h())}return E(),{unsubscribe:b(E)}},[uh](){return this}}}return A({type:eu.INIT}),{dispatch:A,subscribe:x,getState:h,replaceReducer:C,[uh]:F}}function sw(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:eu.INIT})>"u")throw new Error(Ye(12));if(typeof r(void 0,{type:eu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ye(13))})}function Zo(e){let t=Object.keys(e),r={};for(let d=0;d<t.length;d++){let p=t[d];typeof e[p]=="function"&&(r[p]=e[p])}let n=Object.keys(r),o,a;try{sw(r)}catch(d){a=d}return function(p={},m){if(a)throw a;let f=!1,h={};for(let x=0;x<n.length;x++){let A=n[x],C=r[A],F=p[A],w=C(F,m);if(typeof w>"u"){let b=m&&m.type;throw new Error(Ye(14))}h[A]=w,f=f||w!==F}return f=f||n.length!==Object.keys(p).length,f?h:p}}function ea(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function lh(...e){return t=>(r,n)=>{let o=t(r,n),a=()=>{throw new Error(Ye(15))},d={getState:o.getState,dispatch:(m,...f)=>a(m,...f)},p=e.map(m=>m(d));return a=ea(...p)(o.dispatch),{...o,dispatch:a}}}function tu(e){return Zt(e)&&"type"in e&&typeof e.type=="string"}l();s();u();c();var Pm=Symbol.for("immer-nothing"),bs=Symbol.for("immer-draftable"),ut=Symbol.for("immer-state");function Je(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var co=Object.getPrototypeOf;function ht(e){return!!e&&!!e[ut]}function lt(e){return e?gh(e)||Array.isArray(e)||!!e[bs]||!!e.constructor?.[bs]||Is(e)||Ts(e):!1}var cw=Object.prototype.constructor.toString();function gh(e){if(!e||typeof e!="object")return!1;let t=co(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===cw}function wm(e){return ht(e)||Je(15,e),e[ut].base_}function vs(e,t){uo(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function uo(e){let t=e[ut];return t?t.type_:Array.isArray(e)?1:Is(e)?2:Ts(e)?3:0}function Ps(e,t){return uo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hm(e,t){return uo(e)===2?e.get(t):e[t]}function Sh(e,t,r){let n=uo(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function uw(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Is(e){return e instanceof Map}function Ts(e){return e instanceof Set}function so(e){return e.copy_||e.base_}function xm(e,t){if(Is(e))return new Map(e);if(Ts(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=gh(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[ut];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){let d=o[a],p=n[d];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(n[d]={configurable:!0,writable:!0,enumerable:p.enumerable,value:e[d]})}return Object.create(co(e),n)}else{let n=co(e);if(n!==null&&r)return{...e};let o=Object.create(n);return Object.assign(o,e)}}function ou(e,t=!1){return au(e)||ht(e)||!lt(e)||(uo(e)>1&&(e.set=e.add=e.clear=e.delete=lw),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>ou(n,!0))),e}function lw(){Je(2)}function au(e){return Object.isFrozen(e)}var Am={};function lo(e){let t=Am[e];return t||Je(0,e),t}function dw(e,t){Am[e]||(Am[e]=t)}var ws;function hh(){return ws}function pw(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dh(e,t){t&&(lo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Fm(e){Rm(e),e.drafts_.forEach(mw),e.drafts_=null}function Rm(e){e===ws&&(ws=e.parent_)}function ph(e){return ws=pw(ws,e)}function mw(e){let t=e[ut];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function mh(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[ut].modified_&&(Fm(t),Je(4)),lt(e)&&(e=ru(t,e),t.parent_||nu(t,e)),t.patches_&&lo("Patches").generateReplacementPatches_(r[ut].base_,e,t.patches_,t.inversePatches_)):e=ru(t,r,[]),Fm(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Pm?e:void 0}function ru(e,t,r){if(au(t))return t;let n=t[ut];if(!n)return vs(t,(o,a)=>fh(e,n,t,o,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return nu(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,a=o,d=!1;n.type_===3&&(a=new Set(o),o.clear(),d=!0),vs(a,(p,m)=>fh(e,n,o,p,m,r,d)),nu(e,o,!1),r&&e.patches_&&lo("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function fh(e,t,r,n,o,a,d){if(ht(o)){let p=a&&t&&t.type_!==3&&!Ps(t.assigned_,n)?a.concat(n):void 0,m=ru(e,o,p);if(Sh(r,n,m),ht(m))e.canAutoFreeze_=!1;else return}else d&&r.add(o);if(lt(o)&&!au(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ru(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&nu(e,o)}}function nu(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ou(t,r)}function fw(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:hh(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=Em;r&&(o=[n],a=Es);let{revoke:d,proxy:p}=Proxy.revocable(o,a);return n.draft_=p,n.revoke_=d,p}var Em={get(e,t){if(t===ut)return e;let r=so(e);if(!Ps(r,t))return gw(e,r,t);let n=r[t];return e.finalized_||!lt(n)?n:n===ym(e.base_,t)?(Cm(e),e.copy_[t]=vm(n,e)):n},has(e,t){return t in so(e)},ownKeys(e){return Reflect.ownKeys(so(e))},set(e,t,r){let n=yh(so(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=ym(so(e),t),a=o?.[ut];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(uw(r,o)&&(r!==void 0||Ps(e.base_,t)))return!0;Cm(e),bm(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ym(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Cm(e),bm(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=so(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Je(11)},getPrototypeOf(e){return co(e.base_)},setPrototypeOf(){Je(12)}},Es={};vs(Em,(e,t)=>{Es[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Es.deleteProperty=function(e,t){return Es.set.call(this,e,t,void 0)};Es.set=function(e,t,r){return Em.set.call(this,e[0],t,r,e[0])};function ym(e,t){let r=e[ut];return(r?so(r):e)[t]}function gw(e,t,r){let n=yh(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function yh(e,t){if(!(t in e))return;let r=co(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=co(r)}}function bm(e){e.modified_||(e.modified_=!0,e.parent_&&bm(e.parent_))}function Cm(e){e.copy_||(e.copy_=xm(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Sw=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let d=this;return function(m=a,...f){return d.produce(m,h=>r.call(this,h,...f))}}typeof r!="function"&&Je(6),n!==void 0&&typeof n!="function"&&Je(7);let o;if(lt(t)){let a=ph(this),d=vm(t,void 0),p=!0;try{o=r(d),p=!1}finally{p?Fm(a):Rm(a)}return dh(a,n),mh(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===Pm&&(o=void 0),this.autoFreeze_&&ou(o,!0),n){let a=[],d=[];lo("Patches").generateReplacementPatches_(t,o,a,d),n(a,d)}return o}else Je(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...p)=>this.produceWithPatches(d,m=>t(m,...p));let n,o;return[this.produce(t,r,(d,p)=>{n=d,o=p}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){lt(e)||Je(8),ht(e)&&(e=Ch(e));let t=ph(this),r=vm(e,void 0);return r[ut].isManual_=!0,Rm(t),r}finishDraft(e,t){let r=e&&e[ut];(!r||!r.isManual_)&&Je(9);let{scope_:n}=r;return dh(n,t),mh(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=lo("Patches").applyPatches_;return ht(e)?n(e,t):this.produce(e,o=>n(o,t))}};function vm(e,t){let r=Is(e)?lo("MapSet").proxyMap_(e,t):Ts(e)?lo("MapSet").proxySet_(e,t):fw(e,t);return(t?t.scope_:hh()).drafts_.push(r),r}function Ch(e){return ht(e)||Je(10,e),xh(e)}function xh(e){if(!lt(e)||au(e))return e;let t=e[ut],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=xm(e,t.scope_.immer_.useStrictShallowCopy_)}else r=xm(e,!0);return vs(r,(n,o)=>{Sh(r,n,xh(o))}),t&&(t.finalized_=!1),r}function Ah(){let t="replace",r="add",n="remove";function o(A,C,F,w){switch(A.type_){case 0:case 2:return d(A,C,F,w);case 1:return a(A,C,F,w);case 3:return p(A,C,F,w)}}function a(A,C,F,w){let{base_:b,assigned_:R}=A,E=A.copy_;E.length<b.length&&([b,E]=[E,b],[F,w]=[w,F]);for(let P=0;P<b.length;P++)if(R[P]&&E[P]!==b[P]){let T=C.concat([P]);F.push({op:t,path:T,value:x(E[P])}),w.push({op:t,path:T,value:x(b[P])})}for(let P=b.length;P<E.length;P++){let T=C.concat([P]);F.push({op:r,path:T,value:x(E[P])})}for(let P=E.length-1;b.length<=P;--P){let T=C.concat([P]);w.push({op:n,path:T})}}function d(A,C,F,w){let{base_:b,copy_:R}=A;vs(A.assigned_,(E,P)=>{let T=hm(b,E),M=hm(R,E),q=P?Ps(b,E)?t:r:n;if(T===M&&q===t)return;let O=C.concat(E);F.push(q===n?{op:q,path:O}:{op:q,path:O,value:M}),w.push(q===r?{op:n,path:O}:q===n?{op:r,path:O,value:x(T)}:{op:t,path:O,value:x(T)})})}function p(A,C,F,w){let{base_:b,copy_:R}=A,E=0;b.forEach(P=>{if(!R.has(P)){let T=C.concat([E]);F.push({op:n,path:T,value:P}),w.unshift({op:r,path:T,value:P})}E++}),E=0,R.forEach(P=>{if(!b.has(P)){let T=C.concat([E]);F.push({op:r,path:T,value:P}),w.unshift({op:n,path:T,value:P})}E++})}function m(A,C,F,w){F.push({op:t,path:[],value:C===Pm?void 0:C}),w.push({op:t,path:[],value:A})}function f(A,C){return C.forEach(F=>{let{path:w,op:b}=F,R=A;for(let M=0;M<w.length-1;M++){let q=uo(R),O=w[M];typeof O!="string"&&typeof O!="number"&&(O=""+O),(q===0||q===1)&&(O==="__proto__"||O==="constructor")&&Je(19),typeof R=="function"&&O==="prototype"&&Je(19),R=hm(R,O),typeof R!="object"&&Je(18,w.join("/"))}let E=uo(R),P=h(F.value),T=w[w.length-1];switch(b){case t:switch(E){case 2:return R.set(T,P);case 3:Je(16);default:return R[T]=P}case r:switch(E){case 1:return T==="-"?R.push(P):R.splice(T,0,P);case 2:return R.set(T,P);case 3:return R.add(P);default:return R[T]=P}case n:switch(E){case 1:return R.splice(T,1);case 2:return R.delete(T);case 3:return R.delete(F.value);default:return delete R[T]}default:Je(17,b)}}),A}function h(A){if(!lt(A))return A;if(Array.isArray(A))return A.map(h);if(Is(A))return new Map(Array.from(A.entries()).map(([F,w])=>[F,h(w)]));if(Ts(A))return new Set(Array.from(A).map(h));let C=Object.create(co(A));for(let F in A)C[F]=h(A[F]);return Ps(A,bs)&&(C[bs]=A[bs]),C}function x(A){return ht(A)?h(A):A}dw("Patches",{applyPatches_:f,generatePatches_:o,generateReplacementPatches_:m})}var yt=new Sw,Br=yt.produce,iu=yt.produceWithPatches.bind(yt),TU=yt.setAutoFreeze.bind(yt),OU=yt.setUseStrictShallowCopy.bind(yt),Im=yt.applyPatches.bind(yt),kU=yt.createDraft.bind(yt),qU=yt.finishDraft.bind(yt);l();s();u();c();function hw(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function yw(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Cw(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Fh=e=>Array.isArray(e)?e:[e];function xw(e){let t=Array.isArray(e[0])?e[0]:e;return Cw(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Aw(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var BU=Symbol();var UU=Object.getPrototypeOf({});var Fw=class{constructor(e){this.value=e}deref(){return this.value}},Rw=typeof WeakRef<"u"?WeakRef:Fw,bw=0,Rh=1;function su(){return{s:bw,v:void 0,o:null,p:null}}function ta(e,t={}){let r=su(),{resultEqualityCheck:n}=t,o,a=0;function d(){let p=r,{length:m}=arguments;for(let x=0,A=m;x<A;x++){let C=arguments[x];if(typeof C=="function"||typeof C=="object"&&C!==null){let F=p.o;F===null&&(p.o=F=new WeakMap);let w=F.get(C);w===void 0?(p=su(),F.set(C,p)):p=w}else{let F=p.p;F===null&&(p.p=F=new Map);let w=F.get(C);w===void 0?(p=su(),F.set(C,p)):p=w}}let f=p,h;if(p.s===Rh)h=p.v;else if(h=e.apply(null,arguments),a++,n){let x=o?.deref?.()??o;x!=null&&n(x,h)&&(h=x,a!==0&&a--),o=typeof h=="object"&&h!==null||typeof h=="function"?new Rw(h):h}return f.s=Rh,f.v=h,h}return d.clearCache=()=>{r=su(),d.resetResultsCount()},d.resultsCount=()=>a,d.resetResultsCount=()=>{a=0},d}function bh(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let a=0,d=0,p,m={},f=o.pop();typeof f=="object"&&(m=f,f=o.pop()),hw(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);let h={...r,...m},{memoize:x,memoizeOptions:A=[],argsMemoize:C=ta,argsMemoizeOptions:F=[],devModeChecks:w={}}=h,b=Fh(A),R=Fh(F),E=xw(o),P=x(function(){return a++,f.apply(null,arguments)},...b),T=!0,M=C(function(){d++;let O=Aw(E,arguments);return p=P.apply(null,O),p},...R);return Object.assign(M,{resultFunc:f,memoizedResultFunc:P,dependencies:E,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>p,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:x,argsMemoize:C})};return Object.assign(n,{withTypes:()=>n}),n}var le=bh(ta),vw=Object.assign((e,t=le)=>{yw(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((d,p,m)=>(d[r[m]]=p,d),{}))},{withTypes:()=>vw});l();s();u();c();function vh(e){return({dispatch:r,getState:n})=>o=>a=>typeof a=="function"?a(r,n,e):o(a)}var Ph=vh(),wh=vh;var Pw=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ea:ea.apply(null,arguments)},a_=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},ww=e=>e&&typeof e.match=="function";function v(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error($t(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>tu(n)&&n.type===e,r}var kh=class Os extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Os.prototype)}static get[Symbol.species](){return Os}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Os(...t[0].concat(this)):new Os(...t.concat(this))}};function Eh(e){return lt(e)?Br(e,()=>{}):e}function Ih(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Ew(e){return typeof e=="boolean"}var Iw=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=t??{},d=new kh;return r&&(Ew(r)?d.push(Ph):d.push(wh(r.extraArgument))),d},ks="RTK_autoBatch",na=()=>e=>({payload:e,meta:{[ks]:!0}}),Th=e=>t=>{setTimeout(t,e)},Tw=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),o=!0,a=!1,d=!1,p=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Th(10):e.type==="callback"?e.queueNotification:Th(e.timeout),f=()=>{d=!1,a&&(a=!1,p.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){let x=()=>o&&h(),A=n.subscribe(x);return p.add(h),()=>{A(),p.delete(h)}},dispatch(h){try{return o=!h?.meta?.[ks],a=!o,a&&(d||(d=!0,m(f))),n.dispatch(h)}finally{o=!0}}})},Ow=e=>function(r){let{autoBatch:n=!0}=r??{},o=new kh(e);return n&&o.push(Tw(typeof n=="object"?n:void 0)),o};function qh(e){let t=Iw(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:a=void 0,enhancers:d=void 0}=e||{},p;if(typeof r=="function")p=r;else if(Zt(r))p=Zo(r);else throw new Error($t(1));let m;typeof n=="function"?m=n(t):m=t();let f=ea;o&&(f=Pw({trace:!1,...typeof o=="object"&&o}));let h=lh(...m),x=Ow(h),A=typeof d=="function"?d(x):x(),C=f(...A);return Sm(p,a,C)}function Dh(e){let t={},r=[],n,o={addCase(a,d){let p=typeof a=="string"?a:a.type;if(!p)throw new Error($t(28));if(p in t)throw new Error($t(29));return t[p]=d,o},addMatcher(a,d){return r.push({matcher:a,reducer:d}),o},addDefaultCase(a){return n=a,o}};return e(o),[t,r,n]}function kw(e){return typeof e=="function"}function re(e,t){let[r,n,o]=Dh(t),a;if(kw(e))a=()=>Eh(e());else{let p=Eh(e);a=()=>p}function d(p=a(),m){let f=[r[m.type],...n.filter(({matcher:h})=>h(m)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[o]),f.reduce((h,x)=>{if(x)if(ht(h)){let C=x(h,m);return C===void 0?h:C}else{if(lt(h))return Br(h,A=>x(A,m));{let A=x(h,m);if(A===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return h},p)}return d.getInitialState=a,d}var Vh=(e,t)=>ww(e)?e.match(t):e(t);function er(...e){return t=>e.some(r=>Vh(r,t))}function ra(...e){return t=>e.every(r=>Vh(r,t))}function uu(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function qs(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function lu(...e){return e.length===0?t=>uu(t,["pending"]):qs(e)?er(...e.map(t=>t.pending)):lu()(e[0])}function po(...e){return e.length===0?t=>uu(t,["rejected"]):qs(e)?er(...e.map(t=>t.rejected)):po()(e[0])}function Ds(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?ra(po(...e),t):qs(e)?ra(po(...e),t):Ds()(e[0])}function Ur(...e){return e.length===0?t=>uu(t,["fulfilled"]):qs(e)?er(...e.map(t=>t.fulfilled)):Ur()(e[0])}function du(...e){return e.length===0?t=>uu(t,["pending","fulfilled","rejected"]):qs(e)?er(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):du()(e[0])}var qw="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pu=(e=21)=>{let t="",r=e;for(;r--;)t+=qw[Math.random()*64|0];return t},Dw=["name","message","stack","code"],Tm=class{constructor(e,t){Ae(this,"_type");this.payload=e,this.meta=t}},Oh=class{constructor(e,t){Ae(this,"_type");this.payload=e,this.meta=t}},Vw=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of Dw)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},ie=(()=>{function e(t,r,n){let o=v(t+"/fulfilled",(m,f,h,x)=>({payload:m,meta:{...x||{},arg:h,requestId:f,requestStatus:"fulfilled"}})),a=v(t+"/pending",(m,f,h)=>({payload:void 0,meta:{...h||{},arg:f,requestId:m,requestStatus:"pending"}})),d=v(t+"/rejected",(m,f,h,x,A)=>({payload:x,error:(n&&n.serializeError||Vw)(m||"Rejected"),meta:{...A||{},arg:h,requestId:f,rejectedWithValue:!!x,requestStatus:"rejected",aborted:m?.name==="AbortError",condition:m?.name==="ConditionError"}}));function p(m){return(f,h,x)=>{let A=n?.idGenerator?n.idGenerator(m):pu(),C=new i.AbortController,F,w;function b(E){w=E,C.abort()}let R=async function(){let E;try{let T=n?.condition?.(m,{getState:h,extra:x});if(Mw(T)&&(T=await T),T===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let M=new Promise((q,O)=>{F=()=>{O({name:"AbortError",message:w||"Aborted"})},C.signal.addEventListener("abort",F)});f(a(A,m,n?.getPendingMeta?.({requestId:A,arg:m},{getState:h,extra:x}))),E=await Promise.race([M,Promise.resolve(r(m,{dispatch:f,getState:h,extra:x,requestId:A,signal:C.signal,abort:b,rejectWithValue:(q,O)=>new Tm(q,O),fulfillWithValue:(q,O)=>new Oh(q,O)})).then(q=>{if(q instanceof Tm)throw q;return q instanceof Oh?o(q.payload,A,m,q.meta):o(q,A,m)})])}catch(T){E=T instanceof Tm?d(null,A,m,T.payload,T.meta):d(T,A,m)}finally{F&&C.signal.removeEventListener("abort",F)}return n&&!n.dispatchConditionRejection&&d.match(E)&&E.meta.condition||f(E),E}();return Object.assign(R,{abort:b,requestId:A,arg:m,unwrap(){return R.then(Nw)}})}}return Object.assign(p,{pending:a,rejected:d,fulfilled:o,settled:er(d,o),typePrefix:t})}return e.withTypes=()=>e,e})();function Nw(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Mw(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Nh=Symbol.for("rtk-slice-createasyncthunk"),l_={[Nh]:ie};function Lw(e,t){return`${e}/${t}`}function Qw({creators:e}={}){let t=e?.asyncThunk?.[Nh];return function(n){let{name:o,reducerPath:a=o}=n;if(!o)throw new Error($t(11));typeof process<"u";let d=(typeof n.reducers=="function"?n.reducers(Uw()):n.reducers)||{},p=Object.keys(d),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(E,P){let T=typeof E=="string"?E:E.type;if(!T)throw new Error($t(12));if(T in m.sliceCaseReducersByType)throw new Error($t(13));return m.sliceCaseReducersByType[T]=P,f},addMatcher(E,P){return m.sliceMatchers.push({matcher:E,reducer:P}),f},exposeAction(E,P){return m.actionCreators[E]=P,f},exposeCaseReducer(E,P){return m.sliceCaseReducersByName[E]=P,f}};p.forEach(E=>{let P=d[E],T={reducerName:E,type:Lw(o,E),createNotation:typeof n.reducers=="function"};jw(P)?Hw(T,P,f,t):_w(T,P,f)});function h(){let[E={},P=[],T=void 0]=typeof n.extraReducers=="function"?Dh(n.extraReducers):[n.extraReducers],M={...E,...m.sliceCaseReducersByType};return re(n.initialState,q=>{for(let O in M)q.addCase(O,M[O]);for(let O of m.sliceMatchers)q.addMatcher(O.matcher,O.reducer);for(let O of P)q.addMatcher(O.matcher,O.reducer);T&&q.addDefaultCase(T)})}let x=E=>E,A=new Map,C;function F(E,P){return C||(C=h()),C(E,P)}function w(){return C||(C=h()),C.getInitialState()}function b(E,P=!1){function T(q){let O=q[E];return typeof O>"u"&&P&&(O=w()),O}function M(q=x){let O=Ih(A,P,()=>new WeakMap);return Ih(O,q,()=>{let k={};for(let[V,Q]of Object.entries(n.selectors??{}))k[V]=Bw(Q,q,w,P);return k})}return{reducerPath:E,getSelectors:M,get selectors(){return M(T)},selectSlice:T}}let R={name:o,reducer:F,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:w,...b(a),injectInto(E,{reducerPath:P,...T}={}){let M=P??a;return E.inject({reducerPath:M,reducer:F},T),{...R,...b(M,!0)}}};return R}}function Bw(e,t,r,n){function o(a,...d){let p=t(a);return typeof p>"u"&&n&&(p=r()),e(p,...d)}return o.unwrapped=e,o}var mo=Qw();function Uw(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function _w({type:e,reducerName:t,createNotation:r},n,o){let a,d;if("reducer"in n){if(r&&!$w(n))throw new Error($t(17));a=n.reducer,d=n.prepare}else a=n;o.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,d?v(e,d):v(e))}function jw(e){return e._reducerDefinitionType==="asyncThunk"}function $w(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Hw({type:e,reducerName:t},r,n,o){if(!o)throw new Error($t(18));let{payloadCreator:a,fulfilled:d,pending:p,rejected:m,settled:f,options:h}=r,x=o(e,a,h);n.exposeAction(t,x),d&&n.addCase(x.fulfilled,d),p&&n.addCase(x.pending,p),m&&n.addCase(x.rejected,m),f&&n.addMatcher(x.settled,f),n.exposeCaseReducer(t,{fulfilled:d||cu,pending:p||cu,rejected:m||cu,settled:f||cu})}function cu(){}var Mh="listener",Lh="completed",Qh="cancelled",d_=`task-${Qh}`,p_=`task-${Lh}`,m_=`${Mh}-${Qh}`,f_=`${Mh}-${Lh}`;var{assign:Bh}=Object;var Om="listenerMiddleware";var Gw=Bh(v(`${Om}/add`),{withTypes:()=>Gw}),g_=v(`${Om}/removeAll`),Ww=Bh(v(`${Om}/remove`),{withTypes:()=>Ww});var S_=Symbol.for("rtk-state-proxy-original");function $t(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Uh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function zw(e){return typeof e=="string"&&Uh.test(e)}var km=zw;l();s();u();c();var Xe=[];for(let e=0;e<256;++e)Xe.push((e+256).toString(16).slice(1));function _h(e,t=0){return(Xe[e[t+0]]+Xe[e[t+1]]+Xe[e[t+2]]+Xe[e[t+3]]+"-"+Xe[e[t+4]]+Xe[e[t+5]]+"-"+Xe[e[t+6]]+Xe[e[t+7]]+"-"+Xe[e[t+8]]+Xe[e[t+9]]+"-"+Xe[e[t+10]]+Xe[e[t+11]]+Xe[e[t+12]]+Xe[e[t+13]]+Xe[e[t+14]]+Xe[e[t+15]]).toLowerCase()}l();s();u();c();var qm,Kw=new Uint8Array(16);function Dm(){if(!qm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");qm=crypto.getRandomValues.bind(crypto)}return qm(Kw)}l();s();u();c();l();s();u();c();var Yw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vm={randomUUID:Yw};function Jw(e,t,r){if(Vm.randomUUID&&!t&&!e)return Vm.randomUUID();e=e||{};let n=e.random??e.rng?.()??Dm();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return _h(n)}var Nm=Jw;l();s();u();c();function jh(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}function Xw({config:e,environment:t,event:r,listenerManager:n}){let{url:o,token:a,mode:d}=e;d!=="disabled"&&(n.call(r),t.send(o,a,r))}var $h="visitorId";function Zw(e){return{getClientId:()=>{let t=e.get(),r=t.storage,n=r.getItem($h),o=n&&km(n)?n:t.generateUUID();return r.setItem($h,o),o}}}var Gh="1.2.1";function eE(e){let{trackingId:t}=e;return{trackingId:t}}function tE(e){return(e.source||[]).concat([`relay@${Gh}`])}function Wh(e,t,r,n){let{getReferrer:o,getLocation:a,getUserAgent:d}=r,p=eE(t),m=n.getClientId();return Object.freeze({type:e,config:p,ts:Date.now(),source:tE(t),clientId:m,userAgent:d(),referrer:o(),location:a()})}function rE(e,t,r,n,o){return{...t,meta:Wh(e,r,n,o)}}var nE="*";function oE(){let e=[];function t({type:m,callback:f}){return e.findIndex(h=>h.type===m&&h.callback===f)}function r(m,f){return m.type==="*"||f===m.type}function n(m){return t(m)<0&&e.push(m),()=>p(m.type,m.callback)}function o(m){e.forEach(f=>{if(r(f,m.meta.type))try{f.callback(m)}catch(h){console.error(h)}})}function a(m){if(m===nE)e.length=0;else for(let f=e.length-1;f>=0;f--)e[f].type===m&&e.splice(f,1)}function d(m){let f=t(m);f>=0&&e.splice(f,1)}function p(m,f){f?d({type:m,callback:f}):a(m)}return{add:n,call:o,remove:p}}function Hh({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source},...!!n.environment&&{environment:n.environment}})}function aE(e){let t=Hh(e);return{get:()=>t,update:r=>{t=Hh({...t,...r})}}}var Mm=iE();function iE(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,o=document.cookie.split(";");for(let a of o){let d=a.replace(/^\s+/,"");if(d.lastIndexOf(n,0)===0)return d.substring(n.length,d.length)}return null},setItem(r,n,o){let a=t(window.location.hostname),d=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,p=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${d}${p};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function sE(){return{getItem(e){return Mm.getItem(e)||localStorage.getItem(e)},removeItem(e){Mm.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Mm.setItem(e,t,31556952e3)}}}function cE(){let e=document.referrer;return e===""?null:e}function uE(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(jh().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>cE(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>Nm(),storage:sE()}}function lE(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function dE(){return{getItem(){return null},removeItem(){},setItem(){}}}function pE(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:dE()}}function mE(e){let t=e.get().mode!=="disabled",r=e.get().environment,n=pE();return t&&r?{storage:n.storage,...r,runtime:"custom"}:t&&fE()&&lE()?uE():n}function fE(){try{return typeof window=="object"}catch{return!1}}function gE(e){return{get:()=>Object.freeze(mE(e))}}function zh(e){let t=aE(e),r=oE(),n=gE(t),o=Zw(n);return{emit:(a,d)=>{let p=t.get(),m=n.get(),f=rE(a,d,p,m,o);return Xw({config:p,environment:m,event:f,listenerManager:r})},getMeta:a=>Wh(a,t.get(),n.get(),o),on:(a,d)=>r.add({type:a,callback:d}),off:(a,d)=>r.remove(a,d),updateConfig:a=>t.update(a),version:Gh}}l();s();u();c();l();s();u();c();var un="3.26.0",Kh=["@coveo/atomic","@coveo/quantic"];var ln=le(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${un}`));var oa=le(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>ln(e.configuration.analytics),(e,t,r,{trackingId:n,apiBaseUrl:o,enabled:a},d)=>zh({mode:a?"emit":"disabled",url:o??Kc(e,t),token:r,trackingId:n??null,source:d}));l();s();u();c();l();s();u();c();function _r(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function N(e,t,r,n){function o(a){return a instanceof r?a:new r(function(d){d(a)})}return new(r||(r=Promise))(function(a,d){function p(h){try{f(n.next(h))}catch(x){d(x)}}function m(h){try{f(n.throw(h))}catch(x){d(x)}}function f(h){h.done?a(h.value):o(h.value).then(p,m)}f((n=n.apply(e,t||[])).next())})}var ye;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ye||(ye={}));function Bm(){return typeof window<"u"}function Zm(){return typeof navigator<"u"}function aa(){return typeof document<"u"}function Um(){try{return typeof localStorage<"u"}catch{return!1}}function SE(){try{return typeof sessionStorage<"u"}catch{return!1}}function uy(){return Zm()&&navigator.cookieEnabled}var hE=[ye.click,ye.custom,ye.search,ye.view],yE=(e,t)=>hE.indexOf(e)!==-1?Object.assign({language:aa()?document.documentElement.lang:"unknown",userAgent:Zm()?navigator.userAgent:"unknown"},t):t,Ns=class e{static set(t,r,n){var o,a,d,p;n&&(a=new Date,a.setTime(a.getTime()+n)),p=window.location.hostname,p.indexOf(".")===-1?Yh(t,r,a):(d=p.split("."),o=d[d.length-2]+"."+d[d.length-1],Yh(t,r,a,o))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function Yh(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function CE(){return Um()?localStorage:uy()?new Ms:SE()?sessionStorage:new sa}var Ms=class e{getItem(t){return Ns.get(`${e.prefix}${t}`)}removeItem(t){Ns.erase(`${e.prefix}${t}`)}setItem(t,r,n){Ns.set(`${e.prefix}${t}`,r,n)}};Ms.prefix="coveo_";var _m=class{constructor(){this.cookieStorage=new Ms}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},sa=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},mu="__coveo.analytics.history",xE=20,AE=1e3*60,FE=75,Su=class{constructor(t){this.store=t||CE()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return N(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return N(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(mu);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return N(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(mu);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(mu,JSON.stringify(t.slice(0,xE)))}catch{}}clear(){try{this.store.removeItem(mu)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,FE)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>AE:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};var RE=(e,t)=>N(void 0,void 0,void 0,function*(){return e===ye.view?(yield bE(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),bE=e=>N(void 0,void 0,void 0,function*(){let t=new Su,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),fu,vE=new Uint8Array(16);function PE(){if(!fu&&(fu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fu(vE)}var wE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hu(e){return typeof e=="string"&&wE.test(e)}var Ze=[];for(let e=0;e<256;++e)Ze.push((e+256).toString(16).slice(1));function ly(e,t=0){return(Ze[e[t+0]]+Ze[e[t+1]]+Ze[e[t+2]]+Ze[e[t+3]]+"-"+Ze[e[t+4]]+Ze[e[t+5]]+"-"+Ze[e[t+6]]+Ze[e[t+7]]+"-"+Ze[e[t+8]]+Ze[e[t+9]]+"-"+Ze[e[t+10]]+Ze[e[t+11]]+Ze[e[t+12]]+Ze[e[t+13]]+Ze[e[t+14]]+Ze[e[t+15]]).toLowerCase()}function EE(e){if(!hu(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function IE(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var TE="6ba7b810-9dad-11d1-80b4-00c04fd430c8",OE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function kE(e,t,r){function n(o,a,d,p){var m;if(typeof o=="string"&&(o=IE(o)),typeof a=="string"&&(a=EE(a)),((m=a)===null||m===void 0?void 0:m.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+o.length);if(f.set(a),f.set(o,a.length),f=r(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,d){p=p||0;for(let h=0;h<16;++h)d[p+h]=f[h];return d}return ly(f)}try{n.name=e}catch{}return n.DNS=TE,n.URL=OE,n}var qE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jh={randomUUID:qE};function fo(e,t,r){if(Jh.randomUUID&&!t&&!e)return Jh.randomUUID();e=e||{};let n=e.random||(e.rng||PE)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return ly(n)}function DE(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Lm(e,t){return e<<t|e>>>32-t}function VE(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let d=unescape(encodeURIComponent(e));e=[];for(let p=0;p<d.length;++p)e.push(d.charCodeAt(p))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,o=Math.ceil(n/16),a=new Array(o);for(let d=0;d<o;++d){let p=new Uint32Array(16);for(let m=0;m<16;++m)p[m]=e[d*64+m*4]<<24|e[d*64+m*4+1]<<16|e[d*64+m*4+2]<<8|e[d*64+m*4+3];a[d]=p}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(let d=0;d<o;++d){let p=new Uint32Array(80);for(let C=0;C<16;++C)p[C]=a[d][C];for(let C=16;C<80;++C)p[C]=Lm(p[C-3]^p[C-8]^p[C-14]^p[C-16],1);let m=r[0],f=r[1],h=r[2],x=r[3],A=r[4];for(let C=0;C<80;++C){let F=Math.floor(C/20),w=Lm(m,5)+DE(F,f,h,x)+A+t[F]+p[C]>>>0;A=x,x=h,h=Lm(f,30)>>>0,f=m,m=w}r[0]=r[0]+m>>>0,r[1]=r[1]+f>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+x>>>0,r[4]=r[4]+A>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var NE=kE("v5",80,VE),Xh=NE,dy="2.30.45",Zh=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Vs={pageview:"pageview",event:"event"},yu=class{constructor({client:t,uuidGenerator:r=fo}){this.client=t,this.uuidGenerator=r}},jm=class extends yu{constructor({client:t,uuidGenerator:r=fo}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Zh(window.location),this.lastReferrer=aa()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:aa()?document.title:"",encoding:aa()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),n),o),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:o,location:a}=this.getNextValues(t,r);this.lastReferrer=o,this.pageViewId=n,this.currentLocation=a,t===Vs.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===Vs.pageview?this.nextPageViewId:this.pageViewId,referrer:t===Vs.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===Vs.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return Zh(window.location)}},dn=class e{constructor(t,r){if(!hu(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,o]=r;if(n.length!==32||isNaN(parseInt(o)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return hu(a)?new e(a,Number.parseInt(o)*1e3):null}};dn.cvo_cid="cvo_cid";dn.expirationTime=120;var $m=class extends yu{constructor({client:t,uuidGenerator:r=fo}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return N(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(dn.cvo_cid,new dn(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};$m.Id="link";var wt=Object.keys;function gu(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Qm=128,py=192,ey=224,ty=240;function ME(e){return(e&248)===ty?4:(e&ty)===ey?3:(e&ey)===py?2:1}function LE(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&Qm)!=Qm)break;if(r-=3,(n&py)!=Qm){t-r>=ME(n)*3&&(r=t);break}}return e.substring(0,r)}var Hm={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},QE=wt(Hm).map(e=>Hm[e]),BE=[...QE].join("|"),UE=new RegExp(`^(${BE}$)`),_E={svcAction:"svc_action",svcActionData:"svc_action_data"},jE=e=>wt(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Hm[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),$E=e=>UE.test(e),HE=[$E],ry={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},ny={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},et={action:"pa",list:"pal",listSource:"pls"},Cu={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},GE=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Gm={id:"quoteId",affiliation:"quoteAffiliation"},Wm={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},WE={add:et,bookmark_add:et,bookmark_remove:et,click:et,checkout:et,checkout_option:et,detail:et,impression:et,remove:et,refund:Object.assign(Object.assign({},et),Cu),purchase:Object.assign(Object.assign({},et),Cu),quickview:et,quote:Object.assign(Object.assign({},et),Gm),review:Object.assign(Object.assign({},et),Wm)},zE=wt(ry).map(e=>ry[e]),KE=wt(ny).map(e=>ny[e]),YE=wt(et).map(e=>et[e]),JE=wt(Cu).map(e=>Cu[e]),XE=wt(Wm).map(e=>Wm[e]),ZE=wt(Gm).map(e=>Gm[e]),eI=[...zE,"custom"].join("|"),tI=[...KE,"custom"].join("|"),my="(pr[0-9]+)",fy="(il[0-9]+pi[0-9]+)",rI=new RegExp(`^${my}(${eI})$`),nI=new RegExp(`^(${fy}(${tI}))|(il[0-9]+nm)$`),oI=new RegExp(`^(${YE.join("|")})$`),aI=new RegExp(`^(${JE.join("|")})$`),iI=new RegExp(`^${my}custom$`),sI=new RegExp(`^${fy}custom$`),cI=new RegExp(`^(${[...GE,...XE,...ZE].join("|")})$`),uI=e=>rI.test(e),lI=e=>nI.test(e),dI=e=>oI.test(e),pI=e=>aI.test(e),mI=e=>cI.test(e),fI=[lI,uI,dI,pI,mI],gI=[iI,sI],SI={anonymizeIp:"aip"},hI={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},yI={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},CI=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],xI=Object.assign(Object.assign(Object.assign(Object.assign({},SI),hI),yI),CI.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),zm=Object.assign(Object.assign({},xI),_E),AI=e=>{let t=!!e.action&&WE[e.action]||{};return wt(e).reduce((r,n)=>{let o=t[n]||zm[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},FI=wt(zm).map(e=>zm[e]),RI=e=>FI.indexOf(e)!==-1,bI=e=>e==="custom",vI=e=>[...fI,...HE,RI,bI].some(t=>t(e)),PI=e=>wt(e).reduce((t,r)=>{let n=wI(r);return n?Object.assign(Object.assign({},t),EI(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),wI=e=>{let t;return[...gI].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},EI=(e,t)=>wt(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),Km=class{constructor(t){this.opts=t}sendEvent(t,r){return N(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,a=yield this.getQueryParamsForEventType(t),{url:d,payload:p}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${a}`,r,o),m=this.encodeForEventType(t,p),f=new Blob([m],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(d,f)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return N(this,void 0,void 0,function*(){let o=t,a=r;if(n){let d=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:p,body:m}=d;o=p||t;try{a=JSON.parse(m)}catch(f){console.error("Unable to process the request body as a JSON string",f)}}return{payload:a,url:o}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return N(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return[ye.click,ye.custom,ye.search,ye.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let o=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(o=`access_token=${encodeURIComponent(n)}&${o}`),o}},Ym=class{sendEvent(t,r){return N(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return N(this,void 0,void 0,function*(){return Promise.resolve()})}},oy=g.fetch,xu=class{constructor(t){this.opts=t}sendEvent(t,r){return N(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:a}=this.opts,d=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",p={url:`${n}/analytics/${t}${d}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},m=Object.assign(Object.assign({},p),a?yield a(p,"analyticsFetch"):{}),{url:f}=m,h=_r(m,["url"]),x;try{x=yield oy(f,h)}catch(A){console.error("An error has occured when sending the event.",A);return}if(x.ok){let A=yield x.json();return A.visitorId&&o.setCurrentVisitorId(A.visitorId),A}else{try{x.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,x,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return N(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield oy(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[ye.click,ye.custom,ye.search,ye.view].indexOf(t)!==-1}getVisitorIdParam(){return N(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},Jm=class{constructor(t,r){Um()&&uy()?this.storage=new _m:Um()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new sa),this.client=new xu(t),this.beaconClient=new Km(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:a}of n)this.beaconClient.sendEvent(o,a)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Xm=class{constructor(t,r){this.storage=r||new sa,this.client=new xu(t)}getClientDependingOnEventType(t){return this.client}},Au=class{constructor(){this.storage=new sa,this.client=new Ym}getClientDependingOnEventType(t){return this.client}},II="xx",TI=e=>e?.startsWith(II)||!1,OI=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function kI(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var qI=["1",1,"yes",!0];function Fu(){let e=[];return Bm()&&e.push(window.doNotTrack),Zm()&&e.push(navigator.doNotTrack,navigator.msDoNotTrack,navigator.globalPrivacyControl),e.some(t=>qI.indexOf(t)!==-1)}var gy="v15",Sy={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function DI(e=Sy.default,t=gy,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var VI="38824e1f-37f5-42d3-8372-a4b8fa9df946",tr=class{get defaultOptions(){return{endpoint:Sy.default,isCustomEndpoint:!1,token:"",version:gy,beforeSendHooks:[],afterSendHooks:[]}}get version(){return dy}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[RE,yE].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Fu()?this.runtime=new Au:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(ye.view,{newEventType:ye.view,addClientIdParameter:!0}),this.addEventTypeMapping(ye.click,{newEventType:ye.click,addClientIdParameter:!0}),this.addEventTypeMapping(ye.custom,{newEventType:ye.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ye.search,{newEventType:ye.search,addClientIdParameter:!0})}initRuntime(t){return Bm()&&aa()?new Jm(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(kI()&&console.warn(OI),new Xm(t))}get storage(){return this.runtime.storage}determineVisitorId(){return N(this,void 0,void 0,function*(){try{return Bm()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||fo()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),fo()}})}getCurrentVisitorId(){return N(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return N(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return N(this,void 0,void 0,function*(){if(hu(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Xh(t,Xh(r,VI)))}})}getParameters(t,...r){return N(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return N(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(fo()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(Fu())return null;try{let r=new URL(t).searchParams.get(dn.cvo_cid);if(r==null)return null;let n=dn.fromString(r);return!n||!aa()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return N(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:d=!1}=this.eventTypeMapping[t]||{};return yield[C=>n.length>0?this.parseVariableArgumentsPayload(n,C):C[0],C=>N(this,void 0,void 0,function*(){return Object.assign(Object.assign({},C),{visitorId:o?yield this.getCurrentVisitorId():""})}),C=>N(this,void 0,void 0,function*(){return d?Object.assign(Object.assign({},C),{clientId:yield this.getCurrentVisitorId()}):C}),C=>a?this.ensureAnonymousUserWhenUsingApiKey(C):C,C=>this.beforeSendHooks.reduce((F,w)=>N(this,void 0,void 0,function*(){let b=yield F;return yield w(t,b)}),C)].reduce((C,F)=>N(this,void 0,void 0,function*(){let w=yield C;return yield F(w)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return N(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[x=>this.setTrackingIdIfTrackingIdNotPresent(x),x=>this.removeEmptyPayloadValues(x,t),x=>this.validateParams(x,t),x=>n?AI(x):x,x=>n?this.removeUnknownParameters(x):x,x=>n?this.processCustomParameters(x):this.mapCustomParametersToCustomData(x)].reduce((x,A)=>N(this,void 0,void 0,function*(){let C=yield x;return yield A(C)}),Promise.resolve(r))})}makeEvent(t,...r){return N(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,o);return{eventType:n,payload:a,log:d=>N(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},a),d)}),yield Promise.all(this.afterSendHooks.map(p=>p(t,Object.assign(Object.assign({},o),d)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return N(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return N(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new Su().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(ye.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,n=_r(t,["searchQueryUid"]);return N(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(ye.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,n=_r(t,["searchQueryUid"]);return N(this,void 0,void 0,function*(){return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(ye.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,n=_r(t,["lastSearchQueryUid"]);return N(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return N(this,void 0,void 0,function*(){return this.makeEvent(ye.view,t)})}sendViewEvent(t){return N(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return N(this,void 0,void 0,function*(){let r=yield(yield S(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return N(this,void 0,void 0,function*(){return yield(yield S(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,a=r.length;o<a;o++){let d=r[o];if(typeof d=="string")n[t[o]]=d;else if(typeof d=="object")return Object.assign(Object.assign({},n),d)}return n}isKeyAllowedEmpty(t,r){return({[ye.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o<"u"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,a)=>Object.assign(Object.assign({},o),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(vI(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=_r(t,["custom"]),o={};r&&gu(r)&&(o=this.lowercaseKeys(r));let a=PI(n);return Object.assign(Object.assign({},o),a)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=_r(t,["custom"]);if(r&&gu(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},o),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(o=>{n[o.toLowerCase()]=t[o]}),n}validateParams(t,r){let{anonymizeIp:n}=t,o=_r(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==ye.view||r==ye.click||r==ye.search||r==ye.custom)&&(o.originLevel3=this.limit(o.originLevel3,1024)),r==ye.view&&(o.location=this.limit(o.location,1024)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=_r(t,["userId"]);return TI(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=_r(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&gu(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&gu(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t=="string"?LE(t,r):t}get baseUrl(){return DI(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},jr;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(jr||(jr={}));var L;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick"})(L||(L={}));var ay={[L.triggerNotify]:"queryPipelineTriggers",[L.triggerExecute]:"queryPipelineTriggers",[L.triggerQuery]:"queryPipelineTriggers",[L.triggerRedirect]:"queryPipelineTriggers",[L.queryError]:"errors",[L.queryErrorBack]:"errors",[L.queryErrorClear]:"errors",[L.queryErrorRetry]:"errors",[L.pagerNext]:"getMoreResults",[L.pagerPrevious]:"getMoreResults",[L.pagerNumber]:"getMoreResults",[L.pagerResize]:"getMoreResults",[L.pagerScrolling]:"getMoreResults",[L.facetSearch]:"facet",[L.facetShowLess]:"facet",[L.facetShowMore]:"facet",[L.recommendation]:"recommendation",[L.likeSmartSnippet]:"smartSnippet",[L.dislikeSmartSnippet]:"smartSnippet",[L.expandSmartSnippet]:"smartSnippet",[L.collapseSmartSnippet]:"smartSnippet",[L.openSmartSnippetFeedbackModal]:"smartSnippet",[L.closeSmartSnippetFeedbackModal]:"smartSnippet",[L.sendSmartSnippetReason]:"smartSnippet",[L.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[L.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[L.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[L.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[L.clearRecentQueries]:"recentQueries",[L.recentResultClick]:"recentlyClickedDocuments",[L.clearRecentResults]:"recentlyClickedDocuments",[L.showLessFoldedResults]:"folding",[L.caseDetach]:"case",[L.likeGeneratedAnswer]:"generatedAnswer",[L.dislikeGeneratedAnswer]:"generatedAnswer",[L.openGeneratedAnswerSource]:"generatedAnswer",[L.generatedAnswerStreamEnd]:"generatedAnswer",[L.generatedAnswerSourceHover]:"generatedAnswer",[L.generatedAnswerCopyToClipboard]:"generatedAnswer",[L.generatedAnswerHideAnswers]:"generatedAnswer",[L.generatedAnswerShowAnswers]:"generatedAnswer",[L.generatedAnswerExpand]:"generatedAnswer",[L.generatedAnswerCollapse]:"generatedAnswer",[L.generatedAnswerFeedbackSubmit]:"generatedAnswer",[L.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[jr.expandToFullUI]:"interface",[jr.openUserActions]:"User Actions",[jr.showPrecedingSessions]:"User Actions",[jr.showFollowingSessions]:"User Actions",[jr.clickViewedDocument]:"User Actions",[jr.clickPageView]:"User Actions",[jr.createArticle]:"createArticle"},ca=class{constructor(){this.runtime=new Au,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ye.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ye.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ye.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ye.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return dy}};function NI(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function MI(e){return e.map(t=>t.replace(/;/g,""))}function hy(e){let r=e.join(";");return r.length<=256?r:hy(e.slice(1))}var iy=e=>{let t=MI(e),r=NI(t);return hy(r)};function sy(e){let t=typeof e.partialQueries=="string"?e.partialQueries:iy(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:iy(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Ru=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||Fu();this.coveoAnalyticsClient=n?new ca:new tr(t)}disable(){this.coveoAnalyticsClient=new ca}enable(){this.coveoAnalyticsClient=new tr(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(L.interfaceLoad)}logInterfaceLoad(){return N(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(L.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return N(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(L.recommendation)}logRecommendation(){return N(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(L.recommendationOpen,t,r)}logRecommendationOpen(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(L.staticFilterClearAll,t)}logStaticFilterClearAll(t){return N(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(L.staticFilterSelect,t)}logStaticFilterSelect(t){return N(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(L.staticFilterDeselect,t)}logStaticFilterDeselect(t){return N(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(L.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return N(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(L.interfaceChange,t)}logInterfaceChange(t){return N(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(L.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return N(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(L.didyoumeanClick)}logDidYouMeanClick(){return N(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(L.resultsSort,t)}logResultsSort(t){return N(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(L.searchboxSubmit)}logSearchboxSubmit(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(L.searchboxClear)}logSearchboxClear(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(L.searchboxAsYouType)}logSearchboxAsYouType(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(L.breadcrumbFacet,t)}logBreadcrumbFacet(t){return N(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(L.breadcrumbResetAll)}logBreadcrumbResetAll(){return N(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(L.documentQuickview,t,r)}logDocumentQuickview(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(L.documentOpen,t,r)}logDocumentOpen(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(L.omniboxAnalytics,sy(t))}logOmniboxAnalytics(t){return N(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(L.omniboxFromLink,sy(t))}logOmniboxFromLink(t){return N(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(L.searchFromLink)}logSearchFromLink(){return N(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(L.triggerNotify,t)}logTriggerNotify(t){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(L.triggerExecute,t)}logTriggerExecute(t){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(L.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(L.undoTriggerQuery,t)}logUndoTriggerQuery(t){return N(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(L.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return N(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(L.pagerResize,t)}logPagerResize(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(L.pagerNumber,t)}logPagerNumber(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(L.pagerNext,t)}logPagerNext(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(L.pagerPrevious,t)}logPagerPrevious(t){return N(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(L.pagerScrolling)}logPagerScrolling(){return N(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(L.facetClearAll,t)}logFacetClearAll(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(L.facetSearch,t)}logFacetSearch(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(L.facetSelect,t)}logFacetSelect(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(L.facetDeselect,t)}logFacetDeselect(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(L.facetExclude,t)}logFacetExclude(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(L.facetUnexclude,t)}logFacetUnexclude(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(L.facetSelectAll,t)}logFacetSelectAll(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(L.facetUpdateSort,t)}logFacetUpdateSort(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(L.facetShowMore,t)}logFacetShowMore(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(L.facetShowLess,t)}logFacetShowLess(t){return N(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(L.queryError,t)}logQueryError(t){return N(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return N(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(L.queryErrorBack);return{description:t.description,log:()=>N(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(L.queryErrorBack)})}})}logQueryErrorBack(){return N(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return N(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(L.queryErrorRetry);return{description:t.description,log:()=>N(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(L.queryErrorRetry)})}})}logQueryErrorRetry(){return N(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return N(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(L.queryErrorClear);return{description:t.description,log:()=>N(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(L.queryErrorClear)})}})}logQueryErrorClear(){return N(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(L.likeSmartSnippet)}logLikeSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(L.dislikeSmartSnippet)}logDislikeSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(L.expandSmartSnippet)}logExpandSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(L.collapseSmartSnippet)}logCollapseSmartSnippet(){return N(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(L.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(L.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return N(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(L.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(L.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(L.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(L.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(L.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return N(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(L.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(L.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(L.copyToClipboard,t,r)}logCopyToClipboard(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(L.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(L.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(L.recentQueryClick)}logRecentQueryClick(){return N(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(L.clearRecentQueries)}logClearRecentQueries(){return N(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(L.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(L.clearRecentResults)}logClearRecentResults(){return N(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(L.noResultsBack)}logNoResultsBack(){return N(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(L.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(L.showLessFoldedResults)}logShowLessFoldedResults(){return N(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return{actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r,n=ay[t]){return N(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:n,eventValue:t}),d=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(d,t),log:({searchUID:p})=>d.log({lastSearchQueryUid:p})}})}logCustomEvent(t,r,n=ay[t]){return N(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return N(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:t}),d=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(d,t),log:({searchUID:p})=>d.log({lastSearchQueryUid:p})}})}logCustomEventWithType(t,r,n){return N(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return N(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(o,t),log:({searchUID:a})=>o.log({searchQueryUid:a})}})}makeClickEvent(t,r,n,o){return N(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),d=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(d,t),log:({searchUID:p})=>d.log({searchQueryUid:p})}})}logClickEvent(t,r,n,o){return N(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,n,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var n,o;return N(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return N(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof tr?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(L.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return N(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(L.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return N(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(L.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return N(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(L.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(L.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(L.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(L.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(L.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(L.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(L.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(L.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(L.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(L.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return N(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(L.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return N(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(L.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return N(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},bu=Object.assign({},Vs),cy=Object.keys(bu).map(e=>bu[e]),ia=class extends jm{constructor({client:t,uuidGenerator:r=fo}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>cy.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(cy.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(bu.pageview,{newEventType:ye.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(bu.event,{newEventType:ye.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),o),r)}getTicketPayload(){return jE(this.ticket)}};ia.Id="svc";var vu;(function(e){e.click="click",e.flowStart="flowStart"})(vu||(vu={}));var Pt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.documentSuggestionClick="documentSuggestionClick",e.documentSuggestionQuickview="documentSuggestionQuickview",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Pt||(Pt={}));var Pu;(function(e){e.quit="Quit",e.solved="Solved"})(Pu||(Pu={}));var wu=class{constructor(t,r){var n;this.options=t,this.provider=r;let o=((n=t.enableAnalytics)!==null&&n!==void 0?n:!0)&&!Fu();this.coveoAnalyticsClient=o?new tr(t):new ca,this.svc=new ia({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new ca,this.svc=new ia({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new tr(this.options),this.svc=new ia({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(Pt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(Pt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(Pt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.logClickEvent(Pt.documentSuggestionClick,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logQuickviewDocumentSuggestion(t){return this.logClickEvent(Pt.documentSuggestionQuickview,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logRateDocumentSuggestion(t){return this.svc.setAction(Pt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(Pt.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(Pt.caseCancelled,{reason:Pu.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(Pt.caseSolved,{reason:Pu.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(Pt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",vu.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",vu.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}getBaseEventRequest(t){var r,n;return N(this,void 0,void 0,function*(){let o=Object.assign({},t);return Object.assign(Object.assign({},this.getOrigins()),{customData:o,language:(r=this.provider)===null||r===void 0?void 0:r.getLanguage(),anonymous:(n=this.provider)===null||n===void 0?void 0:n.getIsAnonymous(),clientId:yield this.getClientId()})})}getClientId(){return this.coveoAnalyticsClient instanceof tr?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getOrigins(){var t,r,n,o,a;return{originContext:(r=(t=this.provider)===null||t===void 0?void 0:t.getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:(n=this.provider)===null||n===void 0?void 0:n.getOriginLevel1(),originLevel2:(o=this.provider)===null||o===void 0?void 0:o.getOriginLevel2(),originLevel3:(a=this.provider)===null||a===void 0?void 0:a.getOriginLevel3()}}logClickEvent(t,r,n,o){var a,d;return N(this,void 0,void 0,function*(){let p=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{searchQueryUid:(d=(a=this.provider)===null||a===void 0?void 0:a.getSearchUID())!==null&&d!==void 0?d:"",actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(p)})}};l();s();u();c();l();s();u();c();var pn=()=>"default";var LI=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},go=class{constructor(t){this.getState=t;Ae(this,"state");this.state=t()}getLanguage(){return LI(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},o={};for(let[a,d]of Object.entries(n)){let p=`context_${a}`;o[p]=d}return r.analytics.analyticsMode==="legacy"&&(o.coveoHeadlessVersion=un),o}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||pn()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};l();s();u();c();var yy=e=>new tr(e).getCurrentVisitorId(),Ls=(e,t)=>typeof t=="function"?(...r)=>{let n=Cs(r[0]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Qs=(e,t)=>(...r)=>{let n=Cs(r[1]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics hook. Returning original request."),n}};var Bs=class extends go{getSearchUID(){return this.state.documentSuggestion?.status.lastResponseId??""}},Cy=({logger:e,getState:t,analyticsClientMiddleware:r=(a,d)=>d,preprocessRequest:n,provider:o=new Bs(t)})=>{let a=t(),d=a.configuration.accessToken,p=a.configuration.analytics.apiBaseUrl??Ke(a.configuration.organizationId,a.configuration.environment,"analytics"),m=a.configuration.analytics.runtimeEnvironment,f=a.configuration.analytics.enabled,h=new wu({enableAnalytics:f,token:d,endpoint:p,runtimeEnvironment:m,preprocessRequest:Ls(e,n),beforeSendHooks:[Qs(e,r),(x,A)=>(e.info({...A,type:x,endpoint:p,token:d},"Analytics request"),A)]},o);return f||h.disable(),h};l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function ua(){return{desiredCount:5,numberOfValues:8,set:{}}}l();s();u();c();l();s();u();c();function QI(e,t){return!!t&&t.facetId in e.facetSet}var Ht=(e,t)=>e.search?.response.facets.find(r=>r.facetId===t),Eu=(e,t)=>e.facetSet[t]?.request,la=(e,t)=>{let r=Ht(e,t);return QI(e,r)?r:void 0},xy=(e,t)=>la(e,t)?.values.filter(r=>r.state==="selected")||[],Ay=(e,t)=>la(e,t)?.values.filter(r=>r.state!=="idle")||[],rr=e=>e.search.isLoading;l();s();u();c();function Fy(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(o=>o.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function dt(e){let{activeValue:t,ancestryMap:r}=BI(e);return t?UI(t,r):[]}function BI(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let o of n.children)r.set(o,n);t.unshift(...n.children)}return{}}function UI(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}function _I(e,t){return!!t&&t.facetId in e.categoryFacetSet}var rf=(e,t)=>{let r=Ht(e,t);if(_I(e,r))return r},nf=(e,t)=>e.categoryFacetSet[t]?.request,Ry=(e,t)=>{let r=rf(e,t);return dt(r?.values??[])},of=(e,t)=>{let r=nf(e,t);return dt(r?.currentValues??[])};l();s();u();c();function da(){return{}}l();s();u();c();function by(e){return{request:e}}function pa(){return{}}l();s();u();c();function vy(e){return{request:e}}function ma(){return{}}l();s();u();c();function Py(e){return{request:e,hasBreadcrumbs:!0}}function fa(){return{}}var ga=(e,t)=>{let r=Ty(t,e),n=r?r.field:"",o=sf(n,e);return{facetId:e,facetField:n,facetTitle:o}};function Sa(e,t){let{facetId:r,facetValue:n}=e,o=ga(r,t),a=Oy(t,r);return{...o,facetValue:a==="hierarchical"?Iy(t,r):n}}function Ct(e){return{facetSet:e.facetSet??fa(),categoryFacetSet:e.categoryFacetSet??da(),dateFacetSet:e.dateFacetSet??pa(),numericFacetSet:e.numericFacetSet??ma(),automaticFacetSet:e.automaticFacetSet??ua()}}var af=e=>{let t=[];return HI(e).forEach((r,n)=>{let o=Oy(e,r.facetId),a=YI(r,n+1);if($I(r)){if(!!!of(e,r.facetId).length)return;t.push({...a,...zI(e,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((d,p)=>{if(d.state==="idle")return;let m=wy(d,p+1,o),f=jI(r)?Ey(d):WI(d);t.push({...a,...m,...f})})}),GI(e).forEach((r,n)=>{let o=KI(r,n+1);r.values.forEach((a,d)=>{if(a.state==="idle")return;let p=wy(a,d+1,"specific"),m=Ey(a);t.push({...o,...p,...m})})}),t},jI=e=>e.type==="specific",$I=e=>e.type==="hierarchical",HI=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),GI=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),wy=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),WI=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Ey=e=>({displayValue:e.value,value:e.value}),Iy=(e,t)=>of(e,t).map(n=>n.value).join(";"),zI=(e,t)=>{let n=Iy(e,t);return{value:n,valuePosition:1,displayValue:n}},KI=(e,t)=>({title:sf(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),YI=(e,t)=>({title:sf(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),sf=(e,t)=>`${e}_${t}`,Ty=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Oy=(e,t)=>{let r=Ty(e,t);return r?r.type:"specific"};l();s();u();c();var Qe=()=>({q:"",enableQuerySyntax:!1});l();s();u();c();l();s();u();c();l();s();u();c();var Us=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Us||{}),So=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(So||{}),nr=e=>{if(zo(e))return e.map(t=>nr(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},ha=()=>({by:"relevancy"}),Iu=e=>({by:"date",order:e}),Tu=(e,t)=>({by:"field",order:t,field:e}),Ou=()=>({by:"qre"}),ku=()=>({by:"nosort"}),ky=new B({values:{by:new jt({enum:So,required:!0}),order:new jt({enum:Us}),field:new D}});function Et(){return nr(ha())}l();s();u();c();l();s();u();c();l();s();u();c();var ya=class e{static set(t,r,n){let o,a,d;n&&(a=new Date,a.setTime(a.getTime()+n));let p=window.location.hostname,m=/^(\d{1,3}\.){3}\d{1,3}$/,f=/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/;m.test(p)||f.test(p)||p.indexOf(".")===-1?cf(t,r,a):(d=p.split("."),o=d[d.length-2]+"."+d[d.length-1],cf(t,r,a,o))}static get(t){let r=t+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function cf(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}l();s();u();c();function JI(){return typeof navigator<"u"}function qy(){try{return typeof localStorage<"u"}catch{return!1}}function Dy(){try{return typeof sessionStorage<"u"}catch{return!1}}function Vy(){return!!(JI()&&navigator.cookieEnabled)}var Ny=null;function My(){return Ny||(qy()?localStorage:Vy()?new uf:Dy()?sessionStorage:new lf)}var Ca=class Ca{getItem(t){return ya.get(`${Ca.prefix}${t}`)}removeItem(t){ya.erase(`${Ca.prefix}${t}`)}setItem(t,r,n){ya.set(`${Ca.prefix}${t}`,r,n)}};Ae(Ca,"prefix","coveo_");var uf=Ca;var lf=class{getItem(t){return null}removeItem(t){}setItem(t,r){}};var qu="__coveo.analytics.history",XI=20,ZI=1e3*60,eT=75,ho=class ho{constructor(t){Ae(this,"store");this.store=t||My()}static getInstance(t){return ho.instance||(ho.instance=new ho(t)),ho.instance}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}async addElementAsync(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=await this.getHistoryWithInternalTimeAsync();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}async getHistoryAsync(){let t=await this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryWithInternalTime(){try{let t=this.store.getItem(qu);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}async getHistoryWithInternalTimeAsync(){try{let t=await this.store.getItem(qu);return t?JSON.parse(t):[]}catch{return[]}}setHistory(t){try{this.store.setItem(qu,JSON.stringify(t.slice(0,XI)))}catch{}}clear(){try{this.store.removeItem(qu)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,eT)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value===t.value?(t.internalTime||0)-(r.internalTime||0)>ZI:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};Ae(ho,"instance",null);var df=ho,It=df;var _s=class _s extends go{constructor(){super(...arguments);Ae(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return af(Ct(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||_s.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||St().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||_s.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),o=r.search?.response?.extendedResults?.generativeQuestionAnsweringId;return o&&(n.generativeQuestionAnsweringId=o),n}getFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetValue:n,facetTitle:`${a}_${r}`}}getFacetClearAllMetadata(r){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetTitle:`${o}_${r}`}}getFacetUpdateSortMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,criteria:n,facetTitle:`${a}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${a}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Et()}}getStaticFilterToggleMetadata(r,n){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:a,categoryFacetPath:n,categoryFacetTitle:`${a}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let o=this.state.querySuggest&&this.state.querySuggest[r],a=o.completions.map(f=>f.expression),d=o.partialQueries.length-1,p=o.partialQueries[d]||"",m=o.responseId;return{...this.getBaseMetadata(),suggestionRanking:a.indexOf(n),partialQuery:p,partialQueries:o.partialQueries.length>0?o.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:m}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Qe().q}get responseTime(){return this.state.search?.duration||St().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||St().response.totalCountFiltered}};Ae(_s,"fallbackPipelineName","default");var mn=_s,Ly=({logger:e,getState:t,analyticsClientMiddleware:r=(a,d)=>d,preprocessRequest:n,provider:o=new mn(t)})=>{let a=t(),d=a.configuration.accessToken,p=a.configuration.analytics.apiBaseUrl??Ke(a.configuration.organizationId,a.configuration.environment,"analytics"),m=a.configuration.analytics.runtimeEnvironment,f=a.configuration.analytics.enabled,h=new Ru({token:d,endpoint:p,runtimeEnvironment:m,preprocessRequest:Ls(e,n),beforeSendHooks:[Qs(e,r),(x,A)=>(e.info({...A,type:x,endpoint:p,token:d},"Analytics request"),A)]},o);return f||h.disable(),h},pf=()=>{let t=It.getInstance().getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};l();s();u();c();function Du(e){let t=Qy(e),r=[e,...t].filter(o=>o.parentResult).map(o=>o.parentResult);return ES([e,...t,...r],o=>o.uniqueId)}function Qy(e){return e.childResults?e.childResults.flatMap(t=>[t,...Qy(t)]):[]}l();s();u();c();var $r=()=>"";function By(e,t){return{...new mn(t).getBaseMetadata(),actionCause:e,type:e}}function tT(e){return Object.assign(e,{instantlyCallable:!0})}function rT(e,t){let r=a=>tT(ie(e,a)),n=r(async(a,{getState:d,extra:p})=>{let{analyticsClientMiddleware:m,preprocessRequest:f,logger:h}=p;return await(await t({getState:d,analyticsClientMiddleware:m,preprocessRequest:f,logger:h})).log({state:d(),extra:p})});return Object.assign(n,{prepare:async({getState:a,analyticsClientMiddleware:d,preprocessRequest:p,logger:m})=>{let{description:f,log:h}=await t({getState:a,analyticsClientMiddleware:d,preprocessRequest:p,logger:m});return{description:f,action:r(async(x,{getState:A,extra:C})=>await h({state:A(),extra:C}))}}}),n}var Uy=(e,t,r)=>{function n(...o){let a=o.length===1?{...o[0],__legacy__getBuilder:t(o[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:o[0],__legacy__getBuilder:t(o[1]),__legacy__provider:o[2],analyticsConfigurator:e,providerClass:r};return aT(a)}return n},nT=e=>e.configuration.analytics.analyticsMode==="legacy",oT=e=>e.configuration.analytics.analyticsMode==="next",aT=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:o,analyticsConfigurator:a,providerClass:d})=>(r??(r=p=>new d(p)),rT(e,async({getState:p,analyticsClientMiddleware:m,preprocessRequest:f,logger:h})=>{let x=[],A={log:async({state:R})=>{for(let E of x)await E(R)}},C=p(),F=a({getState:p,logger:h,analyticsClientMiddleware:m,preprocessRequest:f,provider:r(p)}),w=await t(F,p());A.description=w?.description,x.push(async R=>{nT(R)&&await iT(w,r,R,h,F.coveoAnalyticsClient)});let{emit:b}=oa(C);return x.push(async R=>{if(oT(R)&&o&&n){let E=n(R);await gT(b,o,E)}}),A}));async function iT(e,t,r,n,o){t(()=>r);let a=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:o,response:a},"Analytics response")}var sT=e=>r=>(n,o)=>Promise.resolve({description:{actionCause:e},log:async a=>{r(n,o)}}),K=Uy(Ly,e=>e,mn),TG=Uy(Cy,sT("caseAssist"),Bs);var Be=(e,t)=>{let r=a=>a+(t.pagination?.firstResult??0),n=-1,o=t.search?.results;return n=Hy(e,o),n<0&&(n=fT(e,o)),n<0&&(n=0),uT(e,r(n),t)};var _y=(e,t)=>({sourceName:cT(e),documentPosition:1,documentTitle:e.title,documentUri:e.uri,documentUrl:e.clickUri,queryPipeline:t.pipeline||$r()});function cT(e){let t=e.source;return ne(t)?"unknown":t}var jy=e=>({contentIdKey:"permanentid",contentIdValue:e.permanentid||""});function uT(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:pT(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:mT(e),queryPipeline:r.pipeline||$r()}}var we=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),$y={urihash:new D,sourcetype:new D,permanentid:new D},Vu={uniqueId:H,raw:new B({values:$y}),title:H,uri:H,clickUri:H,rankingModifier:new D({required:!1,emptyAllowed:!0})};function lT(e){return Object.assign({},...Object.keys($y).map(t=>({[t]:e[t]})))}function dT(e){return Object.assign({},...Object.keys(Vu).map(t=>({[t]:e[t]})),{raw:lT(e.raw)})}function pT(e){let t=e.raw.author;return ne(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function mT(e){let t=e.raw.source;return ne(t)?"unknown":t}var pt=e=>new ue(Vu).validate(dT(e));function fT(e,t){for(let[r,n]of t.entries()){let o=Du(n);if(Hy(e,o)!==-1)return r}return-1}function Hy(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function gT(e,t,r){await e(t,r)}l();s();u();c();var mf=e=>I(e,{evt:H,type:Ee}),Gy=e=>K("analytics/generic/search",t=>{mf(e);let{evt:r,meta:n}=e;return t.makeSearchEvent(r,n)}),Wy=e=>K("analytics/generic/click",(t,r)=>(pt(e.result),mf(e),t.makeClickEvent(e.evt,Be(e.result,r),we(e.result),e.meta))),zy=e=>K("analytics/generic/custom",t=>(mf(e),t.makeCustomEventWithType(e.evt,e.type,e.meta))),Nu=()=>K("analytics/interface/load",e=>e.makeInterfaceLoad()),fn=()=>K("analytics/interface/change",(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),Mu=()=>K("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),Lu=e=>K("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e)),Ky=()=>({actionCause:"interfaceLoad"}),xa=()=>({actionCause:"interfaceChange"}),Yy=()=>({actionCause:"searchFromLink"}),Jy=()=>({actionCause:"omniboxFromLink"});l();s();u();c();var ff=()=>Ee,Xy=()=>H,or=v("configuration/updateBasicConfiguration",e=>I(e,{accessToken:Ee,environment:new D({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:Ee})),Tt=v("configuration/updateSearchConfiguration",e=>I(e,{proxyBaseUrl:new D({required:!1,url:!0}),pipeline:new D({required:!1,emptyAllowed:!0}),searchHub:Ee,timezone:Ee,locale:Ee,authenticationProviders:new te({required:!1,each:H})})),ST={enabled:new oe({default:!0}),originContext:ff(),originLevel2:ff(),originLevel3:ff(),proxyBaseUrl:new D({required:!1,url:!0}),runtimeEnvironment:new ve,anonymous:new oe({default:!1}),deviceId:Ee,userDisplayName:Ee,documentLocation:Ee,trackingId:sh,analyticsMode:new D({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new B({options:{required:!1},values:Kh.reduce((e,t)=>(e[t]=ih,e),{})})},gn=v("configuration/updateAnalyticsConfiguration",e=>I(e,ST)),Aa=v("configuration/analytics/disable"),Fa=v("configuration/analytics/enable"),Qu=v("configuration/analytics/originlevel2",e=>I(e,{originLevel2:Xy()})),Bu=v("configuration/analytics/originlevel3",e=>I(e,{originLevel3:Xy()}));l();s();u();c();l();s();u();c();l();s();u();c();var Uu={q:new D,enableQuerySyntax:new oe,aq:new D,cq:new D,firstResult:new J({min:0}),numberOfResults:new J({min:0}),sortCriteria:new D,f:new B,fExcluded:new B,cf:new B,nf:new B,mnf:new B,df:new B,debug:new oe,sf:new B,tab:new D,af:new B};var Fe=v("searchParameters/restore",e=>I(e,Uu)),_u=v("searchParameters/restoreTab",e=>I(e,H));l();s();u();c();var Sn=v("debug/enable"),Ra=v("debug/disable");l();s();u();c();var hn=()=>!1;var ba=re(hn(),e=>{e.addCase(Sn,()=>!0).addCase(Ra,()=>!1).addCase(Fe,(t,r)=>r.payload.debug??t)});l();s();u();c();l();s();u();c();var gf=v("history/undo"),Sf=v("history/redo"),xt=v("history/snapshot"),js=ie("history/back",async(e,{dispatch:t})=>{t(gf()),await t(xe())}),ju=ie("history/forward",async(e,{dispatch:t})=>{t(Sf()),await t(xe())}),xe=ie("history/change",async(e,{getState:t})=>t().history.present);l();s();u();c();var va=v("pipeline/set",e=>I(e,new D({required:!0,emptyAllowed:!0})));var Pa=re($r(),e=>{e.addCase(va,(t,r)=>r.payload).addCase(xe.fulfilled,(t,r)=>r.payload?.pipeline??t).addCase(Tt,(t,r)=>r.payload.pipeline||t)});l();s();u();c();l();s();u();c();var wa=v("searchHub/set",e=>I(e,new D({required:!0,emptyAllowed:!0})));var Ea=re(pn(),e=>{e.addCase(wa,(t,r)=>r.payload).addCase(xe.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(Tt,(t,r)=>r.payload.searchHub||t)});l();s();u();c();l();s();u();c();var qe=v("breadcrumb/deselectAll"),yn=v("breadcrumb/deselectAllNonBreadcrumbs");l();s();u();c();var Ot=v("facet/updateFacetAutoSelection",e=>I(e,{allow:new oe({required:!0})}));l();s();u();c();l();s();u();c();var $s=class extends mn{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].cache[o];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Qe().q}get responseTime(){return this.activeInstantResultCache?.duration??St().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??St().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var Zy=e=>K({prefix:"analytics/instantResult/open",__legacy__getBuilder:(t,r)=>(pt(e),t.makeDocumentOpen(Be(e,r),we(e))),__legacy__provider:t=>new $s(t),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Be(e,t),n=we(e);return{responseId:e.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}}),eC=()=>K("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new $s(e)),tC=()=>({actionCause:"searchboxAsYouType"});l();s();u();c();var hf={id:H},hT={...hf,q:be},Ia=v("instantResults/register",e=>I(e,hf)),ar=v("instantResults/updateQuery",e=>I(e,hT)),Ta=v("instantResults/clearExpired",e=>I(e,hf));l();s();u();c();var $u=new J({required:!0,min:0}),Oa=v("pagination/registerNumberOfResults",e=>I(e,$u)),ka=v("pagination/updateNumberOfResults",e=>I(e,$u)),qa=v("pagination/registerPage",e=>I(e,$u)),kt=v("pagination/updatePage",e=>I(e,$u)),Da=v("pagination/nextPage"),Va=v("pagination/previousPage");l();s();u();c();var tt=v("query/updateQuery",e=>I(e,{q:new D,enableQuerySyntax:new oe}));l();s();u();c();l();s();u();c();var Cn=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:t.capture??t.clientId!=="",source:ln(e)}});var Na=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&Cn(e.configuration.analytics,t,r),...e.excerptLength&&!ne(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();l();s();u();c();var Ma=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await yy(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...pf()&&{pageId:pf()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:ln(e)}}}};var xn=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:It.getInstance().getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Ma(e.configuration.analytics,t),...e.excerptLength&&!ne(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();var Wt=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var yf=()=>K("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),An=e=>K("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Qe().q,aq:r.advancedSearchQueries?.aq||Wt().aq,cq:r.advancedSearchQueries?.cq||Wt().cq,dq:r.advancedSearchQueries?.dq||Wt().dq,errorType:e.type,errorMessage:e.message}));l();s();u();c();l();s();u();c();var Gs=_t(Hu(),1),iC=_t(rC(),1);l();s();u();c();var Gu=_t(Hu(),1),oC=_t(nC(),1);Gu.default.extend(oC.default);var La="YYYY/MM/DD@HH:mm:ss",yT="1401-01-01";function yo(e,t){let r=(0,Gu.default)(e,t);return!r.isValid()&&!t?(0,Gu.default)(e,La):r}function Hs(e){return e.format(La)}function aC(e){return Hs(yo(e))===e}function Wu(e,t){let r=yo(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?o:n}`)}vf(r)}function vf(e){if(e.isBefore(yT))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Gs.default.extend(iC.default);var sC=["past","now","next"],cC=["minute","hour","day","week","month","quarter","year"],CT=e=>{let t=e==="now";return{amount:new J({required:!t,min:1}),unit:new D({required:!t,constrainTo:cC}),period:new D({required:!0,constrainTo:sC})}};function Fn(e){if(typeof e=="string"&&!ir(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Pf(e):e;new ue(CT(t.period)).validate(t);let r=lC(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);vf(r)}function uC(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function lC(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Gs.default)().subtract(r,n);case"next":return(0,Gs.default)().add(r,n);case"now":return(0,Gs.default)()}}function Ws(e){return Hs(lC(Pf(e)))}function dC(e){return e.toLocaleLowerCase().split("-")}function ir(e){let[t,r,n]=dC(e);if(t==="now")return!0;if(!sC.includes(t)||!cC.includes(n))return!1;let o=parseInt(r);return!(isNaN(o)||o<=0)}function pC(e){return!!e&&typeof e=="object"&&"period"in e}function Pf(e){let[t,r,n]=dC(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function mC(e){return Fn(e),Pf(e)}l();s();u();c();function fC(e){return e.type==="dateRange"}function gC(e){return`start${e}`}function SC(e){return`end${e}`}var wf=()=>({dateFacetValueMap:{}});function xT(e,t,r){let n=e.start,o=e.end;return ir(n)&&(n=Ws(n),r.dateFacetValueMap[t][gC(n)]=e.start),ir(o)&&(o=Ws(o),r.dateFacetValueMap[t][SC(o)]=e.end),{...e,start:n,end:o}}function Ef(e,t){if(fC(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(o=>xT(o,r,t))}}return e}function Rn(e){let t=wf();return{request:{...e,facets:e.facets?.map(n=>Ef(n,t))},mappings:t}}function AT(e,t,r){return{...e,start:r.dateFacetValueMap[t][gC(e.start)]||e.start,end:r.dateFacetValueMap[t][SC(e.end)]||e.end}}function FT(e,t){return e.facetId in t.dateFacetValueMap}function RT(e,t){return FT(e,t)?{...e,values:e.values.map(r=>AT(r,e.facetId,t))}:e}function zu(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>RT(n,t))}}:e}l();s();u();c();l();s();u();c();var Qa=v("didYouMean/enable"),Ku=v("didYouMean/disable"),Ba=v("didYouMean/automaticCorrections/disable"),Yu=v("didYouMean/automaticCorrections/enable"),qt=v("didYouMean/correction",e=>I(e,H)),Co=v("didYouMean/automaticCorrections/mode",e=>I(e,new D({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));l();s();u();c();var Ju=()=>K("analytics/didyoumean/click",e=>e.makeDidYouMeanClick()),If=()=>K("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),hC=()=>({actionCause:"didYouMeanClick"}),yC=()=>({actionCause:"didYouMeanAutomatic"});l();s();u();c();l();s();u();c();function Xu(){return{contextValues:{}}}l();s();u();c();function Zu(){return{contextValues:{}}}l();s();u();c();function Tf(){return{enabled:!0,tabs:{}}}function el(){return{freezeFacetOrder:!1,facets:{}}}l();s();u();c();function Ua(){return[]}l();s();u();c();function Dt(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}l();s();u();c();function tl(){return{}}l();s();u();c();function rl(){return{}}l();s();u();c();function nl(){return{}}function CC(){return zt({})}function zt(e){return{context:e.context||Xu(),dictionaryFieldContext:e.dictionaryFieldContext||Zu(),facetSet:e.facetSet||fa(),numericFacetSet:e.numericFacetSet||ma(),dateFacetSet:e.dateFacetSet||pa(),categoryFacetSet:e.categoryFacetSet||da(),automaticFacetSet:e.automaticFacetSet??ua(),pagination:e.pagination||Dt(),query:e.query||Qe(),tabSet:e.tabSet||nl(),advancedSearchQueries:e.advancedSearchQueries||Wt(),staticFilterSet:e.staticFilterSet||rl(),querySet:e.querySet||tl(),sortCriteria:e.sortCriteria||Et(),pipeline:e.pipeline||$r(),searchHub:e.searchHub||pn(),facetOptions:e.facetOptions||el(),facetOrder:e.facetOrder??Ua(),debug:e.debug??hn()}}l();s();u();c();var bT=new B({values:{undoneQuery:be},options:{required:!0}}),ol=()=>K("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null),al=e=>K("analytics/trigger/query/undo",t=>(I(e,bT),t.makeUndoTriggerQuery(e))),il=()=>K("analytics/trigger/notify",(e,t)=>t.triggers?.notifications.length?e.makeTriggerNotify({notifications:t.triggers.notifications}):null),sl=()=>K("analytics/trigger/redirect",(e,t)=>t.triggers?.redirectTo?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null),cl=()=>K("analytics/trigger/execute",(e,t)=>t.triggers?.executions.length?e.makeTriggerExecute({executions:t.triggers.executions}):null);l();s();u();c();var bn=v("trigger/query/ignore",e=>I(e,new D({emptyAllowed:!0,required:!0}))),_a=v("trigger/query/modification",e=>I(e,new B({values:{originalQuery:Ee,modification:Ee}})));l();s();u();c();l();s();u();c();l();s();u();c();function vn(e){return Object.values(e).map(t=>t.request)}function zs(e,t){let r={};e.forEach(a=>r[a.facetId]=a);let n=[];t.forEach(a=>{a in r&&(n.push(r[a]),delete r[a])});let o=Object.values(r);return[...n,...o]}function xC(e){return vn(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}var Of={alphanumericDescending:{type:"alphanumeric",order:"descending"},alphanumericNaturalDescending:{type:"alphanumericNatural",order:"descending"}};function vT(e){return vn(e).map(t=>{let r=Of[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function PT(e){return[...vT(e.facetSet??{}),...xC(e.numericFacetSet??{}),...xC(e.dateFacetSet??{}),...vn(e.categoryFacetSet??{})]}function wT(e){return PT(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function ul(e){return zs(wT(e),e.facetOrder??[])}l();s();u();c();var Pn=async(e,t)=>{let r=TT(e),n=ul(e),o=ET(e),a=await xn(e,t),d=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Rn({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:d(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function ET(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(IT).filter(r=>r.currentValues.length>0):void 0}function IT(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function TT(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=OT(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}function OT(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o})}var wn=class{constructor(t,r=n=>{this.dispatch(tt({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=new Date().getTime(),a=zu(await this.extra.apiClient.search(r,n),t),d=new Date().getTime()-o,p=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:p,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return _e(t.response)?(this.dispatch(An(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:d,queryCorrections:p,queryCorrection:m}=n;if(!o||!a)return null;let f=d.length===0&&p&&p.length!==0,h=!ne(m)&&!ne(m.correctedQuery);if(!f&&!h)return null;let A=f?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(xt(zt(this.getState()))),A}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return _e(a.response)?(this.dispatch(An(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(xt(zt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:If()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o,analyticsAction:If()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(bn("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return _e(d.response)?(this.dispatch(An(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(xt(zt(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:ol()})}getStateAfterResponse(t,r,n,o){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Qe().enableQuerySyntax},search:{...St(),duration:r,response:o,results:o.results}}}processSuccessResponse(t){return this.dispatch(xt(zt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Xc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Pn(this.getState()),{origin:"mainSearch"});return this.dispatch(qt(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(_a({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Pn(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var f6=ie("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;I(e,{q:new D,enableQuerySyntax:new oe,clearFilters:new oe}),e.clearFilters&&(r(qe()),r(yn())),r(Ot({allow:!0})),r(tt({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(kt(1))}),ja=ie("search/executeSearch",async(e,t)=>{let r=t.getState();return await dl(r,t,e)}),$a=ie("search/fetchPage",async(e,t)=>{let r=t.getState();return await qf(r,t,e)}),Ha=ie("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Df(t,r)}),ll=ie("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await VT(t,e,r)}),AC=ie("search/fetchInstantResults",async(e,t)=>kf(e,t)),kT=async(e,t)=>{let r=await Pn(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},qT=async(e,t,r)=>{let n=await xn(e);return Rn({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},DT=async(e,t)=>{let r=await Pn(e,t);return r.request.numberOfResults=0,r},FC=e=>{e.configuration.analytics.enabled&&It.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function kf(e,t){I(e,{id:H,q:H,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J});let{q:r,maxResultsPerQuery:n}=e,o=t.getState(),a=new wn({...t,analyticsAction:eC()},f=>{t.dispatch(ar({q:f,id:e.id}))}),d=await qT(o,r,n),p=await a.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),m=await a.process(p);return"response"in m?{results:m.response.results,searchUid:m.response.searchUid,analyticsAction:m.analyticsAction,totalCountFiltered:m.response.totalCountFiltered,duration:m.duration}:m}async function qf(e,t,r){FC(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),p=new wn({...t,analyticsAction:r}),m=await Pn(e,d),f=await p.fetchFromAPI(m,{origin:"mainSearch"});return await p.process(f)}async function Df(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:o}=e.extra,{description:a}=await yf().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:o}),d=new wn({...e,analyticsAction:yf()}),p=await kT(t,a),m=await d.fetchFromAPI(p,{origin:"mainSearch"});return await d.process(m)}async function VT(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=e.extra,{description:d}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),p=new wn({...e,analyticsAction:t}),m=await DT(r,d),f=await p.fetchFromAPI(m,{origin:"facetValues"});return await p.process(f)}async function dl(e,t,r){FC(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:d}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),p=await Pn(e,d),m=new wn({...t,analyticsAction:r}),f=await m.fetchFromAPI(p,{origin:"mainSearch"});return await m.process(f)}l();s();u();c();l();s();u();c();l();s();u();c();var pl=le(e=>e.staticFilterSet,e=>Object.values(e||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o}));var Vt=async(e,t,r)=>{let n=_T(e),o=NT(e),a=MT(e),d=e.configuration.analytics.analyticsMode==="legacy"?await xn(e,r):Na(e,t,r),p=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Rn({...d,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...o.length&&{facets:o},...e.pagination&&{numberOfResults:p(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function NT(e){return zs(QT(e),e.facetOrder??[])}function MT(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(LT).filter(r=>r.currentValues.length>0):void 0}function LT(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function QT(e){return BT(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function BT(e){return[...UT(e.facetSet??{}),...RC(e.numericFacetSet??{}),...RC(e.dateFacetSet??{}),...vn(e.categoryFacetSet??{})]}function UT(e){return vn(e).map(t=>{let r=Of[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function RC(e){return vn(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}function _T(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=pl(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}var En=class{constructor(t,r=n=>{this.dispatch(tt({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=new Date().getTime(),a=zu(await this.extra.apiClient.search(r,n),t),d=new Date().getTime()-o,p=this.getState().query?.q||"";return{response:a,duration:d,queryExecuted:p,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return _e(t.response)?(this.dispatch(An(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:d,queryCorrections:p,queryCorrection:m}=n;if(!o||!a)return null;let f=d.length===0&&p&&p.length!==0,h=!ne(m)&&!ne(m.correctedQuery);if(!f&&!h)return null;let A=f?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(xt(zt(this.getState()))),A}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return _e(a.response)?(this.dispatch(An(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(xt(zt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(bn("")),null;let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return _e(d.response)?(this.dispatch(An(d.response.error)),this.rejectWithValue(d.response.error)):(this.dispatch(xt(zt(this.getState()))),{...d,response:{...d.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(t){return this.dispatch(xt(zt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return Xc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=yC(),o=await this.fetchFromAPI(await Vt(r,this.extra.navigatorContext,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(qt(t)),o}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(_a({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Vt(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var Ga=ie("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;I(e,{q:new D,enableQuerySyntax:new oe,clearFilters:new oe}),e.clearFilters&&(r(qe()),r(yn())),r(Ot({allow:!0})),r(tt({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(kt(1))}),G=ie("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return dl(r,t,e.legacy);bC(r);let n=e.next?vC(e.next):void 0,o=await Vt(r,t.extra.navigatorContext,n),a=new En({...t,analyticsAction:n??{}}),d=await a.fetchFromAPI(o,{origin:"mainSearch"});return await a.process(d)}),cr=ie("search/fetchPage",async(e,t)=>{let r=t.getState();if(bC(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return qf(r,t,e.legacy);let n=new En({...t,analyticsAction:e.next}),o=await Vt(r,t.extra.navigatorContext,e.next),a=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(a)}),In=ie("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Df(t,r);let n=By("browseResults",t.getState),o=new En({...t,analyticsAction:n}),a=await jT(r,t.extra.navigatorContext,n),d=await o.fetchFromAPI(a,{origin:"mainSearch"});return await o.process(d)}),ur=ie("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return dl(r,t,e.legacy);let n=new En({...t,analyticsAction:{}}),o=await HT(r,t.extra.navigatorContext),a=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(a)}),Wa=ie("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return kf(e,t);I(e,{id:H,q:H,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J});let{q:n,maxResultsPerQuery:o}=e,a=vC(tC()),d=await $T(r,t.extra.navigatorContext,n,o,a),p=new En({...t,analyticsAction:a},h=>{t.dispatch(ar({q:h,id:e.id}))}),m=await p.fetchFromAPI(d,{origin:"instantResults",disableAbortWarning:!0}),f=await p.process(m);return"response"in f?{results:f.response.results,searchUid:f.response.searchUid,totalCountFiltered:f.response.totalCountFiltered,duration:f.duration}:f}),jT=async(e,t,r)=>{let n=await Vt(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},$T=async(e,t,r,n,o)=>{let a=Na(e,t,o);return Rn({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},HT=async(e,t,r)=>{let n=await Vt(e,t,r);return n.request.numberOfResults=0,n},bC=e=>{e.configuration.analytics.enabled&&It.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},vC=e=>({actionCause:e.actionCause,type:e.actionCause});l();s();u();c();l();s();u();c();var Tn=(e,t)=>{let r=e;return ne(r[t])?ne(e.raw[t])?null:e.raw[t]:r[t]},GT=e=>t=>e.every(r=>!ne(Tn(t,r))),WT=e=>t=>e.every(r=>ne(Tn(t,r))),zT=(e,t)=>r=>{let n=PC(e,r);return t.some(o=>n.some(a=>`${a}`.toLowerCase()===o.toLowerCase()))},KT=(e,t)=>r=>{let n=PC(e,r);return t.every(o=>n.every(a=>`${a}`.toLowerCase()!==o.toLowerCase()))},PC=(e,t)=>{let r=Tn(t,e);return jc(r)?r:[r]},wC={getResultProperty:Tn,fieldsMustBeDefined:GT,fieldsMustNotBeDefined:WT,fieldMustMatch:zT,fieldMustNotMatch:KT};function Ks(e){return e.search.response.searchUid!==""}function EC(e,t,r){return e.search.results.find(n=>Tn(n,t)===r)}l();s();u();c();function Vf(e,t){let r=t.payload??null;r&&(e.response=St().response,e.results=[],e.questionAnswer=Xo()),e.error=r,e.isLoading=!1}function Mf(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function YT(e,t){Mf(e,t),e.results=t.payload.response.results.map(r=>({...r,searchUid:t.payload.response.searchUid})),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Nf(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var ce=re(St(),e=>{e.addCase(ja.rejected,(t,r)=>Vf(t,r)),e.addCase(Ha.rejected,(t,r)=>Vf(t,r)),e.addCase($a.rejected,(t,r)=>Vf(t,r)),e.addCase(ja.fulfilled,(t,r)=>{YT(t,r)}),e.addCase(Ha.fulfilled,(t,r)=>{Mf(t,r),t.results=[...t.results,...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase($a.fulfilled,(t,r)=>{Mf(t,r),t.results=[...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(ll.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(ja.pending,Nf),e.addCase(Ha.pending,Nf),e.addCase($a.pending,Nf)});l();s();u();c();l();s();u();c();l();s();u();c();var Lf=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),Ys=()=>({referrer:null,userAgent:null,location:null,clientId:""});l();s();u();c();var Qf=le(e=>e.advancedSearchQueries,e=>{if(!e)return{};let{aq:t,cq:r,dq:n,lq:o}=e;return{...t&&{aq:t},...r&&{cq:r},...n&&{dq:n},...o&&{lq:o}}});l();s();u();c();var IC=le(e=>e.context,e=>e);l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Js=le(e=>e.query,e=>e);var Nt=e=>XT(e)?{answerAPIEnabled:!0,id:Zs(e).data?.answerId}:JT(e)?{answerAPIEnabled:!1,id:e.search.response.extendedResults.generativeQuestionAnsweringId}:{answerAPIEnabled:!1,id:void 0},JT=e=>"search"in e,XT=e=>"answer"in e&&"generatedAnswer"in e&&!ne(e.generatedAnswer?.answerConfigurationId),TC=e=>e.generatedAnswer?.fieldsToIncludeInCitations,Xs=le(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t)),I8=le(e=>Js(e)?.q,e=>e.search.requestId,(e,t)=>({q:e,requestId:t}));var ml=e=>{if(e==="yes")return!0;if(e==="no")return!1},ZT=()=>K("analytics/generatedAnswer/retry",e=>e.makeRetryGeneratedAnswer()),eO=e=>K({prefix:"analytics/generatedAnswer/openAnswerSource",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:o}=Nt(r),a=Xs(r,e);return!n||!a?null:t.makeGeneratedAnswerCitationClick(_y(a,r),{...o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},citationId:a.id,documentId:jy(a)})},analyticsType:"Rga.CitationClick",analyticsPayloadBuilder:t=>{let r=Xs(t,e);return{answerId:t.search?.response.searchUid||"",citationId:e,itemMetadata:{uniqueFieldName:"permanentid",uniqueFieldValue:r?.permanentid??"",title:r?.title,url:r?.clickUri}}}}),tO=(e,t)=>K({prefix:"analytics/generatedAnswer/hoverCitation",__legacy__getBuilder:(r,n)=>{let{id:o,answerAPIEnabled:a}=Nt(n),d=Xs(n,e);return!o||!d?null:r.makeGeneratedAnswerSourceHover({...a?{answerAPIStreamId:o}:{generativeQuestionAnsweringId:o},permanentId:d.permanentid,citationId:d.id,citationHoverTimeMs:t})},analyticsType:"Rga.CitationHover",analyticsPayloadBuilder:r=>{let n=Xs(r,e);return{answerId:r.search?.response.searchUid||"",citationId:e,itemMetadata:{uniqueFieldName:"permanentid",uniqueFieldValue:n?.permanentid??"",title:n?.title,url:n?.clickUri},citationHoverTimeInMs:t}}}),rO=()=>K({prefix:"analytics/generatedAnswer/like",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Nt(t);return r?e.makeLikeGeneratedAnswer({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:e.search?.response.searchUid||"",action:"like"})}),nO=()=>K({prefix:"analytics/generatedAnswer/dislike",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Nt(t);return r?e.makeDislikeGeneratedAnswer({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:e.search?.response.searchUid||"",action:"dislike"})}),oO=e=>K({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:o}=Nt(r);return n?t.makeGeneratedAnswerFeedbackSubmitV2({...o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},...e}):null},analyticsType:"Rga.SubmitFeedback",analyticsPayloadBuilder:t=>{let{helpful:r,readable:n,documented:o,hallucinationFree:a,correctTopic:d,documentUrl:p,details:m}=e;return{answerId:t.search?.response.searchUid||"",helpful:r,details:{readable:ml(n),documented:ml(o),correctTopic:ml(d),hallucinationFree:ml(a)},additionalNotes:m,correctAnswerUrl:p}}}),ec=e=>K({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:o}=Nt(r),a=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({...o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},answerGenerated:e,answerTextIsEmpty:a}):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:t.search?.response.searchUid||"",answerGenerated:e??!1})}),aO=()=>K({prefix:"analytics/generatedAnswer/show",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Nt(t);return r?e.makeGeneratedAnswerShowAnswers({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:e.search?.response.searchUid||"",action:"show"})}),iO=()=>K({prefix:"analytics/generatedAnswer/hide",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Nt(t);return r?e.makeGeneratedAnswerHideAnswers({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:e.search?.response.searchUid||"",action:"hide"})}),sO=()=>K({prefix:"analytics/generatedAnswer/expand",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Nt(t);return r?e.makeGeneratedAnswerExpand({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:e.search?.response.searchUid||"",action:"expand"})}),cO=()=>K({prefix:"analytics/generatedAnswer/collapse",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Nt(t);return r?e.makeGeneratedAnswerCollapse({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:e.search?.response.searchUid||"",action:"collapse"})}),uO=()=>K({prefix:"analytics/generatedAnswer/copy",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Nt(t);return r?e.makeGeneratedAnswerCopyToClipboard({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Rga.AnswerAction",analyticsPayloadBuilder:e=>({answerId:e.search?.response.searchUid||"",action:"copyToClipboard"})});var tc={logCopyGeneratedAnswer:uO,logGeneratedAnswerHideAnswers:iO,logGeneratedAnswerShowAnswers:aO,logGeneratedAnswerStreamEnd:ec,logGeneratedAnswerFeedback:oO,logDislikeGeneratedAnswer:nO,logLikeGeneratedAnswer:rO,logHoverCitation:tO,logOpenGeneratedAnswerSource:eO,logRetryGeneratedAnswer:ZT,logGeneratedAnswerExpand:sO,logGeneratedAnswerCollapse:cO};l();s();u();c();var OC=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:Ke(e.configuration.organizationId,e.configuration.environment),streamId:e.search.extendedResults?.generativeQuestionAnsweringId});l();s();u();c();var kC=["text/plain","text/markdown"];var za=new D({required:!0}),qC=new D,Ka=new oe({required:!0}),lO={id:za,title:za,uri:za,permanentid:za,clickUri:qC},DC=new D({required:!0,constrainTo:kC}),Ya=v("generatedAnswer/setIsVisible",e=>I(e,Ka)),nc=v("generatedAnswer/setIsEnabled",e=>I(e,Ka)),oc=v("generatedAnswer/updateMessage",e=>I(e,{textDelta:za})),ac=v("generatedAnswer/updateCitations",e=>I(e,{citations:new te({required:!0,each:new B({values:lO})})})),Bf=v("generatedAnswer/updateError",e=>I(e,{message:qC,code:new J({min:0})})),lr=v("generatedAnswer/resetAnswer"),gl=v("generatedAnswer/like"),Sl=v("generatedAnswer/dislike"),hl=v("generatedAnswer/feedbackModal/open"),ic=v("generatedAnswer/expand"),yl=v("generatedAnswer/collapse"),Cl=v("generatedAnswer/setId",e=>I(e,{id:new D({required:!0})})),xl=v("generatedAnswer/feedbackModal/close"),Ja=v("generatedAnswer/sendFeedback"),rc=v("generatedAnswer/setIsLoading",e=>I(e,Ka)),fl=v("generatedAnswer/setIsStreaming",e=>I(e,Ka)),sc=v("generatedAnswer/setAnswerContentFormat",e=>I(e,DC)),Al=v("generatedAnswer/updateResponseFormat",e=>I(e,{contentFormat:new te({each:DC,default:["text/plain"]})})),Fl=v("knowledge/updateAnswerConfigurationId",e=>I(e,za)),Rl=v("generatedAnswer/registerFieldsToIncludeInCitations",e=>I(e,Zc)),Uf=v("generatedAnswer/setIsAnswerGenerated",e=>I(e,Ka)),xo=v("generatedAnswer/setCannotAnswer",e=>I(e,Ka)),VC=ie("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:o,getState:a}=t,{search:d}=a(),{queryExecuted:p}=d,{setAbortControllerRef:m}=e,f=await OC(r),h=(C,F)=>{switch(C){case"genqa.headerMessageType":{let w=JSON.parse(F);n(sc(w.contentFormat));break}case"genqa.messageType":n(oc(JSON.parse(F)));break;case"genqa.citationsType":n(ac(JSON.parse(F)));break;case"genqa.endOfStreamType":{let w=JSON.parse(F).answerGenerated,b=p.length!==0&&!w;n(xo(b)),n(fl(!1)),n(Uf(w)),n(ec(w));break}default:r.debug&&o.logger.warn(`Unknown payloadType: "${C}"`)}};n(rc(!0));let x=C=>C.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,A=o.streamingClient?.streamGeneratedAnswer(f,{write:C=>{x(f)&&(n(rc(!1)),C.payload&&C.payloadType&&h(C.payloadType,C.payload))},abort:C=>{x(f)&&n(Bf(C))},close:()=>{x(f)&&n(fl(!1))},resetAnswer:()=>{x(f)&&n(lr())}});A?m(A):n(rc(!1))});l();s();u();c();var NC=le(e=>e.pipeline,e=>e);l();s();u();c();var MC=le(e=>e.searchHub,e=>e);l();s();u();c();var st=le(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""}),LC=le(e=>e,e=>{let t=st(e);return t&&e?e[t].expression:""});l();s();u();c();l();s();u();c();function QC(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var BC=Zt;function XC(e,t){if(e===t||!(BC(e)&&BC(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),o=r.length===n.length,a=Array.isArray(t)?[]:{};for(let d of r)a[d]=XC(e[d],t[d]),o&&(o=e[d]===a[d]);return o?e:a}function Xa(e){let t=0;for(let r in e)t++;return t}var UC=e=>[].concat(...e);function dO(e){return new RegExp("(^|:)//").test(e)}function pO(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Pl(e){return e!=null}function mO(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var fO=e=>e.replace(/\/$/,""),gO=e=>e.replace(/^\//,"");function SO(e,t){if(!e)return t;if(!t)return e;if(dO(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=fO(e),t=gO(t),`${e}${r}${t}`}function hO(e,t,r){return e.has(t)?e.get(t):e.set(t,r).get(t)}var _C=(...e)=>S(...e),yO=e=>e.status>=200&&e.status<=299,CO=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function jC(e){if(!Zt(e))return e;let t={...e};for(let[r,n]of Object.entries(t))n===void 0&&delete t[r];return t}function ZC({baseUrl:e,prepareHeaders:t=x=>x,fetchFn:r=_C,paramsSerializer:n,isJsonContentType:o=CO,jsonContentType:a="application/json",jsonReplacer:d,timeout:p,responseHandler:m,validateStatus:f,...h}={}){return typeof S>"u"&&r===_C&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(A,C,F)=>{let{getState:w,extra:b,endpoint:R,forced:E,type:P}=C,T,{url:M,headers:q=new y(h.headers),params:O=void 0,responseHandler:k=m??"json",validateStatus:V=f??yO,timeout:Q=p,...Y}=typeof A=="string"?{url:A}:A,$,_=C.signal;Q&&($=new i.AbortController,C.signal.addEventListener("abort",$.abort),_=$.signal);let U={...h,signal:_,...Y};q=new y(jC(q)),U.headers=await t(q,{getState:w,arg:A,extra:b,endpoint:R,forced:E,type:P,extraOptions:F})||q;let z=pe=>typeof pe=="object"&&(Zt(pe)||Array.isArray(pe)||typeof pe.toJSON=="function");if(!U.headers.has("content-type")&&z(U.body)&&U.headers.set("content-type",a),z(U.body)&&o(U.headers)&&(U.body=JSON.stringify(U.body,d)),O){let pe=~M.indexOf("?")?"&":"?",he=n?n(O):new URLSearchParams(jC(O));M+=pe+he}M=SO(e,M);let j=new Request(M,U);T={request:new Request(M,U)};let Z,se=!1,ge=$&&setTimeout(()=>{se=!0,$.abort()},Q);try{Z=await r(j)}catch(pe){return{error:{status:se?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(pe)},meta:T}}finally{ge&&clearTimeout(ge),$?.signal.removeEventListener("abort",$.abort)}let Ce=Z.clone();T.response=Ce;let me,Se="";try{let pe;if(await Promise.all([x(Z,k).then(he=>me=he,he=>pe=he),Ce.text().then(he=>Se=he,()=>{})]),pe)throw pe}catch(pe){return{error:{status:"PARSING_ERROR",originalStatus:Z.status,data:Se,error:String(pe)},meta:T}}return V(Z,me)?{data:me,meta:T}:{error:{status:Z.status,data:me},meta:T}};async function x(A,C){if(typeof C=="function")return C(A);if(C==="content-type"&&(C=o(A.headers)?"json":"text"),C==="json"){let F=await A.text();return F.length?JSON.parse(F):null}return A.text()}}var Za=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function xO(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise(o=>setTimeout(a=>o(a),n))}function AO(e,t){throw Object.assign(new Za({error:e,meta:t}),{throwImmediately:!0})}var $C={},FO=(e,t)=>async(r,n,o)=>{let a=[5,(t||$C).maxRetries,(o||$C).maxRetries].filter(h=>h!==void 0),[d]=a.slice(-1),m={maxRetries:d,backoff:xO,retryCondition:(h,x,{attempt:A})=>A<=d,...t,...o},f=0;for(;;)try{let h=await e(r,n,o);if(h.error)throw new Za(h);return h}catch(h){if(f++,h.throwImmediately){if(h instanceof Za)return h.value;throw h}if(h instanceof Za&&!m.retryCondition(h.value.error,r,{attempt:f,baseQueryApi:n,extraOptions:o}))return h.value;await m.backoff(f,m.maxRetries)}},ex=Object.assign(FO,{fail:AO}),Gf=v("__rtkq/focused"),tx=v("__rtkq/unfocused"),Wf=v("__rtkq/online"),rx=v("__rtkq/offline");function zf(e){return e.type==="query"}function RO(e){return e.type==="mutation"}function Kf(e){return e.type==="infinitequery"}function Yf(e,t,r,n,o,a){return bO(e)?e(t,r,n,o).filter(Pl).map(jf).map(a):Array.isArray(e)?e.map(jf).map(a):[]}function bO(e){return typeof e=="function"}function jf(e){return typeof e=="string"?{type:e}:e}function vO(e,t){return e.catch(t)}var uc=Symbol("forceQueryFn"),$f=e=>typeof e[uc]=="function";function PO({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:n,api:o,context:a}){let d=new Map,p=new Map,{unsubscribeQueryResult:m,removeMutationResult:f,updateSubscriptionOptions:h}=o.internalActions;return{buildInitiateQuery:R,buildInitiateInfiniteQuery:E,buildInitiateMutation:P,getRunningQueryThunk:x,getRunningMutationThunk:A,getRunningQueriesThunk:C,getRunningMutationsThunk:F};function x(T,M){return q=>{let O=a.endpointDefinitions[T],k=e({queryArgs:M,endpointDefinition:O,endpointName:T});return d.get(q)?.[k]}}function A(T,M){return q=>p.get(q)?.[M]}function C(){return T=>Object.values(d.get(T)||{}).filter(Pl)}function F(){return T=>Object.values(p.get(T)||{}).filter(Pl)}function w(T){}function b(T,M){let q=(O,{subscribe:k=!0,forceRefetch:V,subscriptionOptions:Q,[uc]:Y,...$}={})=>(_,U)=>{let z=e({queryArgs:O,endpointDefinition:M,endpointName:T}),j,X={...$,type:"query",subscribe:k,forceRefetch:V,subscriptionOptions:Q,endpointName:T,originalArgs:O,queryCacheKey:z,[uc]:Y};if(zf(M))j=t(X);else{let{direction:Re,initialPageParam:Oe}=$;j=r({...X,direction:Re,initialPageParam:Oe})}let Z=o.endpoints[T].select(O),se=_(j),ge=Z(U());let{requestId:Ce,abort:me}=se,Se=ge.requestId!==Ce,pe=d.get(_)?.[z],he=()=>Z(U()),ke=Object.assign(Y?se.then(he):Se&&!pe?Promise.resolve(ge):Promise.all([pe,se]).then(he),{arg:O,requestId:Ce,subscriptionOptions:Q,queryCacheKey:z,abort:me,async unwrap(){let Re=await ke;if(Re.isError)throw Re.error;return Re.data},refetch:()=>_(q(O,{subscribe:!1,forceRefetch:!0})),unsubscribe(){k&&_(m({queryCacheKey:z,requestId:Ce}))},updateSubscriptionOptions(Re){ke.subscriptionOptions=Re,_(h({endpointName:T,requestId:Ce,queryCacheKey:z,options:Re}))}});if(!pe&&!Se&&!Y){let Re=hO(d,_,{});Re[z]=ke,ke.then(()=>{delete Re[z],Xa(Re)||d.delete(_)})}return ke};return q}function R(T,M){return b(T,M)}function E(T,M){return b(T,M)}function P(T){return(M,{track:q=!0,fixedCacheKey:O}={})=>(k,V)=>{let Q=n({type:"mutation",endpointName:T,originalArgs:M,track:q,fixedCacheKey:O}),Y=k(Q);let{requestId:$,abort:_,unwrap:U}=Y,z=vO(Y.unwrap().then(se=>({data:se})),se=>({error:se})),j=()=>{k(f({requestId:$,fixedCacheKey:O}))},X=Object.assign(z,{arg:Y.arg,requestId:$,abort:_,unwrap:U,reset:j}),Z=p.get(k)||{};return p.set(k,Z),Z[$]=X,X.then(()=>{delete Z[$],Xa(Z)||p.delete(k)}),O&&(Z[O]=X,X.then(()=>{Z[O]===X&&(delete Z[O],Xa(Z)||p.delete(k))})),X}}}function wO(e){return e}var bl=(e={})=>({...e,[ks]:!0});function EO({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:o,assertTagType:a,selectors:d}){let p=(k,V,Q,Y)=>($,_)=>{let U=r[k],z=n({queryArgs:V,endpointDefinition:U,endpointName:k});if($(o.internalActions.queryResultPatched({queryCacheKey:z,patches:Q})),!Y)return;let j=o.endpoints[k].select(V)(_()),X=Yf(U.providesTags,j.data,void 0,V,{},a);$(o.internalActions.updateProvidedBy({queryCacheKey:z,providedTags:X}))};function m(k,V,Q=0){let Y=[V,...k];return Q&&Y.length>Q?Y.slice(0,-1):Y}function f(k,V,Q=0){let Y=[...k,V];return Q&&Y.length>Q?Y.slice(1):Y}let h=(k,V,Q,Y=!0)=>($,_)=>{let z=o.endpoints[k].select(V)(_()),j={patches:[],inversePatches:[],undo:()=>$(o.util.patchQueryData(k,V,j.inversePatches,Y))};if(z.status==="uninitialized")return j;let X;if("data"in z)if(lt(z.data)){let[Z,se,ge]=iu(z.data,Q);j.patches.push(...se),j.inversePatches.push(...ge),X=Z}else X=Q(z.data),j.patches.push({op:"replace",path:[],value:X}),j.inversePatches.push({op:"replace",path:[],value:z.data});return j.patches.length===0||$(o.util.patchQueryData(k,V,j.patches,Y)),j},x=(k,V,Q)=>Y=>Y(o.endpoints[k].initiate(V,{subscribe:!1,forceRefetch:!0,[uc]:()=>({data:Q})})),A=(k,V)=>k.query&&k[V]?k[V]:wO,C=async(k,{signal:V,abort:Q,rejectWithValue:Y,fulfillWithValue:$,dispatch:_,getState:U,extra:z})=>{let j=r[k.endpointName];try{let X=A(j,"transformResponse"),Z={signal:V,abort:Q,dispatch:_,getState:U,extra:z,endpoint:k.endpointName,type:k.type,forced:k.type==="query"?F(k,U()):void 0,queryCacheKey:k.type==="query"?k.queryCacheKey:void 0},se=k.type==="query"?k[uc]:void 0,ge,Ce=async(Se,pe,he,ke)=>{if(pe==null&&Se.pages.length)return Promise.resolve({data:Se});let Re={queryArg:k.originalArgs,pageParam:pe},Oe=await me(Re),Ve=ke?m:f;return{data:{pages:Ve(Se.pages,Oe.data,he),pageParams:Ve(Se.pageParams,pe,he)}}};async function me(Se){let pe,{extraOptions:he}=j;if(se?pe=se():j.query?pe=await t(j.query(Se),Z,he):pe=await j.queryFn(Se,Z,he,Re=>t(Re,Z,he)),typeof process<"u",pe.error)throw new Za(pe.error,pe.meta);let ke=await X(pe.data,pe.meta,Se);return{...pe,data:ke}}if(k.type==="query"&&"infiniteQueryOptions"in j){let{infiniteQueryOptions:Se}=j,{maxPages:pe=1/0}=Se,he,ke={pages:[],pageParams:[]},Re=d.selectQueryEntry(U(),k.queryCacheKey)?.data,Ve=F(k,U())&&!k.direction||!Re?ke:Re;if("direction"in k&&k.direction&&Ve.pages.length){let ct=k.direction==="backward",rn=(ct?nx:Hf)(Se,Ve);he=await Ce(Ve,rn,pe,ct)}else{let{initialPageParam:ct=Se.initialPageParam}=k,Rt=Re?.pageParams??[],rn=Rt[0]??ct,jo=Rt.length;he=await Ce(Ve,rn,pe),se&&(he={data:he.data.pages[0]});for(let $o=1;$o<jo;$o++){let ps=Hf(Se,he.data);he=await Ce(he.data,ps,pe)}}ge=he}else ge=await me(k.originalArgs);return $(ge.data,bl({fulfilledTimeStamp:Date.now(),baseQueryMeta:ge.meta}))}catch(X){let Z=X;if(Z instanceof Za){let se=A(j,"transformErrorResponse");try{return Y(await se(Z.value,Z.meta,k.originalArgs),bl({baseQueryMeta:Z.meta}))}catch(ge){Z=ge}}throw typeof process<"u",console.error(Z),Z}};function F(k,V){let Q=d.selectQueryEntry(V,k.queryCacheKey),Y=d.selectConfig(V).refetchOnMountOrArgChange,$=Q?.fulfilledTimeStamp,_=k.forceRefetch??(k.subscribe&&Y);return _?_===!0||(Number(new Date)-Number($))/1e3>=_:!1}let w=()=>ie(`${e}/executeQuery`,C,{getPendingMeta({arg:V}){let Q=r[V.endpointName];return bl({startedTimeStamp:Date.now(),...Kf(Q)?{direction:V.direction}:{}})},condition(V,{getState:Q}){let Y=Q(),$=d.selectQueryEntry(Y,V.queryCacheKey),_=$?.fulfilledTimeStamp,U=V.originalArgs,z=$?.originalArgs,j=r[V.endpointName],X=V.direction;return $f(V)?!0:$?.status==="pending"?!1:F(V,Y)||zf(j)&&j?.forceRefetch?.({currentArg:U,previousArg:z,endpointState:$,state:Y})?!0:!(_&&!X)},dispatchConditionRejection:!0}),b=w(),R=w(),E=ie(`${e}/executeMutation`,C,{getPendingMeta(){return bl({startedTimeStamp:Date.now()})}}),P=k=>"force"in k,T=k=>"ifOlderThan"in k,M=(k,V,Q)=>(Y,$)=>{let _=P(Q)&&Q.force,U=T(Q)&&Q.ifOlderThan,z=(X=!0)=>{let Z={forceRefetch:X,isPrefetch:!0};return o.endpoints[k].initiate(V,Z)},j=o.endpoints[k].select(V)($());if(_)Y(z());else if(U){let X=j?.fulfilledTimeStamp;if(!X){Y(z());return}(Number(new Date)-Number(new Date(X)))/1e3>=U&&Y(z())}else Y(z(!1))};function q(k){return V=>V?.meta?.arg?.endpointName===k}function O(k,V){return{matchPending:ra(lu(k),q(V)),matchFulfilled:ra(Ur(k),q(V)),matchRejected:ra(po(k),q(V))}}return{queryThunk:b,mutationThunk:E,infiniteQueryThunk:R,prefetch:M,updateQueryData:h,upsertQueryData:x,patchQueryData:p,buildMatchThunkActions:O}}function Hf(e,{pages:t,pageParams:r}){let n=t.length-1;return e.getNextPageParam(t[n],t,r[n],r)}function nx(e,{pages:t,pageParams:r}){return e.getPreviousPageParam?.(t[0],t,r[0],r)}function ox(e,t,r,n){return Yf(r[e.meta.arg.endpointName][t],Ur(e)?e.payload:void 0,Ds(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function vl(e,t,r){let n=e[t];n&&r(n)}function lc(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function HC(e,t,r){let n=e[lc(t)];n&&r(n)}var cc={};function IO({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:n,context:{endpointDefinitions:o,apiUid:a,extractRehydrationInfo:d,hasRehydrationInfo:p},assertTagType:m,config:f}){let h=v(`${e}/resetApiState`);function x(q,O,k,V){var Q;q[Q=O.queryCacheKey]??(q[Q]={status:"uninitialized",endpointName:O.endpointName}),vl(q,O.queryCacheKey,Y=>{Y.status="pending",Y.requestId=k&&Y.requestId?Y.requestId:V.requestId,O.originalArgs!==void 0&&(Y.originalArgs=O.originalArgs),Y.startedTimeStamp=V.startedTimeStamp;let $=o[V.arg.endpointName];Kf($)&&"direction"in O&&(Y.direction=O.direction)})}function A(q,O,k,V){vl(q,O.arg.queryCacheKey,Q=>{if(Q.requestId!==O.requestId&&!V)return;let{merge:Y}=o[O.arg.endpointName];if(Q.status="fulfilled",Y)if(Q.data!==void 0){let{fulfilledTimeStamp:$,arg:_,baseQueryMeta:U,requestId:z}=O,j=Br(Q.data,X=>Y(X,k,{arg:_.originalArgs,baseQueryMeta:U,fulfilledTimeStamp:$,requestId:z}));Q.data=j}else Q.data=k;else Q.data=o[O.arg.endpointName].structuralSharing??!0?XC(ht(Q.data)?wm(Q.data):Q.data,k):k;delete Q.error,Q.fulfilledTimeStamp=O.fulfilledTimeStamp})}let C=mo({name:`${e}/queries`,initialState:cc,reducers:{removeQueryResult:{reducer(q,{payload:{queryCacheKey:O}}){delete q[O]},prepare:na()},cacheEntriesUpserted:{reducer(q,O){for(let k of O.payload){let{queryDescription:V,value:Q}=k;x(q,V,!0,{arg:V,requestId:O.meta.requestId,startedTimeStamp:O.meta.timestamp}),A(q,{arg:V,requestId:O.meta.requestId,fulfilledTimeStamp:O.meta.timestamp,baseQueryMeta:{}},Q,!0)}},prepare:q=>({payload:q.map(V=>{let{endpointName:Q,arg:Y,value:$}=V,_=o[Q];return{queryDescription:{type:"query",endpointName:Q,originalArgs:V.arg,queryCacheKey:n({queryArgs:Y,endpointDefinition:_,endpointName:Q})},value:$}}),meta:{[ks]:!0,requestId:pu(),timestamp:Date.now()}})},queryResultPatched:{reducer(q,{payload:{queryCacheKey:O,patches:k}}){vl(q,O,V=>{V.data=Im(V.data,k.concat())})},prepare:na()}},extraReducers(q){q.addCase(t.pending,(O,{meta:k,meta:{arg:V}})=>{let Q=$f(V);x(O,V,Q,k)}).addCase(t.fulfilled,(O,{meta:k,payload:V})=>{let Q=$f(k.arg);A(O,k,V,Q)}).addCase(t.rejected,(O,{meta:{condition:k,arg:V,requestId:Q},error:Y,payload:$})=>{vl(O,V.queryCacheKey,_=>{if(!k){if(_.requestId!==Q)return;_.status="rejected",_.error=$??Y}})}).addMatcher(p,(O,k)=>{let{queries:V}=d(k);for(let[Q,Y]of Object.entries(V))(Y?.status==="fulfilled"||Y?.status==="rejected")&&(O[Q]=Y)})}}),F=mo({name:`${e}/mutations`,initialState:cc,reducers:{removeMutationResult:{reducer(q,{payload:O}){let k=lc(O);k in q&&delete q[k]},prepare:na()}},extraReducers(q){q.addCase(r.pending,(O,{meta:k,meta:{requestId:V,arg:Q,startedTimeStamp:Y}})=>{Q.track&&(O[lc(k)]={requestId:V,status:"pending",endpointName:Q.endpointName,startedTimeStamp:Y})}).addCase(r.fulfilled,(O,{payload:k,meta:V})=>{V.arg.track&&HC(O,V,Q=>{Q.requestId===V.requestId&&(Q.status="fulfilled",Q.data=k,Q.fulfilledTimeStamp=V.fulfilledTimeStamp)})}).addCase(r.rejected,(O,{payload:k,error:V,meta:Q})=>{Q.arg.track&&HC(O,Q,Y=>{Y.requestId===Q.requestId&&(Y.status="rejected",Y.error=k??V)})}).addMatcher(p,(O,k)=>{let{mutations:V}=d(k);for(let[Q,Y]of Object.entries(V))(Y?.status==="fulfilled"||Y?.status==="rejected")&&Q!==Y?.requestId&&(O[Q]=Y)})}}),w=mo({name:`${e}/invalidation`,initialState:cc,reducers:{updateProvidedBy:{reducer(q,O){var Q,Y;let{queryCacheKey:k,providedTags:V}=O.payload;for(let $ of Object.values(q))for(let _ of Object.values($)){let U=_.indexOf(k);U!==-1&&_.splice(U,1)}for(let{type:$,id:_}of V){let U=(Q=q[$]??(q[$]={}))[Y=_||"__internal_without_id"]??(Q[Y]=[]);U.includes(k)||U.push(k)}},prepare:na()}},extraReducers(q){q.addCase(C.actions.removeQueryResult,(O,{payload:{queryCacheKey:k}})=>{for(let V of Object.values(O))for(let Q of Object.values(V)){let Y=Q.indexOf(k);Y!==-1&&Q.splice(Y,1)}}).addMatcher(p,(O,k)=>{var Q,Y;let{provided:V}=d(k);for(let[$,_]of Object.entries(V))for(let[U,z]of Object.entries(_)){let j=(Q=O[$]??(O[$]={}))[Y=U||"__internal_without_id"]??(Q[Y]=[]);for(let X of z)j.includes(X)||j.push(X)}}).addMatcher(er(Ur(t),Ds(t)),(O,k)=>{let V=ox(k,"providesTags",o,m),{queryCacheKey:Q}=k.meta.arg;w.caseReducers.updateProvidedBy(O,w.actions.updateProvidedBy({queryCacheKey:Q,providedTags:V}))})}}),b=mo({name:`${e}/subscriptions`,initialState:cc,reducers:{updateSubscriptionOptions(q,O){},unsubscribeQueryResult(q,O){},internal_getRTKQSubscriptions(){}}}),R=mo({name:`${e}/internalSubscriptions`,initialState:cc,reducers:{subscriptionsUpdated:{reducer(q,O){return Im(q,O.payload)},prepare:na()}}}),E=mo({name:`${e}/config`,initialState:{online:mO(),focused:pO(),middlewareRegistered:!1,...f},reducers:{middlewareRegistered(q,{payload:O}){q.middlewareRegistered=q.middlewareRegistered==="conflict"||a!==O?"conflict":!0}},extraReducers:q=>{q.addCase(Wf,O=>{O.online=!0}).addCase(rx,O=>{O.online=!1}).addCase(Gf,O=>{O.focused=!0}).addCase(tx,O=>{O.focused=!1}).addMatcher(p,O=>({...O}))}}),P=Zo({queries:C.reducer,mutations:F.reducer,provided:w.reducer,subscriptions:R.reducer,config:E.reducer}),T=(q,O)=>P(h.match(O)?void 0:q,O),M={...E.actions,...C.actions,...b.actions,...R.actions,...F.actions,...w.actions,resetApiState:h};return{reducer:T,actions:M}}var _f=Symbol.for("RTKQ/skipToken"),ax={status:"uninitialized"},GC=Br(ax,()=>{}),WC=Br(ax,()=>{});function TO({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=P=>GC,o=P=>WC;return{buildQuerySelector:A,buildInfiniteQuerySelector:C,buildMutationSelector:F,selectInvalidatedBy:w,selectCachedArgsForQuery:b,selectApiState:d,selectQueries:p,selectMutations:f,selectQueryEntry:m,selectConfig:h};function a(P){return{...P,...QC(P.status)}}function d(P){return P[t]}function p(P){return d(P)?.queries}function m(P,T){return p(P)?.[T]}function f(P){return d(P)?.mutations}function h(P){return d(P)?.config}function x(P,T,M){return q=>{if(q===_f)return r(n,M);let O=e({queryArgs:q,endpointDefinition:T,endpointName:P});return r(V=>m(V,O)??GC,M)}}function A(P,T){return x(P,T,a)}function C(P,T){let{infiniteQueryOptions:M}=T;function q(O){let k={...O,...QC(O.status)},{isLoading:V,isError:Q,direction:Y}=k,$=Y==="forward",_=Y==="backward";return{...k,hasNextPage:R(M,k.data),hasPreviousPage:E(M,k.data),isFetchingNextPage:V&&$,isFetchingPreviousPage:V&&_,isFetchNextPageError:Q&&$,isFetchPreviousPageError:Q&&_}}return x(P,T,q)}function F(){return P=>{let T;return typeof P=="object"?T=lc(P)??_f:T=P,r(T===_f?o:O=>d(O)?.mutations?.[T]??WC,a)}}function w(P,T){let M=P[t],q=new Set;for(let O of T.filter(Pl).map(jf)){let k=M.provided[O.type];if(!k)continue;let V=(O.id!==void 0?k[O.id]:UC(Object.values(k)))??[];for(let Q of V)q.add(Q)}return UC(Array.from(q.values()).map(O=>{let k=M.queries[O];return k?[{queryCacheKey:O,endpointName:k.endpointName,originalArgs:k.originalArgs}]:[]}))}function b(P,T){return Object.values(p(P)).filter(M=>M?.endpointName===T&&M.status!=="uninitialized").map(M=>M.originalArgs)}function R(P,T){return T?Hf(P,T)!=null:!1}function E(P,T){return!T||!P.getPreviousPageParam?!1:nx(P,T)!=null}}var zC=WeakMap?new WeakMap:void 0,KC=({endpointName:e,queryArgs:t})=>{let r="",n=zC?.get(t);if(typeof n=="string")r=n;else{let o=JSON.stringify(t,(a,d)=>(d=typeof d=="bigint"?{$bigint:d.toString()}:d,d=Zt(d)?Object.keys(d).sort().reduce((p,m)=>(p[m]=d[m],p),{}):d,d));Zt(t)&&zC?.set(t,o),r=o}return`${e}(${r})`};function OO(...e){return function(r){let n=ta(f=>r.extractRehydrationInfo?.(f,{reducerPath:r.reducerPath??"api"})),o={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(f){let h=KC;if("serializeQueryArgs"in f.endpointDefinition){let x=f.endpointDefinition.serializeQueryArgs;h=A=>{let C=x(A);return typeof C=="string"?C:KC({...A,queryArgs:C})}}else r.serializeQueryArgs&&(h=r.serializeQueryArgs);return h(f)},tagTypes:[...r.tagTypes||[]]},a={endpointDefinitions:{},batch(f){f()},apiUid:pu(),extractRehydrationInfo:n,hasRehydrationInfo:ta(f=>n(f)!=null)},d={injectEndpoints:m,enhanceEndpoints({addTagTypes:f,endpoints:h}){if(f)for(let x of f)o.tagTypes.includes(x)||o.tagTypes.push(x);if(h)for(let[x,A]of Object.entries(h))typeof A=="function"?A(a.endpointDefinitions[x]):Object.assign(a.endpointDefinitions[x]||{},A);return d}},p=e.map(f=>f.init(d,o,a));function m(f){let h=f.endpoints({query:x=>({...x,type:"query"}),mutation:x=>({...x,type:"mutation"}),infiniteQuery:x=>({...x,type:"infinitequery"})});for(let[x,A]of Object.entries(h)){if(f.overrideExisting!==!0&&x in a.endpointDefinitions){if(f.overrideExisting==="throw")throw new Error($t(39));typeof process<"u";continue}typeof process<"u",a.endpointDefinitions[x]=A;for(let C of p)C.injectEndpoint(x,A)}return d}return d.injectEndpoints({endpoints:r.endpoints})}}function Hr(e,...t){return Object.assign(e,...t)}var kO=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,o=null,a=null,{updateSubscriptionOptions:d,unsubscribeQueryResult:p}=e.internalActions,m=(C,F)=>{var b,R;if(d.match(F)){let{queryCacheKey:E,requestId:P,options:T}=F.payload;return C?.[E]?.[P]&&(C[E][P]=T),!0}if(p.match(F)){let{queryCacheKey:E,requestId:P}=F.payload;return C[E]&&delete C[E][P],!0}if(e.internalActions.removeQueryResult.match(F))return delete C[F.payload.queryCacheKey],!0;if(t.pending.match(F)){let{meta:{arg:E,requestId:P}}=F,T=C[b=E.queryCacheKey]??(C[b]={});return T[`${P}_running`]={},E.subscribe&&(T[P]=E.subscriptionOptions??T[P]??{}),!0}let w=!1;if(t.fulfilled.match(F)||t.rejected.match(F)){let E=C[F.meta.arg.queryCacheKey]||{},P=`${F.meta.requestId}_running`;w||(w=!!E[P]),delete E[P]}if(t.rejected.match(F)){let{meta:{condition:E,arg:P,requestId:T}}=F;if(E&&P.subscribe){let M=C[R=P.queryCacheKey]??(C[R]={});M[T]=P.subscriptionOptions??M[T]??{},w=!0}}return w},f=()=>r.currentSubscriptions,A={getSubscriptions:f,getSubscriptionCount:C=>{let w=f()[C]??{};return Xa(w)},isRequestSubscribed:(C,F)=>!!f()?.[C]?.[F]};return(C,F)=>{if(o||(o=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(C))return o=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(C))return[!1,A];let w=m(r.currentSubscriptions,C),b=!0;if(w){a||(a=setTimeout(()=>{let P=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,T]=iu(o,()=>P);F.next(e.internalActions.subscriptionsUpdated(T)),o=P,a=null},500));let R=typeof C.type=="string"&&!!C.type.startsWith(n),E=t.rejected.match(C)&&C.meta.condition&&!!C.meta.arg.subscribe;b=!R&&!E}return[b,!1]}};function qO(e){for(let t in e)return!1;return!0}var DO=2147483647/1e3-1,VO=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:o,selectors:{selectQueryEntry:a,selectConfig:d}})=>{let{removeQueryResult:p,unsubscribeQueryResult:m,cacheEntriesUpserted:f}=t.internalActions,h=er(m.match,r.fulfilled,r.rejected,f.match);function x(b){let R=o.currentSubscriptions[b];return!!R&&!qO(R)}let A={},C=(b,R,E)=>{let P=R.getState(),T=d(P);if(h(b)){let M;if(f.match(b))M=b.payload.map(q=>q.queryDescription.queryCacheKey);else{let{queryCacheKey:q}=m.match(b)?b.payload:b.meta.arg;M=[q]}F(M,R,T)}if(t.util.resetApiState.match(b))for(let[M,q]of Object.entries(A))q&&clearTimeout(q),delete A[M];if(n.hasRehydrationInfo(b)){let{queries:M}=n.extractRehydrationInfo(b);F(Object.keys(M),R,T)}};function F(b,R,E){let P=R.getState();for(let T of b){let M=a(P,T);w(T,M?.endpointName,R,E)}}function w(b,R,E,P){let M=n.endpointDefinitions[R]?.keepUnusedDataFor??P.keepUnusedDataFor;if(M===1/0)return;let q=Math.max(0,Math.min(M,DO));if(!x(b)){let O=A[b];O&&clearTimeout(O),A[b]=setTimeout(()=>{x(b)||E.dispatch(p({queryCacheKey:b})),delete A[b]},q*1e3)}}return C},YC=new Error("Promise never resolved before cacheEntryRemoved."),NO=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:o,internalState:a,selectors:{selectQueryEntry:d,selectApiState:p}})=>{let m=du(n),f=du(o),h=Ur(n,o),x={};function A(R,E,P){let T=x[R];T?.valueResolved&&(T.valueResolved({data:E,meta:P}),delete T.valueResolved)}function C(R){let E=x[R];E&&(delete x[R],E.cacheEntryRemoved())}let F=(R,E,P)=>{let T=w(R);function M(q,O,k,V){let Q=d(P,O),Y=d(E.getState(),O);!Q&&Y&&b(q,V,O,E,k)}if(n.pending.match(R))M(R.meta.arg.endpointName,T,R.meta.requestId,R.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(R))for(let{queryDescription:q,value:O}of R.payload){let{endpointName:k,originalArgs:V,queryCacheKey:Q}=q;M(k,Q,R.meta.requestId,V),A(Q,O,{})}else if(o.pending.match(R))E.getState()[t].mutations[T]&&b(R.meta.arg.endpointName,R.meta.arg.originalArgs,T,E,R.meta.requestId);else if(h(R))A(T,R.payload,R.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(R)||e.internalActions.removeMutationResult.match(R))C(T);else if(e.util.resetApiState.match(R))for(let q of Object.keys(x))C(q)};function w(R){return m(R)?R.meta.arg.queryCacheKey:f(R)?R.meta.arg.fixedCacheKey??R.meta.requestId:e.internalActions.removeQueryResult.match(R)?R.payload.queryCacheKey:e.internalActions.removeMutationResult.match(R)?lc(R.payload):""}function b(R,E,P,T,M){let q=r.endpointDefinitions[R],O=q?.onCacheEntryAdded;if(!O)return;let k={},V=new Promise(z=>{k.cacheEntryRemoved=z}),Q=Promise.race([new Promise(z=>{k.valueResolved=z}),V.then(()=>{throw YC})]);Q.catch(()=>{}),x[P]=k;let Y=e.endpoints[R].select(q.type==="query"?E:P),$=T.dispatch((z,j,X)=>X),_={...T,getCacheEntry:()=>Y(T.getState()),requestId:M,extra:$,updateCachedData:q.type==="query"?z=>T.dispatch(e.util.updateQueryData(R,E,z)):void 0,cacheDataLoaded:Q,cacheEntryRemoved:V},U=O(E,_);Promise.resolve(U).catch(z=>{if(z!==YC)throw z})}return F},MO=({api:e,context:{apiUid:t},reducerPath:r})=>(n,o)=>{e.util.resetApiState.match(n)&&o.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},LO=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:o,api:a,assertTagType:d,refetchQuery:p,internalState:m})=>{let{removeQueryResult:f}=a.internalActions,h=er(Ur(n),Ds(n)),x=er(Ur(n,o),po(n,o)),A=[],C=(b,R)=>{h(b)?w(ox(b,"invalidatesTags",r,d),R):x(b)?w([],R):a.util.invalidateTags.match(b)&&w(Yf(b.payload,void 0,void 0,void 0,void 0,d),R)};function F(b){let{queries:R,mutations:E}=b;for(let P of[R,E])for(let T in P)if(P[T]?.status==="pending")return!0;return!1}function w(b,R){let E=R.getState(),P=E[e];if(A.push(...b),P.config.invalidationBehavior==="delayed"&&F(P))return;let T=A;if(A=[],T.length===0)return;let M=a.util.selectInvalidatedBy(E,T);t.batch(()=>{let q=Array.from(M.values());for(let{queryCacheKey:O}of q){let k=P.queries[O],V=m.currentSubscriptions[O]??{};k&&(Xa(V)===0?R.dispatch(f({queryCacheKey:O})):k.status!=="uninitialized"&&R.dispatch(p(k)))}})}return C},QO=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:o})=>{let a={},d=(C,F)=>{(r.internalActions.updateSubscriptionOptions.match(C)||r.internalActions.unsubscribeQueryResult.match(C))&&f(C.payload,F),(t.pending.match(C)||t.rejected.match(C)&&C.meta.condition)&&f(C.meta.arg,F),(t.fulfilled.match(C)||t.rejected.match(C)&&!C.meta.condition)&&m(C.meta.arg,F),r.util.resetApiState.match(C)&&x()};function p(C,F){let b=F.getState()[e].queries[C],R=o.currentSubscriptions[C];if(!(!b||b.status==="uninitialized"))return R}function m({queryCacheKey:C},F){let w=F.getState()[e],b=w.queries[C],R=o.currentSubscriptions[C];if(!b||b.status==="uninitialized")return;let{lowestPollingInterval:E,skipPollingIfUnfocused:P}=A(R);if(!Number.isFinite(E))return;let T=a[C];T?.timeout&&(clearTimeout(T.timeout),T.timeout=void 0);let M=Date.now()+E;a[C]={nextPollTimestamp:M,pollingInterval:E,timeout:setTimeout(()=>{(w.config.focused||!P)&&F.dispatch(n(b)),m({queryCacheKey:C},F)},E)}}function f({queryCacheKey:C},F){let b=F.getState()[e].queries[C],R=o.currentSubscriptions[C];if(!b||b.status==="uninitialized")return;let{lowestPollingInterval:E}=A(R);if(!Number.isFinite(E)){h(C);return}let P=a[C],T=Date.now()+E;(!P||T<P.nextPollTimestamp)&&m({queryCacheKey:C},F)}function h(C){let F=a[C];F?.timeout&&clearTimeout(F.timeout),delete a[C]}function x(){for(let C of Object.keys(a))h(C)}function A(C={}){let F=!1,w=Number.POSITIVE_INFINITY;for(let b in C)C[b].pollingInterval&&(w=Math.min(C[b].pollingInterval,w),F=C[b].skipPollingIfUnfocused||F);return{lowestPollingInterval:w,skipPollingIfUnfocused:F}}return d},BO=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let o=lu(r,n),a=po(r,n),d=Ur(r,n),p={};return(f,h)=>{if(o(f)){let{requestId:x,arg:{endpointName:A,originalArgs:C}}=f.meta,F=t.endpointDefinitions[A],w=F?.onQueryStarted;if(w){let b={},R=new Promise((M,q)=>{b.resolve=M,b.reject=q});R.catch(()=>{}),p[x]=b;let E=e.endpoints[A].select(F.type==="query"?C:x),P=h.dispatch((M,q,O)=>O),T={...h,getCacheEntry:()=>E(h.getState()),requestId:x,extra:P,updateCachedData:F.type==="query"?M=>h.dispatch(e.util.updateQueryData(A,C,M)):void 0,queryFulfilled:R};w(C,T)}}else if(d(f)){let{requestId:x,baseQueryMeta:A}=f.meta;p[x]?.resolve({data:f.payload,meta:A}),delete p[x]}else if(a(f)){let{requestId:x,rejectedWithValue:A,baseQueryMeta:C}=f.meta;p[x]?.reject({error:f.payload??f.error,isUnhandledError:!A,meta:C}),delete p[x]}}},UO=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:o})=>{let{removeQueryResult:a}=r.internalActions,d=(m,f)=>{Gf.match(m)&&p(f,"refetchOnFocus"),Wf.match(m)&&p(f,"refetchOnReconnect")};function p(m,f){let h=m.getState()[e],x=h.queries,A=o.currentSubscriptions;t.batch(()=>{for(let C of Object.keys(A)){let F=x[C],w=A[C];if(!w||!F)continue;(Object.values(w).some(R=>R[f]===!0)||Object.values(w).every(R=>R[f]===void 0)&&h.config[f])&&(Xa(w)===0?m.dispatch(a({queryCacheKey:C})):F.status!=="uninitialized"&&m.dispatch(n(F)))}})}return d};function _O(e){let{reducerPath:t,queryThunk:r,api:n,context:o}=e,{apiUid:a}=o,d={invalidateTags:v(`${t}/invalidateTags`)},p=x=>x.type.startsWith(`${t}/`),m=[MO,VO,LO,QO,NO,BO];return{middleware:x=>{let A=!1,F={...e,internalState:{currentSubscriptions:{}},refetchQuery:h,isThisApiSliceAction:p},w=m.map(E=>E(F)),b=kO(F),R=UO(F);return E=>P=>{if(!tu(P))return E(P);A||(A=!0,x.dispatch(n.internalActions.middlewareRegistered(a)));let T={...x,next:E},M=x.getState(),[q,O]=b(P,T,M),k;if(q?k=E(P):k=O,x.getState()[t]&&(R(P,T,M),p(P)||o.hasRehydrationInfo(P)))for(let V of w)V(P,T,M);return k}},actions:d};function h(x){return e.api.endpoints[x.endpointName].initiate(x.originalArgs,{subscribe:!1,forceRefetch:!0})}}var JC=Symbol(),jO=({createSelector:e=le}={})=>({name:JC,init(t,{baseQuery:r,tagTypes:n,reducerPath:o,serializeQueryArgs:a,keepUnusedDataFor:d,refetchOnMountOrArgChange:p,refetchOnFocus:m,refetchOnReconnect:f,invalidationBehavior:h},x){Ah();let A=me=>(typeof process<"u",me);Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:Wf,onOffline:rx,onFocus:Gf,onFocusLost:tx},util:{}});let C=TO({serializeQueryArgs:a,reducerPath:o,createSelector:e}),{selectInvalidatedBy:F,selectCachedArgsForQuery:w,buildQuerySelector:b,buildInfiniteQuerySelector:R,buildMutationSelector:E}=C;Hr(t.util,{selectInvalidatedBy:F,selectCachedArgsForQuery:w});let{queryThunk:P,infiniteQueryThunk:T,mutationThunk:M,patchQueryData:q,updateQueryData:O,upsertQueryData:k,prefetch:V,buildMatchThunkActions:Q}=EO({baseQuery:r,reducerPath:o,context:x,api:t,serializeQueryArgs:a,assertTagType:A,selectors:C}),{reducer:Y,actions:$}=IO({context:x,queryThunk:P,infiniteQueryThunk:T,mutationThunk:M,serializeQueryArgs:a,reducerPath:o,assertTagType:A,config:{refetchOnFocus:m,refetchOnReconnect:f,refetchOnMountOrArgChange:p,keepUnusedDataFor:d,reducerPath:o,invalidationBehavior:h}});Hr(t.util,{patchQueryData:q,updateQueryData:O,upsertQueryData:k,prefetch:V,resetApiState:$.resetApiState,upsertQueryEntries:$.cacheEntriesUpserted}),Hr(t.internalActions,$);let{middleware:_,actions:U}=_O({reducerPath:o,context:x,queryThunk:P,mutationThunk:M,infiniteQueryThunk:T,api:t,assertTagType:A,selectors:C});Hr(t.util,U),Hr(t,{reducer:Y,middleware:_});let{buildInitiateQuery:z,buildInitiateInfiniteQuery:j,buildInitiateMutation:X,getRunningMutationThunk:Z,getRunningMutationsThunk:se,getRunningQueriesThunk:ge,getRunningQueryThunk:Ce}=PO({queryThunk:P,mutationThunk:M,infiniteQueryThunk:T,api:t,serializeQueryArgs:a,context:x});return Hr(t.util,{getRunningMutationThunk:Z,getRunningMutationsThunk:se,getRunningQueryThunk:Ce,getRunningQueriesThunk:ge}),{name:JC,injectEndpoint(me,Se){var ke;let he=(ke=t.endpoints)[me]??(ke[me]={});zf(Se)&&Hr(he,{name:me,select:b(me,Se),initiate:z(me,Se)},Q(P,me)),RO(Se)&&Hr(he,{name:me,select:E(),initiate:X(me)},Q(M,me)),Kf(Se)&&Hr(he,{name:me,select:R(me,Se),initiate:j(me,Se)},Q(P,me))}}}}),ix=OO(jO());var $O=async(e,t,r)=>{let n=t.getState(),{accessToken:o,environment:a,organizationId:d}=n.configuration,p=n.generatedAnswer.answerConfigurationId,m={...e,headers:{...e?.headers||{},Authorization:`Bearer ${o}`}};try{let f=Ke(d,a);return{data:ZC({baseUrl:`${f}/rest/organizations/${d}/answer/v1/configs/${p}`,fetchFn:async x=>{if(x instanceof String)throw new Error("The provided 'request' must be a Request object.");let A=x.url,C={};return["method","headers","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal"].forEach(F=>{C[F]=x[F]}),C.duplex="half",C.body=await x.text(),S(A,C)}})(m,{...t,signal:null},r)}}catch(f){return{error:f}}},wl=ix({reducerPath:"answer",baseQuery:ex($O,{maxRetries:3}),endpoints:()=>({})});var HO=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},GO=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},WO=(e,t)=>{e.citations=t.citations},zO=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},KO=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},YO=(e,t,r)=>{let n=JSON.parse(e.data);n.finishReason==="ERROR"&&n.errorMessage&&KO(t,n);let o=n.payload.length?JSON.parse(n.payload):{};switch(n.payloadType){case"genqa.headerMessageType":o.contentFormat&&(HO(t,o),r(sc(o.contentFormat)));break;case"genqa.messageType":o.textDelta&&(GO(t,o),r(oc({textDelta:o.textDelta})));break;case"genqa.citationsType":o.citations&&(WO(t,o),r(ac({citations:o.citations})));break;case"genqa.endOfStreamType":zO(t,o),r(ec(o.answerGenerated??!1));break}},Ao=wl.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),serializeQueryArgs:({endpointName:t,queryArgs:r})=>{let n=JSON.parse(JSON.stringify(r));return n.analytics&&(n.analytics.clientTimestamp=""),`${t}(${JSON.stringify(n)})`},async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:n,updateCachedData:o,dispatch:a}){await n;let{configuration:d,generatedAnswer:p,insightConfiguration:m}=r(),{organizationId:f,environment:h,accessToken:x}=d,A=Ke(f,h),C=`${A}/rest/organizations/${f}/insight/v1/configs/${m?.insightId}/answer/${p.answerConfigurationId}/generate`,F=`${A}/rest/organizations/${f}/answer/v1/configs/${p.answerConfigurationId}/generate`;await Gc(m?C:F,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${x}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch:S,onopen:async w=>{let b=w.headers.get("x-answer-id");b&&o(R=>{R.answerId=b})},onmessage:w=>{o(b=>{YO(w,b,a)})},onerror:w=>{throw w},onclose:()=>{o(w=>{a(xo(!w.generated))})}})}})})}),sx=le(e=>Js(e)?.q,e=>e.search.requestId,(e,t)=>({q:e,requestId:t})),El={},JO=(e,t)=>({...El,[e]:ul(t)?.map(r=>Ef(r,wf())).sort((r,n)=>r.facetId>n.facetId?1:n.facetId>r.facetId?-1:0)}),XO=e=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,ZO=e=>{let t=Qf(e),r=ek(e);return{...t,...r&&{cq:r}}},ek=e=>{let t=LC(e.tabSet),r=pl(e),{cq:n}=Qf(e);return[t,...r,n].filter(o=>!!o).join(" AND ")},cx=(e,t,r)=>{let n=Js(e)?.q,{aq:o,cq:a,dq:d,lq:p}=ZO(e),m=IC(e),f=MC(e),h=NC(e),x=TC(e)??[];return n&&t==="fetch"&&(El=JO(n,e)),{q:n,...o&&{aq:o},...a&&{cq:a},...d&&{dq:d},...p&&{lq:p},...m?.contextValues&&{context:m.contextValues},pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:x}},...f?.length&&{searchHub:f},...h?.length&&{pipeline:h},...El[n]?.length&&{facets:El[n]},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:XO(e),firstResult:e.pagination.firstResult},tab:st(e.tabSet),...Cn(e.configuration.analytics,r)}},Jf=(e,t)=>Ao.endpoints.getAnswer.initiate(cx(e,"fetch",t)),Zs=(e,t)=>Ao.endpoints.getAnswer.select(cx(e,"select",t||Ys()))(e);l();s();u();c();var ux=re(un,e=>e);l();s();u();c();function Xf(){return typeof window<"u"&&typeof document<"u"}l();s();u();c();function tk(e){let t=e.payload?.analyticsAction;return lx(e)&&!ne(t)}function lx(e){return"type"in e}var dx=e=>t=>r=>{let n;tk(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let o=t(r);return lx(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),o};l();s();u();c();l();s();u();c();l();s();u();c();var ei=v("tab/register",e=>{let t=new B({values:{id:H,expression:be}});return I(e,t)}),At=v("tab/updateActiveTab",e=>I(e,H));l();s();u();c();var Il=_t(Hu(),1),fx=_t(px(),1),gx=_t(mx(),1);Il.default.extend(gx.default);Il.default.extend(fx.default);var ti=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:Il.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:""},environment:"prod"});l();s();u();c();var rk=/(^|; )Coveo-Pendragon=([^;]*)/;function ng(){return typeof window>"u"?!1:rk.exec(document.cookie)?.pop()||null}var Tl=re(ti(),e=>e.addCase(or,(t,r)=>{nk(t,r.payload)}).addCase(Tt,(t,r)=>{ok(t,r.payload)}).addCase(gn,(t,r)=>{ak(t,r.payload)}).addCase(Aa,t=>{t.analytics.enabled=!1}).addCase(Fa,t=>{t.analytics.enabled=!0}).addCase(Qu,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Bu,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(At,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(_u,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Fe,(t,r)=>{ne(r.payload.tab)||(t.analytics.originLevel2=r.payload.tab)}));function nk(e,t){ne(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",ne(t.organizationId)||(e.organizationId=t.organizationId)}function ok(e,t){ne(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),ne(t.locale)||(e.search.locale=t.locale),ne(t.timezone)||(e.search.timezone=t.timezone),ne(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function ak(e,t){ne(t.enabled)||(e.analytics.enabled=t.enabled),ne(t.originContext)||(e.analytics.originContext=t.originContext),ne(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),ne(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),ne(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),ne(t.trackingId)||(e.analytics.trackingId=t.trackingId),ne(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),ne(t.source)||(e.analytics.source=t.source);try{let r=ng();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r)}catch{}ne(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),ne(t.anonymous)||(e.analytics.anonymous=t.anonymous),ne(t.deviceId)||(e.analytics.deviceId=t.deviceId),ne(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),ne(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var ae=Tl;l();s();u();c();function ik(e){return e.instantlyCallable}var Sx=()=>e=>t=>e(ik(t)?t():t);l();s();u();c();var hx=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let o=n.error,a=[n.payload?.errorCode,n.payload?.message].filter(Boolean).join(" - ");if(n.payload?.ignored||e.error(a||o.stack||o.message||o.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},yx=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));l();s();u();c();function Cx(e,t){let r={...e},n,o=a=>(d,p)=>{let m=a(d,p);return n?n(m,p):m};return{get combinedReducer(){let a=TS(Object.entries(t).filter(([d])=>!(d in r)).map(([d,p])=>[d,()=>p]));return o(Zo({...a,...r}))},containsAll(a){return Object.keys(a).every(p=>p in r)},add(a){Object.keys(a).filter(d=>!(d in r)).forEach(d=>r[d]=a[d])},addCrossReducer(a){n=a}}}l();s();u();c();l();s();u();c();function Ol(e,t,r){var n,o,a;t===void 0&&(t=50),r===void 0&&(r={});var d=(n=r.isImmediate)!=null&&n,p=(o=r.callback)!=null&&o,m=r.maxWait,f=Date.now(),h=[];function x(){if(m!==void 0){var C=Date.now()-f;if(C+t>=m)return m-C}return t}var A=function(){var C=[].slice.call(arguments),F=this;return new Promise(function(w,b){var R=d&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,f=Date.now(),!d){var P=e.apply(F,C);p&&p(P),h.forEach(function(T){return(0,T.resolve)(P)}),h=[]}},x()),R){var E=e.apply(F,C);return p&&p(E),w(E)}h.push({resolve:w,reject:b})})};return A.cancel=function(C){a!==void 0&&clearTimeout(a),h.forEach(function(F){return(0,F.reject)(C)}),h=[]},A}function xx(e,t){let r=0,n=Ol(()=>r=0,500);return o=>a=>async d=>{if(!(typeof d=="function"))return a(d);let m=await a(d);if(!sk(m))return m;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),m;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),m;r++,n();let f=await ck(t);o.dispatch(or({accessToken:f})),o.dispatch(d)}}function sk(e){return e?.error?.name===new Jo().name}async function ck(e){try{return await e()}catch{return""}}l();s();u();c();function Ax({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return qh({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:o,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:n}}).prepend(...r).concat(yx(n.logger))})}function uk(e,t){let{analytics:r}=e,{analyticsClientMiddleware:n,...o}=r??{},a={...o,...r?.proxyBaseUrl&&{apiBaseUrl:r.proxyBaseUrl,nexApiBaseUrl:r.proxyBaseUrl}};return a.analyticsMode!=="next"&&IS()?(t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1}):a}function Fx(e,t){let r={...e.reducers,configuration:ae,version:ux},n=lk({...e,reducers:r},t,ae),{accessToken:o,environment:a,organizationId:d}=e.configuration;n.dispatch(or({accessToken:o,environment:a,organizationId:d}));let p=uk(e.configuration,n.logger);return p&&n.dispatch(gn(p)),n}function lk(e,t,r){let{reducers:n}=e,o=Cx({...n,configurationReducer:r},e.preloadedState??{});e.crossReducer&&o.addCrossReducer(e.crossReducer);let a=t.logger,d=()=>{let h="";try{h=oa(f.state).getMeta("").clientId}catch(x){a.warn("Error while obtaining clientID from relay",x)}return h},p={...t,get relay(){return oa(f.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():Xf()?Lf(d()):Ys()}},m=dk(e,p,o),f={addReducers(h){o.containsAll(h)||(o.add(h),m.replaceReducer(o.combinedReducer))},dispatch:m.dispatch,subscribe:m.subscribe,enableAnalytics(){m.dispatch(Fa())},disableAnalytics(){m.dispatch(Aa())},get state(){return m.getState()},get relay(){return oa(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():Xf()?Lf(d()):Ys()},logger:a,store:m};return f}function dk(e,t,r){let{preloadedState:n,configuration:o}=e,a=o.name||"coveo-headless",d=pk(e,t.logger);return Ax({preloadedState:n,reducer:r.combinedReducer,middlewares:d,thunkExtraArguments:t,name:a})}function pk(e,t){let{renewAccessToken:r}=e.configuration,n=xx(t,r);return[Sx,n,hx(t),dx].concat(Ao.middleware,e.middlewares||[])}var mk=`[Warning] A component from the Coveo Headless library has been instantiated with the Analytics Mode: "Next".
However, this mode is not available for Coveo for Service features, and this configuration may not work as expected.
Please switch back to the "legacy" analytics mode to ensure proper functionality.
For more information, refer to the documentation: https://docs.coveo.com/en/o3r90189/build-a-search-ui/event-protocol`;function On(e){e==="next"&&console.warn(mk)}l();s();u();c();var Ox=_t(Tx(),1);function kx(e){return(0,Ox.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}l();s();u();c();function qx(e,t){let r=Ok(e),n=vt,o=kk(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function Ok(e){let{analytics:t}=e,r=(n,o)=>o;return t?.analyticsClientMiddleware||r}function kk(e){return e.preprocessRequest||Yc}l();s();u();c();var ug=(e,t,r,n,o,a)=>{let d=e[t];ne(d)||ne(o)||o!==d&&o!==n&&(a.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),a.warn(`To remove this warning, make sure that access token value [${d}] matches engine configuration value [${r}]`))},lg=(e,t)=>!(ne(e)||t===e),pc=e=>{try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=atob(r);if(!n)return!1;let o=decodeURIComponent(n.split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch{return!1}},Nx=(e,t)=>(lg(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),Dx=(e,t,r,n)=>(ug(e,"searchHub",t.searchHub,pn(),r,n),Nx(e,t)),Mx=(e,t)=>(lg(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),Vx=(e,t,r,n)=>(ug(e,"pipeline",t.pipeline,$r(),r,n),Mx(e,t)),Lx=(e,t)=>(lg(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),qk=(e,t,r,n)=>(ug(e,"userDisplayName",t.configuration.analytics.userDisplayName,ti().analytics.userDisplayName,r,n),Lx(e,t)),Qx=e=>re({},t=>{t.addCase(wa,(r,n)=>{let o=pc(r.configuration.accessToken);return o?Dx(o,r,n.payload,e):r}).addCase(va,(r,n)=>{let o=pc(r.configuration.accessToken);return o?Vx(o,r,n.payload,e):r}).addCase(or,(r,n)=>{if(r.configuration.accessToken!==n.payload.accessToken)return r;let{accessToken:o}=n.payload;if(!o)return r;let a=pc(o);return a?[Mx,Nx,Lx].reduce((d,p)=>p(a,d),r):r}).addCase(Tt,(r,n)=>{let o=pc(r.configuration.accessToken);if(!o)return r;let a=Dx(o,r,n.payload.searchHub,e);return Vx(o,a,n.payload?.pipeline,e)}).addCase(gn,(r,n)=>{let o=pc(r.configuration.accessToken);return o?qk(o,r,n.payload.userDisplayName,e):r})});l();s();u();c();l();s();u();c();var Bx={organizationId:H,accessToken:H,name:new D({required:!1,emptyAllowed:!1}),analytics:new B({options:{required:!1},values:{enabled:new oe({required:!1}),originContext:new D({required:!1}),originLevel2:new D({required:!1}),originLevel3:new D({required:!1}),analyticsMode:new D({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new D({required:!1,url:!0}),trackingId:new D({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),environment:new D({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};function Ux(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457"}}var _x=new ue({...Bx,search:new B({options:{required:!1},values:{pipeline:new D({required:!1,emptyAllowed:!0}),searchHub:Ee,locale:Ee,timezone:Ee,authenticationProviders:new te({required:!1,each:H}),proxyBaseUrl:new D({required:!1,url:!0})}})});function dg(){return{...Ux(),search:{searchHub:"default"}}}var Dk={debug:ba,pipeline:Pa,searchHub:Ea,search:ce};function Vk(e){let{search:t,organizationId:r,environment:n}=e,o=t?.proxyBaseUrl?t.proxyBaseUrl:Me(r,n);return{...t,apiBaseUrl:o}}function jx(e){let t=kx(e.loggerOptions),{configuration:r}=e;Nk(r,t);let n=Mk(r,t),o=Lk(t),a={...qx(r,t),apiClient:n,streamingClient:o},d={...e,reducers:Dk,crossReducer:Qx(t)},p=Fx(d,a),m=Vk(r);return m&&p.dispatch(Tt(m)),{...p,get state(){return p.state},executeFirstSearch(f=Nu()){if(Ks(p.state))return;let h=G({legacy:f,next:Ky()});p.dispatch(h)},executeFirstSearchAfterStandaloneSearchBoxRedirect(f){let{cause:h,metadata:x}=f;if(Ks(p.state))return;let A=x&&h==="omniboxFromLink",C=G({legacy:A?Lu(x):Mu(),next:A?Jy():Yy()});p.dispatch(C)}}}function Nk(e,t){try{_x.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function Mk(e,t){let{search:r}=e;return new Jc({logger:t,preprocessRequest:e.preprocessRequest||Yc,postprocessSearchResponseMiddleware:r?.preprocessSearchResponseMiddleware||JS,postprocessFacetSearchResponseMiddleware:r?.preprocessFacetSearchResponseMiddleware||XS,postprocessQuerySuggestResponseMiddleware:r?.preprocessQuerySuggestResponseMiddleware||ZS})}function Lk(e){return new Wc({logger:e})}l();s();u();c();function ee(e){let t,r=new Map,n=()=>r.size===0,o=a=>{try{let d=JSON.stringify(a),p=t!==d;return t=d,p}catch(d){return console.warn('Could not detect if state has changed, check the controller "get state method"',d),!0}};return{subscribe(a){a();let d=Symbol(),p;return n()&&(t=JSON.stringify(this.state),p=e.subscribe(()=>{o(this.state)&&r.forEach(m=>m())})),r.set(d,a),()=>{r.delete(d),n()&&p&&p()}},get state(){return{}}}}l();s();u();c();l();s();u();c();l();s();u();c();var Hx=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,n=/Total weight: ([0-9]+)/g;if(!e)return null;let o=t.exec(e),a=r.exec(e),d=n.exec(e),p=Bk(e),m=Gx(o?o[1]:null),f=Qk(a),h=d?Number(d[1]):null;return{documentWeights:m,termsWeight:f,totalWeight:h,qreWeights:p}},Gx=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let n=e.match(t);if(!n)return null;let o={};for(let a of n){let d=a.match(r);if(d){let p=d[1],m=d[2];o[p]=Number(m)}}return o},$x=(e,t)=>{let r=[],n;for(;(n=t.exec(e))!==null;)r.push(n);return r},Qk=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let n=$x(e[1],t);if(!n)return null;let o={};for(let a of n){let d=$x(a[1],r),p={};for(let f of d)p[f[1]]={Correlation:Number(f[2]),"TF-IDF":Number(f[3])};let m=Gx(a[2]);o[Object.keys(p).join(", ")]={terms:p,Weights:m}}return o},Bk=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function Wx(e){return e.search.response.results.map(r=>{let n=Hx(r.rankingInfo);return{result:r,ranking:n}})}l();s();u();c();var qn=v("fields/registerFieldsToInclude",e=>I(e,Zc)),ni=v("fields/fetchall/enable"),Ro=v("fields/fetchall/disable"),oi=ie("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),{accessToken:a,environment:d,organizationId:p}=o.configuration,{apiBaseUrl:m}=o.configuration.search,f=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:p,url:m??Me(p,d)});return _e(f)?n(f.error):f.success.fields});l();s();u();c();l();s();u();c();var pg={collectionField:new D({emptyAllowed:!1,required:!1}),parentField:new D({emptyAllowed:!1,required:!1}),childField:new D({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new J({min:0,required:!1})},Dn=v("folding/register",e=>I(e,pg)),Vn=ie("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t(),d=a.configuration.analytics.analyticsMode==="legacy"?await xn(a):Na(a,o),p=await n.search({...d,q:Uk(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return _e(p)?r(p.error):{collectionId:e,results:p.success.results,searchUid:p.success.searchUid,rootResult:a.folding.collections[e].result}});function Uk(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}l();s();u();c();var Dl=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});l();s();u();c();var Vl=["author","language","urihash","objecttype","collection","source","permanentid"],mg=[...Vl,"date","filetype","parents"],zx=[...mg,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Kx=()=>({fieldsToInclude:Vl,fetchAllFields:!1,fieldsDescription:[]});var Nn=re(Kx(),e=>e.addCase(qn,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(ni,t=>{t.fetchAllFields=!0}).addCase(Ro,t=>{t.fetchAllFields=!1}).addCase(oi.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Dn,(t,{payload:r})=>{let n=Dl().fields;t.fieldsToInclude.push(r.collectionField??n.collection,r.parentField??n.parent,r.childField??n.child)}));var _k=new ue({enabled:new oe({default:!1})});function Yx(e,t={}){if(!jk(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state;Le(e,_k,t.initialState,"buildRelevanceInspector").enabled&&n(Sn());let d=p=>{e.logger.warn(`Flag [ ${p} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let p=o(),m=p.debug;if(!p.debug)return{isEnabled:m};let{executionReport:f,basicExpression:h,advancedExpression:x,constantExpression:A,userIdentities:C,rankingExpressions:F}=p.search.response,{fieldsDescription:w,fetchAllFields:b}=p.fields;return{isEnabled:m,rankingInformation:Wx(p),executionReport:f,expressions:{basicExpression:h,advancedExpression:x,constantExpression:A},userIdentities:C,rankingExpressions:F,fieldsDescription:w,fetchAllFields:b}},enable(){n(Sn()),d("debug")},disable(){n(Ra()),n(Ro())},enableFetchAllFields(){n(ni()),d("fetchAllFields")},disableFetchAllFields(){n(Ro())},fetchFieldsDescription(){!this.state.isEnabled&&n(Sn()),n(oi()),d("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)}}}function jk(e){return e.addReducers({debug:ba,search:ce,configuration:ae,fields:Nn}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var $k=new te({each:H,required:!0}),Jx=(e,t)=>(I(e,H),Wo(t)?I(t,H):I(t,$k),{payload:{contextKey:e,contextValue:t}}),bo=v("context/set",e=>{for(let[t,r]of Object.entries(e))Jx(t,r);return{payload:e}}),vo=v("context/add",e=>Jx(e.contextKey,e.contextValue)),Po=v("context/remove",e=>I(e,H));l();s();u();c();var Nl=re(Xu(),e=>{e.addCase(bo,(t,r)=>{t.contextValues=r.payload}).addCase(vo,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Po,(t,r)=>{delete t.contextValues[r.payload]}).addCase(xe.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});l();s();u();c();var Hk=["caseId","caseNumber"],Gk={caseId:"caseContext",caseNumber:"caseContext"},mc=class extends Error{constructor(t){super(`The key "${t}" is reserved for internal use. Use ${Gk[t]} to set this value.}`)}};function fg(e){return Hk.includes(e)}var Wk=new ue({values:new B({options:{required:!1}})});function Xx(e,t={}){if(!Yk(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,a=Le(e,Wk,t.initialState,"buildContext");return a.values&&n(bo(a.values)),{...r,get state(){return{values:o().context.contextValues}},set(d){n(bo(d))},...o().configuration.analytics.analyticsMode==="legacy"?zk(n):Kk(n)}}var zk=e=>({add(t,r){e(vo({contextKey:t,contextValue:r}))},remove(t){e(Po(t))}}),Kk=e=>({add(t,r){if(fg(t))throw new mc(t);e(vo({contextKey:t,contextValue:r}))},remove(t){if(fg(t))throw new mc(t);e(Po(t))}});function Yk(e){return e.addReducers({context:Nl}),!0}function Zx(e,t){return Xx(e,t)}l();s();u();c();l();s();u();c();var ai=v("dictionaryFieldContext/set",e=>{let t=new B({options:{required:!0}}),r=I(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),o=new te({each:be}),a=I(n,o).error;return a?{payload:e,error:a}:{payload:e}}),ii=v("dictionaryFieldContext/add",e=>{let t=new B({options:{required:!0},values:{field:be,key:be}});return I(e,t)}),si=v("dictionaryFieldContext/remove",e=>I(e,be));l();s();u();c();var Ml=re(Zu(),e=>{e.addCase(ai,(t,r)=>{t.contextValues=r.payload}).addCase(ii,(t,r)=>{let{field:n,key:o}=r.payload;t.contextValues[n]=o}).addCase(si,(t,r)=>{delete t.contextValues[r.payload]}).addCase(xe.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function eA(e){if(!Jk(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().dictionaryFieldContext.contextValues}},set(o){r(ai(o))},add(o,a){r(ii({field:o,key:a}))},remove(o){r(si(o))}}}function Jk(e){return e.addReducers({dictionaryFieldContext:Ml}),!0}l();s();u();c();l();s();u();c();l();s();u();c();var tA=le(e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!=="",e=>e);l();s();u();c();l();s();u();c();l();s();u();c();var Ll=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),rA=()=>({correctedQuery:"",corrections:[],originalQuery:""});function nA(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Ll(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}var oA=(e,t)=>{let r={...rA(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};var Ql=re(nA(),e=>{e.addCase(Qa,t=>{t.enableDidYouMean=!0}).addCase(Ku,t=>{t.enableDidYouMean=!1}).addCase(Yu,t=>{t.automaticallyCorrectQuery=!0}).addCase(Ba,t=>{t.automaticallyCorrectQuery=!1}).addCase(G.pending,t=>{t.queryCorrection=Ll(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(G.fulfilled,(t,r)=>{let{queryCorrection:n,queryCorrections:o}=r.payload.response;if(t.queryCorrectionMode==="legacy"){let a=o&&o[0]?o[0]:Ll();t.queryCorrection=a}t.queryCorrectionMode==="next"&&oA(t,n),t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected,t.originalQuery=r.payload.originalQuery}).addCase(qt,(t,r)=>{t.wasCorrectedTo=r.payload}).addCase(Co,(t,r)=>{t.queryCorrectionMode=r.payload})});function aA(e,t={}){if(!Xk(e))throw W;let r=ee(e),{dispatch:n}=e;n(Qa()),t.options?.automaticallyCorrectQuery===!1&&n(Ba()),n(Co(t.options?.queryCorrectionMode||"next"));let o=()=>e.state,a=()=>tA(o().didYouMean);return{...r,get state(){let d=o();return{originalQuery:d.didYouMean.originalQuery,wasCorrectedTo:d.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:d.didYouMean.wasAutomaticallyCorrected,queryCorrection:d.didYouMean.queryCorrection,hasQueryCorrection:a()}},applyCorrection(){n(qt(this.state.queryCorrection.correctedQuery))},updateQueryCorrectionMode(d){n(Co(d))}}}function Xk(e){return e.addReducers({configuration:ae,didYouMean:Ql}),!0}function iA(e,t={}){let r=aA(e,t),{dispatch:n}=e;return{...r,get state(){return r.state},applyCorrection(){r.applyCorrection(),n(G({legacy:Ju(),next:hC()}))}}}l();s();u();c();l();s();u();c();l();s();u();c();var de=H;var fe=v("facetOptions/update",(e={freezeFacetOrder:!0})=>I(e,{freezeFacetOrder:new oe({required:!1})})),rt=v("facetOptions/facet/enable",e=>I(e,de)),Ie=v("facetOptions/facet/disable",e=>I(e,de));l();s();u();c();l();s();u();c();l();s();u();c();var fc={facetId:de,captions:new B({options:{required:!1}}),numberOfValues:new J({required:!1,min:1}),query:new D({required:!1,emptyAllowed:!0})};var Zk={path:new te({required:!0,each:H}),displayValue:be,rawValue:be,count:new J({required:!0,min:0})},ci=v("categoryFacet/selectSearchResult",e=>I(e,{facetId:de,value:new B({values:Zk})})),ui=v("categoryFacetSearch/register",e=>I(e,fc));l();s();u();c();function li(e,t){let{facetId:r,criterion:n}=t,o=e[r]?.request;o&&(o.sortCriteria=n)}function gc(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function Bl(e,t){e&&(e.numberOfValues=t)}l();s();u();c();function Ul(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function gg(e,t,r){e.currentValues=eq(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function eq(e,t){if(!e.length)return[];let r=sA(e[0],t),n=r;for(let o of e.splice(1)){let a=sA(o,t);n.children.push(a),n=a}return n.state="selected",n.retrieveChildren=!0,[r]}function sA(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}l();s();u();c();l();s();u();c();var tq={state:new ve({required:!0}),numberOfResults:new J({required:!0,min:0}),value:new D({required:!0,emptyAllowed:!0}),path:new te({required:!0,each:H}),moreValuesAvailable:new oe({required:!1})};function Sg(e){e.children.forEach(t=>{Sg(t)}),vt({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},tq)}var di={facetId:de,field:H,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),activeTab:new D({required:!1}),delimitingCharacter:new D({required:!1,emptyAllowed:!0}),filterFacetCount:new oe({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new ve({required:!1}),basePath:new te({required:!1,each:H}),filterByBasePath:new oe({required:!1})};var dr=v("categoryFacet/register",e=>I(e,di)),Mn=v("categoryFacet/toggleSelectValue",e=>{try{return vt(e.facetId,H),Sg(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Qr(t)}}}),pr=v("categoryFacet/deselectAll",e=>I(e,di.facetId)),wo=v("categoryFacet/updateNumberOfValues",e=>I(e,{facetId:di.facetId,numberOfValues:di.numberOfValues})),pi=v("categoryFacet/updateSortCriterion",e=>I(e,{facetId:di.facetId,criterion:new ve})),_l=v("categoryFacet/updateBasePath",e=>I(e,{facetId:di.facetId,basePath:new te({each:H})}));var mr=re(da(),e=>{e.addCase(dr,(t,r)=>{let n=r.payload,{facetId:o}=n;if(o in t)return;let a=nq(n),d=a.numberOfValues;t[o]={request:a,initialNumberOfValues:d}}).addCase(xe.fulfilled,(t,r)=>r.payload?.categoryFacetSet??t).addCase(Fe,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(o=>{let a=t[o].request,d=n[o]||[];(d.length||a.currentValues.length)&&gg(a,d,t[o].initialNumberOfValues)})}).addCase(pi,(t,r)=>{let{facetId:n,criterion:o}=r.payload,a=t[n]?.request;a&&(a.sortCriteria=o)}).addCase(_l,(t,r)=>{let{facetId:n,basePath:o}=r.payload,a=t[n]?.request;a&&(a.basePath=[...o])}).addCase(Mn,(t,r)=>{let{facetId:n,selection:o,retrieveCount:a}=r.payload,d=t[n]?.request;if(!d)return;let{path:p}=o,m=p.slice(0,p.length-1),f=rq(d,m,a);if(f.length){let x=f[0];x.retrieveChildren=!0,x.state="selected",x.children=[];return}let h=uA(o.value,a);h.state="selected",f.push(h),d.numberOfValues=1}).addCase(pr,(t,r)=>{let n=r.payload;Ul(t,n)}).addCase(qe,t=>{Object.keys(t).forEach(r=>Ul(t,r))}).addCase(Ot,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(wo,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload,a=t[n]?.request;if(a){if(!a.currentValues.length)return Bl(a,o);oq(t,r.payload)}}).addCase(ci,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n];if(!a)return;let d=[...o.path,o.rawValue];gg(a.request,d,a.initialNumberOfValues)}).addCase(ur.fulfilled,(t,r)=>{cA(t,r.payload.response.facets)}).addCase(G.fulfilled,(t,r)=>{cA(t,r.payload.response.facets)}).addCase(Ie,(t,r)=>{Ul(t,r.payload)})}),Sc={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function rq(e,t,r){let n=e.currentValues;for(let o of t){let a=n[0];(!a||o!==a.value)&&(a=uA(o,r),n.length=0,n.push(a)),a.retrieveChildren=!1,a.state="idle",n=a.children}return n}function nq(e){return{...Sc,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function uA(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function cA(e,t){t.forEach(r=>{if(!aq(e,r))return;let n=r.facetId,o=e[n]?.request;if(!o)return;let a=iq(o,r);o.currentValues=a?[]:o.currentValues,o.preventAutoSelect=!1})}function oq(e,t){let{facetId:r,numberOfValues:n}=t,o=e[r]?.request.currentValues[0];if(o){for(;o.children.length&&o?.state!=="selected";)o=o.children[0];o.retrieveCount=n}}function aq(e,t){return t.facetId in e}function iq(e,t){let r=dt(e.currentValues),n=dt(t.values);return r.length!==n.length}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var hc=(r=>(r.Relevance="relevance",r.Fields="fields",r))(hc||{}),jl=(r=>(r.Ascending="asc",r.Descending="desc",r))(jl||{});var $ae=new B({options:{required:!1},values:{by:new jt({enum:hc,required:!0}),fields:new te({each:new B({values:{name:new D,direction:new jt({enum:jl})}})})}});var tie=new B({options:{required:!1},values:{by:new jt({enum:hc,required:!0}),fields:new te({each:new B({values:{field:new D({required:!0}),direction:new jt({enum:jl}),displayName:new D}})})}});l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Kt=e=>e.error!==void 0;function lA(e,t="prod"){return`${Ke(e,t)}/rest/organizations/${e}/commerce/v2`}l();s();u();c();var dA=e=>uq(e.cartItems,e.cart);function uq(e,t){let r=e.reduce((n,o)=>{let{productId:a,quantity:d}=t[o];return a in n||(n[a]={productId:a,quantity:0}),n[a].quantity+=d,n},{});return[...Object.values(r)]}var mi=(e,t)=>{let{view:r,location:n,...o}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.commerce.apiBaseUrl??lA(e.configuration.organizationId,e.configuration.environment),organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...o,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{user:{...n,...t.userAgent?{userAgent:t.userAgent}:{}},view:{...r,...t.referrer?{referrer:t.referrer}:{}},capture:t.capture??e.configuration.analytics.enabled,cart:dA(e.cart),source:ln(e.configuration.analytics)}}};var pA=(e,t,r)=>({...mi(e,t),...lq(e,r)}),lq=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};var Mt=(e,t)=>({...pA(e,t),facets:[...dq(e)],...e.commerceSort&&{sort:pq(e.commerceSort.appliedSort)}});function dq(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter(t=>e.commerceFacetSet?.[t]).map(t=>e.manualNumericFacetSet?.[t]?.manualRange?{facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[e.manualNumericFacetSet[t].manualRange],initialNumberOfValues:1}:e.commerceFacetSet[t].request).filter(t=>t&&t.values.length>0)}function pq(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var mA=(e,t,r,n)=>{let o=t.categoryFacetSearchSet[e].options.query,a=`*${o}*`,d=t.commerceFacetSet[yc(e)]?.request,p=d&&mq(d)?d&&fq(d):[],m=p.length?[p]:[],f=r?o:t.commerceQuery?.query,{url:h,accessToken:x,organizationId:A,trackingId:C,language:F,country:w,currency:b,clientId:R,context:E,...P}=Mt(t,n);return{url:h,accessToken:x,organizationId:A,facetId:yc(e),facetQuery:r?"*":a,ignorePaths:m,trackingId:C,language:F,country:w,currency:b,clientId:R,context:E,query:f,...!r&&{...P}}};function mq(e){return e.type==="hierarchical"}var fq=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var fA=(e,t,r,n)=>{let o=t.facetSearchSet[e].options.query,a=`*${o}*`,d=r?o:t.commerceQuery?.query,{url:p,accessToken:m,organizationId:f,trackingId:h,language:x,country:A,currency:C,clientId:F,context:w,...b}=Mt(t,n);return{url:p,accessToken:m,organizationId:f,facetId:yc(e),facetQuery:r?"*":a,trackingId:h,language:x,country:A,currency:C,clientId:F,context:w,query:d,...!r&&{...b}}};var gA=e=>async({facetId:t,facetSearchType:r},{getState:n,extra:{validatePayload:o,navigatorContext:a,apiClient:d}})=>{let p=n();o(t,H);let m=gq(p,t)||Sq(p,t)?fA(t,p,e,a):mA(t,p,e,a),f=await d.facetSearch(m,r);return{facetId:t,response:f}},Ln=ie("commerce/facetSearch/executeSearch",gA(!1)),Qn=ie("commerce/facetSearch/facetFieldSuggest",gA(!0)),gq=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,Sq=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,$l="field_suggestion:";function yc(e){return e.startsWith($l)?e.slice($l.length):e}function Bn(e){return e.startsWith($l)?e:`${$l}${e}`}l();s();u();c();l();s();u();c();var Hl=le(e=>e.commercePagination?.principal.perPage||0,e=>e),_se=le((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0,e=>e),Gl=le(e=>e.commercePagination?.principal.totalEntries||0,e=>e),jse=le((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0,e=>e),$se=le(e=>e.commercePagination?.principal.page||0,e=>e),Hse=le((e,t)=>e.commercePagination?.recommendations[t]?.page||0,e=>e);l();s();u();c();l();s();u();c();var hq="coveo-headless-internal-state",Un=Symbol.for(hq);var ice=le(e=>e[Un].productListing.responseId,e=>e),sce=le(e=>e.productListing.responseId,e=>e),cce=le(e=>e.productListing.requestId,e=>e),hg=le(e=>e.productListing?.products.length||0,e=>e),SA=le(e=>({total:Gl(e),current:hg(e)}),({current:e,total:t})=>e<t),uce=le(e=>e.productListing?.isLoading,e=>ne(e)?!1:e),lce=le(e=>e.productListing?.error,e=>e??null);var fi=ie("commerce/productListing/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t(),d=await n.getProductListing(Mt(a,o));return Kt(d)?r(d.error):{response:d.success}}),vce=ie("commerce/productListing/fetchMoreProducts",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t();if(!SA(a))return null;let p=Hl(a),f=hg(a)/p,h=await n.getProductListing({...Mt(a,o),page:f});return Kt(h)?r(h.error):{response:h.success}}),yq={child:new B({options:{required:!0},values:{permanentid:new D({required:!0})}})},Pce=v("commerce/productListing/promoteChildToParent",e=>I(e,yq));l();s();u();c();l();s();u();c();var hA=(e,t,r)=>({...mi(t,r),query:t.querySet[e]});var yA=v("commerce/querySuggest/clear",e=>I(e,{id:H})),_n=ie("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,{id:H});let d=t(),p=hA(e.id,d,a),m=await n.querySuggest(p);return Kt(m)?r(m.error):{id:e.id,query:p.query,...m.success}}),CA=v("commerce/querySuggest/register",e=>I(e,{id:H,count:new J({min:0})})),xA=v("commerce/querySuggest/selectSuggestion",e=>I(e,{id:H,expression:be}));l();s();u();c();l();s();u();c();var Xce=v("commerce/facets/core/updateNumberOfValues",e=>I(e,{facetId:H,numberOfValues:new J({required:!0,min:1})})),Zce=v("commerce/facets/core/updateIsFieldExpanded",e=>I(e,{facetId:H,isFieldExpanded:new oe({required:!0})})),eue=v("commerce/facets/core/clearAll"),AA=v("commerce/facets/core/deleteAll"),tue=v("commerce/facets/core/deselectAllValues",e=>I(e,{facetId:H})),rue=v("commerce/facets/core/updateFreezeCurrentValues",e=>I(e,{facetId:H,freezeCurrentValues:new oe({required:!0})})),FA=v("commerce/facets/core/updateAutoSelectionForAll",e=>I(e,{allow:new oe({required:!0})}));l();s();u();c();var Wl={slotId:ah},Cq={...Wl,pageSize:new J({required:!0,min:0})},due=v("commerce/pagination/setPageSize",e=>I(e,Cq)),xq={...Wl,page:new J({required:!0,min:0})},RA=v("commerce/pagination/selectPage",e=>I(e,xq)),pue=v("commerce/pagination/nextPage",e=>I(e,Wl)),mue=v("commerce/pagination/previousPage",e=>I(e,Wl)),fue=v("commerce/pagination/registerRecommendationsSlot",e=>I(e,{slotId:H}));l();s();u();c();var zl=v("commerce/query/update",e=>I(e,{query:new D}));l();s();u();c();l();s();u();c();var bA=v("commerce/triggers/query/updateIgnore",e=>I(e,{q:new D({emptyAllowed:!0,required:!0})})),vA=v("commerce/triggers/query/applyModification",e=>I(e,new B({values:{originalQuery:Ee,modification:Ee}})));l();s();u();c();l();s();u();c();function yg(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{q:n}:{}}function Cg(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}function Eo(e,t,r,n){if(e===void 0)return{};let o=Object.entries(e).filter(([a])=>t(a)).map(([a,{request:d}])=>{let p=r(d);return p.length?{[a]:p}:{}}).reduce((a,d)=>({...a,...d}),{});return Object.keys(o).length?{[n]:o}:{}}function PA(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{tab:n}:{}}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var vle=le(e=>e[Un].commerceSearch.responseId,e=>e),Ple=le(e=>e.commerceSearch.responseId,e=>e),wle=le(e=>e.commerceSearch.requestId,e=>e),xg=le(e=>e.commerceSearch?.products.length||0,e=>e),wA=le(e=>({total:Gl(e),current:xg(e)}),({current:e,total:t})=>e<t),Ele=le(e=>e.commerceSearch?.isLoading,e=>ne(e)?!1:e),Ile=le(e=>e.commerceSearch?.error,e=>e??null),Kl=le(e=>e.commerceQuery?.query,e=>e??""),Tle=le(e=>e.commerceSearch?.queryExecuted,e=>e),EA=(e,t)=>ne(t.queryCorrection?.correctedQuery)?Kl(e):t.queryCorrection.correctedQuery;var Cc=class{constructor(t){this.config=t}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}async fetchFromAPI(t){let r=new Date().getTime(),n=await this.extra.apiClient.search(t),o=new Date().getTime()-r,a=this.getState().commerceQuery.query||"";return{response:n,duration:o,queryExecuted:a,requestExecuted:t}}processSuccessResponse(t){return{...t,response:this.getSuccessResponse(t),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(t){return Kt(t.response)?this.rejectWithValue(t.response.error):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{queryCorrection:o}=n;if(!(!ne(o)&&!ne(o.correctedQuery)))return null;let{correctedQuery:d,originalQuery:p}=n.queryCorrection;return this.onUpdateQueryForCorrection(d??""),{...t,response:{...n},queryExecuted:EA(r,n),originalQuery:p??""}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(p=>p.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(bA({q:""})),null;let a=this.getCurrentQuery(),d=await this.automaticallyRetryQueryWithTriggerModification(n);return Kt(d.response)?this.rejectWithValue(d.response.error):{...d,response:{...d.response.success},originalQuery:a}}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(vA({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI({...Mt(this.getState(),this.navigatorContext),query:t})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let t=this.getState();return t.commerceQuery.query!==void 0?t.commerceQuery.query:""}getSuccessResponse(t){return Kt(t.response)?null:t.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(t){this.dispatch(zl({query:t}))}};var jn=ie("commerce/search/executeSearch",async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra,a=Mt(n,o),d=Kl(n),p=new Cc(t),m=await p.fetchFromAPI({...a,query:d});return p.process(m)}),dde=ie("commerce/search/fetchMoreProducts",async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra;if(!wA(n))return null;let d=Hl(n),m=xg(n)/d,f=Kl(n),h=Mt(n,o),x=new Cc(t),A=await x.fetchFromAPI({...h,query:f,page:m});return x.process(A)}),pde=ie("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;I(e,{query:new D,clearFilters:new oe}),e.clearFilters&&r(AA()),r(FA({allow:!0})),r(zl({query:e.query})),r(RA({page:0}))}),mde=ie("commerce/search/fetchInstantProducts",async(e,{getState:t,rejectWithValue:r,extra:n})=>{let o=t(),{apiClient:a,navigatorContext:d}=n,{q:p}=e,m=await a.productSuggestions({...mi(o,d),query:p});return Kt(m)?r(m.error):{response:{...m.success,products:m.success.products}}}),Aq={child:new B({options:{required:!0},values:{permanentid:new D({required:!0})}})},fde=v("commerce/search/promoteChildToParent",e=>I(e,Aq));l();s();u();c();function xc(e,t,r){let{facetId:n}=t;if(e[n])return;let o=!1,a={...mt,...t},d=r();e[n]={options:a,isLoading:o,response:d,initialNumberOfValues:a.numberOfValues,requestId:""}}function Yl(e,t){let{facetId:r,...n}=t,o=e[r];o&&(o.options={...o.options,...n})}function $n(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function Hn(e,t){let r=e[t];r&&(r.isLoading=!1)}function Jl(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=o)}function Xl(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in o&&(a.response=o.success))}function Zl(e,t,r,n){let{facetId:o,response:a}=t,d=Bn(o),p=e[d];if(!p)xc(e,{facetId:d},n),p=e[d];else if(p.requestId!==r)return;p.isLoading=!1,"success"in a&&(p.response=a.success)}function IA(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets)o.facetId in e||o.type!=="regular"||(e[o.facetId]={options:{...mt,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:mt.numberOfValues,requestId:r})}function TA(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets){let a=Bn(o.facetId);a in e||o.type!=="hierarchical"||(e[a]={options:{...mt,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:mt.numberOfValues,requestId:r})}}function Ac(e,t,r){let{facetId:n}=t,o=e[n];o&&(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=mt.query)}function Wr(e,t){Object.keys(e).forEach(r=>Ac(e,{facetId:r},t))}var mt={captions:{},numberOfValues:10,query:""};l();s();u();c();l();s();u();c();var OA=async(e,t,r,n)=>{let o=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:d,query:p,numberOfValues:m}=o,{field:f,delimitingCharacter:h,basePath:x,filterFacetCount:A}=a,C=Fq(a),F=C.length?[C]:[],w=`*${p}*`;return{url:t.configuration.search.apiBaseUrl??Me(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:x,captions:d,numberOfValues:m,query:w,field:f,delimitingCharacter:h,ignorePaths:F,filterFacetCount:A,type:"hierarchical",...n?{}:{searchContext:(await Vt(t,r)).request}}},Fq=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};l();s();u();c();var kA=async(e,t,r,n)=>{let{captions:o,query:a,numberOfValues:d}=t.facetSearchSet[e].options,{field:p,currentValues:m,filterFacetCount:f}=t.facetSet[e].request,h=m.filter(A=>A.state!=="idle").map(A=>A.value),x=`*${a}*`;return{url:t.configuration.search.apiBaseUrl??Me(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:o,numberOfValues:d,query:x,field:p,ignoreValues:h,filterFacetCount:f,type:"specific",...n?{}:{searchContext:(await Vt(t,r)).request}}};var qA=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{let d=r(),p;o(t,H),Rq(d,t)?p=await kA(t,d,a,e):p=await OA(t,d,a,e);let m=await n.facetSearch(p);return{facetId:t,response:m}},je=ie("facetSearch/executeSearch",qA(!1)),fr=ie("facetSearch/executeSearch",qA(!0)),gi=v("facetSearch/clearResults",e=>I(e,{facetId:de})),Rq=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;l();s();u();c();var DA={facetId:de,value:new B({values:{displayValue:be,rawValue:be,count:new J({required:!0,min:0})}})},ed=v("facetSearch/register",e=>I(e,fc)),Gn=v("facetSearch/update",e=>I(e,fc)),Io=v("facetSearch/toggleSelectValue",e=>I(e,DA)),To=v("facetSearch/toggleExcludeValue",e=>I(e,DA));l();s();u();c();function VA(){return{}}var Si=re(VA(),e=>{e.addCase(ui,(t,r)=>{let n=r.payload;xc(t,n,Oo)}).addCase(Gn,(t,r)=>{Yl(t,r.payload)}).addCase(Ln.pending,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,n,r.meta.requestId)}).addCase(Qn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,n,r.meta.requestId)}).addCase(je.pending,(t,r)=>{let n=r.meta.arg;$n(t,n,r.meta.requestId)}).addCase(Ln.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;Hn(t,n)}).addCase(Qn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;Hn(t,Bn(n))}).addCase(je.rejected,(t,r)=>{let n=r.meta.arg;Hn(t,n)}).addCase(Ln.fulfilled,(t,r)=>{Xl(t,r.payload,r.meta.requestId)}).addCase(Qn.fulfilled,(t,r)=>{Zl(t,r.payload,r.meta.requestId,Oo)}).addCase(_n.fulfilled,(t,r)=>{TA(t,r.payload,r.meta.requestId,Oo)}).addCase(je.fulfilled,(t,r)=>{Jl(t,r.payload,r.meta.requestId)}).addCase(gi,(t,{payload:{facetId:r}})=>{Ac(t,{facetId:r},Oo)}).addCase(fi.fulfilled,t=>Wr(t,Oo)).addCase(jn.fulfilled,t=>Wr(t,Oo)).addCase(G.fulfilled,t=>{Wr(t,Oo)})});function Oo(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();var hi=e=>K("analytics/facet/showMore",(t,r)=>{I(e,de);let n=ga(e,Ct(r));return t.makeFacetShowMore(n)}),yi=e=>K("analytics/facet/showLess",(t,r)=>{I(e,de);let n=ga(e,Ct(r));return t.makeFacetShowLess(n)}),gr=e=>K("analytics/facet/sortChange",(t,r)=>{I(e,{facetId:de,criterion:new ve({required:!0})});let{facetId:n,criterion:o}=e,a=Ct(r),p={...ga(n,a),criteria:o};return t.makeFacetUpdateSort(p)}),$e=e=>K("analytics/facet/reset",(t,r)=>{I(e,de);let n=Ct(r),o=ga(e,n);return t.makeFacetClearAll(o)}),De=e=>K("analytics/facet/select",(t,r)=>{I(e,{facetId:de,facetValue:H});let n=Ct(r),o=Sa(e,n);return t.makeFacetSelect(o)}),Ft=e=>K("analytics/facet/exclude",(t,r)=>{I(e,{facetId:de,facetValue:H});let n=Ct(r),o=Sa(e,n);return t.makeFacetExclude(o)}),Yt=e=>K("analytics/facet/deselect",(t,r)=>{I(e,{facetId:de,facetValue:H});let n=Ct(r),o=Sa(e,n);return t.makeFacetDeselect(o)}),zr=e=>K("analytics/facet/unexclude",(t,r)=>{I(e,{facetId:de,facetValue:H});let n=Ct(r),o=Sa(e,n);return t.makeFacetUnexclude(o)}),Ci=e=>K("analytics/facet/breadcrumb",(t,r)=>{I(e,{facetId:de,facetValue:H});let n=Sa(e,Ct(r));return t.makeBreadcrumbFacet(n)}),nt=()=>({actionCause:"facetClearAll"}),Ue=()=>({actionCause:"facetSelect"}),Sr=()=>({actionCause:"facetExclude"}),Kr=()=>({actionCause:"facetDeselect"}),Ag=()=>({actionCause:"facetUnexclude"}),td=()=>({actionCause:"breadcrumbFacet"});l();s();u();c();l();s();u();c();var hr=(e,t)=>e.facetOptions.facets[t]?.enabled??!0;l();s();u();c();l();s();u();c();l();s();u();c();var yr=new D({regex:/^[a-zA-Z0-9-_]+$/}),Cr=new D({required:!0}),NA=new te({each:new D}),MA=new D,LA=new oe,xr=new oe,Ar=new J({min:0}),Jt=new J({min:1}),rd=new oe({required:!0}),bq=new B,vq=new D,Pq={captions:bq,numberOfValues:Jt,query:vq},xi=new B({values:Pq}),nd=new B({options:{required:!1},values:{type:new D({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new te({required:!0,max:25,each:new D({emptyAllowed:!1,required:!0})})}}),QA=new oe,od=new te({min:1,max:25,required:!1,each:new D({emptyAllowed:!1,required:!0})});l();s();u();c();var ko={value:H,numberOfResults:new J({min:0}),state:H};var wq={facetId:de,field:new D({required:!0,emptyAllowed:!0}),tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),activeTab:new D({required:!1}),filterFacetCount:new oe({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new ve({required:!1}),resultsMustMatch:new ve({required:!1}),allowedValues:nd,customSort:od},Fr=v("facet/register",e=>I(e,wq)),Rr=v("facet/toggleSelectValue",e=>I(e,{facetId:de,selection:new B({values:ko})})),br=v("facet/toggleExcludeValue",e=>I(e,{facetId:de,selection:new B({values:ko})})),Te=v("facet/deselectAll",e=>I(e,de)),Ai=v("facet/updateSortCriterion",e=>I(e,{facetId:de,criterion:new ve({required:!0})})),qo=v("facet/updateNumberOfValues",e=>I(e,{facetId:de,numberOfValues:new J({required:!0,min:1})})),Do=v("facet/updateIsFieldExpanded",e=>I(e,{facetId:de,isFieldExpanded:new oe({required:!0})})),Yr=v("facet/updateFreezeCurrentValues",e=>I(e,{facetId:de,freezeCurrentValues:new oe({required:!0})}));l();s();u();c();l();s();u();c();function Wn(e){let t=BA(e.start,e),r=BA(e.end,e),n=e.endInclusive??!1,o=e.state??"idle";return{start:t,end:r,endInclusive:n,state:o}}function BA(e,t){let{dateFormat:r}=t;return pC(e)?(Fn(e),uC(e)):typeof e=="string"&&ir(e)?(Fn(e),e):(Wu(e,r),Hs(yo(e,r)))}l();s();u();c();var Fi=v("rangeFacet/updateSortCriterion",e=>I(e,{facetId:de,criterion:new ve({required:!0})}));l();s();u();c();var Vo={state:H,start:new J({required:!0}),end:new J({required:!0}),endInclusive:new oe({required:!0}),numberOfResults:new J({required:!0,min:0})},No={start:H,end:H,endInclusive:new oe({required:!0}),state:H,numberOfResults:new J({required:!0,min:0})},Mo=e=>({facetId:de,selection:typeof e.start=="string"?new B({values:No}):new B({values:Vo})});var Eq={start:H,end:H,endInclusive:new oe({required:!0}),state:H},Iq={facetId:de,field:H,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),activeTab:new D({required:!1}),currentValues:new te({required:!1,each:new B({values:Eq})}),generateAutomaticRanges:new oe({required:!0}),filterFacetCount:new oe({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new ve({required:!1}),rangeAlgorithm:new ve({required:!1})};function UA(e){return ir(e)?Ws(e):e}function ad(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=Wn(t);if(yo(UA(r)).isAfter(yo(UA(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var vr=v("dateFacet/register",e=>{try{return vt(e,Iq),ad(e),{payload:e,error:null}}catch(t){return{payload:e,error:Qr(t)}}}),Pr=v("dateFacet/toggleSelectValue",e=>I(e,{facetId:de,selection:new B({values:No})})),wr=v("dateFacet/toggleExcludeValue",e=>I(e,{facetId:de,selection:new B({values:No})})),Jr=v("dateFacet/updateFacetValues",e=>{try{return vt(e,{facetId:de,values:new te({each:new B({values:No})})}),ad({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qr(t)}}}),id=Fi,sd=Te;l();s();u();c();var Tq={state:H,start:new J({required:!0}),end:new J({required:!0}),endInclusive:new oe({required:!0})},Oq={facetId:de,field:H,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),activeTab:new D({required:!1}),currentValues:new te({required:!1,each:new B({values:Tq})}),generateAutomaticRanges:new oe({required:!0}),filterFacetCount:new oe({required:!1}),injectionDepth:new J({required:!1,min:0}),numberOfValues:new J({required:!1,min:1}),sortCriteria:new ve({required:!1}),rangeAlgorithm:new ve({required:!1})};function cd(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Er=v("numericFacet/register",e=>{try{return I(e,Oq),cd(e),{payload:e,error:null}}catch(t){return{payload:e,error:Qr(t)}}}),Ir=v("numericFacet/toggleSelectValue",e=>I(e,{facetId:de,selection:new B({values:Vo})})),Tr=v("numericFacet/toggleExcludeValue",e=>I(e,{facetId:de,selection:new B({values:Vo})})),Xr=v("numericFacet/updateFacetValues",e=>{try{return vt(e,{facetId:de,values:new te({each:new B({values:Vo})})}),cd({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qr(t)}}}),ud=Fi,ld=Te;l();s();u();c();var dd=(e,t)=>typeof e=="object"&&Object.keys({...e}).length===0||!t||!e?!0:e.excluded&&e.excluded.includes(t)?!1:!!(e.included&&(e.included.length===0||e.included.includes(t)));var He=re(el(),e=>{e.addCase(fe,(t,r)=>({...t,...r.payload})).addCase(G.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(G.rejected,t=>{t.freezeFacetOrder=!1}).addCase(At,(t,r)=>{for(let n in t.facets){let o=t.facets[n];Object.keys({...o.tabs}).length>0&&(o.enabled=dd(o.tabs,r.payload))}}).addCase(xe.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(dr,(t,r)=>{let{facetId:n,tabs:o,activeTab:a}=r.payload;pd(o,a,t,n)}).addCase(Fr,(t,r)=>{let{facetId:n,tabs:o,activeTab:a}=r.payload;pd(o,a,t,n)}).addCase(vr,(t,r)=>{let{facetId:n,tabs:o,activeTab:a}=r.payload;pd(o,a,t,n)}).addCase(Er,(t,r)=>{let{facetId:n,tabs:o,activeTab:a}=r.payload;pd(o,a,t,n)}).addCase(rt,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Ie,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(Fe,(t,r)=>{r.payload.tab&&Object.entries(t.facets).forEach(([,n])=>{Object.keys(n.tabs??{}).length>0&&(n.enabled=dd(n.tabs,r.payload.tab))}),[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(n=>{n in t||(t.facets[n]=Tf()),t.facets[n].enabled=!0})})});function pd(e,t,r,n){let o={...Tf(),tabs:e??{}};e&&Object.keys(e).length>0&&(o.enabled=dd(e,t)),r.facets[n]=o}l();s();u();c();l();s();u();c();function _A(e,t){let{field:r,state:n}=e;if(!kq(e))return r;let o=`${r}_`,a=qq(o,n);return Vq(r,t),`${o}${a}`}function kq(e){let{field:t,state:r}=e;return jA(r).some(o=>o&&t in o)}function qq(e,t){let n=jA(t).map(o=>Object.keys(o||{})).reduce((o,a)=>o.concat(a),[]);return Dq(n,e)+1}function jA(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:o}=e;return[t,r,n,o]}function Dq(e,t){return e.map(a=>{let d=a.split(t)[1],p=parseInt(d,10);return Number.isNaN(p)?0:p}).sort().pop()??0}function Vq(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function ot(e,t){let{state:r,logger:n}=e,{field:o,facetId:a}=t;return a||_A({field:o,state:r},n)}l();s();u();c();l();s();u();c();var $A=["alphanumeric","occurrences"];var HA=new ue({field:Cr,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),basePath:NA,delimitingCharacter:MA,facetId:yr,facetSearch:xi,filterByBasePath:LA,filterFacetCount:xr,injectionDepth:Ar,numberOfValues:Jt,sortCriteria:new D({constrainTo:$A})});function GA(e,t){if(!Nq(e))throw W;let r=ee(e),{dispatch:n}=e,o=ot(e,t.options),a=t.options.tabs??{},d=st(e.state.tabSet),p={...Sc,...Hc("facetSearch",t.options),field:t.options.field,facetId:o,tabs:a,activeTab:d},m={facetSearch:{...mt,...t.options.facetSearch},...p};Pe(e,HA,m,"buildCategoryFacet");let f=()=>nf(e.state,o),h=()=>rf(e.state,o),x=()=>rr(e.state),A=()=>hr(e.state,o);return n(dr(p)),{...r,toggleSelect(C){let F=m.numberOfValues;n(Mn({facetId:o,selection:C,retrieveCount:F})),n(fe())},deselectAll(){n(pr(o)),n(fe())},sortBy(C){n(pi({facetId:o,criterion:C})),n(fe())},isSortedBy(C){return f().sortCriteria===C},showMoreValues(){let{numberOfValues:C}=m,{activeValue:F,valuesAsTrees:w}=this.state,b=(F?.children.length??w.length)+C;n(wo({facetId:o,numberOfValues:b})),n(fe())},showLessValues(){let{numberOfValues:C}=m;n(wo({facetId:o,numberOfValues:C})),n(fe())},enable(){n(rt(o))},disable(){n(Ie(o))},get state(){let C=f(),F=h(),w=x(),b=A(),R=F?.values??[],E=R.some(Q=>Q.children.length>0)??!1,{parents:P,values:T}=Fy(F?.values),M=dt(R),q=M.length?M[M.length-1]:void 0,O=!!q,k=q?.moreValuesAvailable??F?.moreValuesAvailable??!1,V=q?q.children.length>m.numberOfValues:R.length>m.numberOfValues;return{facetId:o,parents:P,selectedValueAncestry:M,values:T,isHierarchical:E,valuesAsTrees:R,activeValue:q,isLoading:w,hasActiveValues:O,canShowMoreValues:k,canShowLessValues:V,sortCriteria:C.sortCriteria,enabled:b}}}}function Nq(e){return e.addReducers({categoryFacetSet:mr,categoryFacetSearchSet:Si,facetOptions:He,configuration:ae,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function Ri(e,t){let r=e.dispatch,{options:n,getFacetSearch:o,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:d}=t,{facetId:p}=n;return{updateText(m){r(Gn({facetId:p,query:m,numberOfValues:o().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:m,options:f}=o();r(Gn({facetId:p,numberOfValues:f.numberOfValues+m})),r(t.isForFieldSuggestions?d(p):a(p))},search(){r(t.isForFieldSuggestions?d(p):a(p))},clear(){r(gi({facetId:p}))},updateCaptions(m){r(Gn({facetId:p,captions:m}))},get state(){let{response:m,isLoading:f,options:h}=o(),{query:x}=h,A=m.values;return{...m,values:A,isLoading:f,query:x}}}}function WA(e,t){let{dispatch:r}=e,n={...mt,...t.options},{facetId:o}=n,a=()=>"state"in e?e.state.categoryFacetSearchSet[o]:e[Un].categoryFacetSearchSet[o];r(ui(n));let d=Ri(e,{options:n,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...d,select(p){r(ci({facetId:o,value:p})),t.select(p)},get state(){return d.state}}}function md(e,t){let{executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:o,isForFieldSuggestions:a}=t,{dispatch:d}=e,p={...mt,...t.options},{facetId:m}=p,f=()=>e.state.categoryFacetSearchSet[m],h=WA(e,{options:{...p},executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:o,isForFieldSuggestions:a});d(ui(p));let x=Ri(e,{options:p,getFacetSearch:f,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:je,executeFieldSuggestActionCreator:fr});return{...x,...h,get state(){return{...x.state,...h.state}}}}function zA(e,t){if(!Mq(e))throw W;let r=GA(e,t),{dispatch:n}=e,o=()=>r.state.facetId,a=md(e,{options:{facetId:o(),...t.options.facetSearch},executeFacetSearchActionCreator:je,executeFieldSuggestActionCreator:fr,select:m=>{n(fe()),n(G({legacy:De({facetId:o(),facetValue:m.rawValue}),next:Ue()}))},isForFieldSuggestions:!1}),{state:d,...p}=a;return{...r,facetSearch:p,toggleSelect(m){r.toggleSelect(m),n(G({legacy:Lq(o(),m),next:Qq(m)}))},deselectAll(){r.deselectAll(),n(G({legacy:$e(o()),next:nt()}))},sortBy(m){r.sortBy(m),n(G({legacy:gr({facetId:o(),criterion:m})}))},showMoreValues(){r.showMoreValues(),n(ur({legacy:hi(o())}))},showLessValues(){r.showLessValues(),n(ur({legacy:yi(o())}))},get state(){return{...r.state,facetSearch:a.state}}}}function Mq(e){return e.addReducers({categoryFacetSet:mr,categoryFacetSearchSet:Si,configuration:ae,search:ce}),!0}function Lq(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?Yt(r):De(r)}function Qq(e){return e.state==="selected"?Kr():Ue()}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var Bq=Intl.supportedValuesOf("currency"),Uq=new D({required:!0,emptyAllowed:!1,constrainTo:Bq}),Fg={url:H},Rg={latitude:new J({min:-90,max:90,required:!0}),longitude:new J({min:-180,max:180,required:!0})},bg={language:H,country:H,currency:Uq,view:new B({options:{required:!0},values:Fg}),location:new B({options:{required:!1},values:Rg})},LSe=new ue(bg);var KA=v("commerce/context/set",e=>I(e,bg)),fd=v("commerce/context/setView",e=>I(e,Fg)),WSe=v("commerce/context/setLocation",e=>I(e,Rg));l();s();u();c();function YA(){return{}}var bi=re(YA(),e=>{e.addCase(ed,(t,r)=>{let n=r.payload;xc(t,n,zn)}).addCase(Gn,(t,r)=>{Yl(t,r.payload)}).addCase(Ln.pending,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,n,r.meta.requestId)}).addCase(Qn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;$n(t,Bn(n),r.meta.requestId)}).addCase(je.pending,(t,r)=>{let n=r.meta.arg;$n(t,n,r.meta.requestId)}).addCase(Ln.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;Hn(t,n)}).addCase(Qn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;Hn(t,Bn(n))}).addCase(je.rejected,(t,r)=>{let n=r.meta.arg;Hn(t,n)}).addCase(Ln.fulfilled,(t,r)=>{Xl(t,r.payload,r.meta.requestId)}).addCase(Qn.fulfilled,(t,r)=>{Zl(t,r.payload,r.meta.requestId,zn)}).addCase(_n.fulfilled,(t,r)=>{IA(t,r.payload,r.meta.requestId,zn)}).addCase(je.fulfilled,(t,r)=>{Jl(t,r.payload,r.meta.requestId)}).addCase(gi,(t,{payload:r})=>{Ac(t,r,zn)}).addCase(G.fulfilled,t=>{Wr(t,zn)}).addCase(fi.fulfilled,t=>Wr(t,zn)).addCase(jn.fulfilled,t=>Wr(t,zn)).addCase(fd,t=>Wr(t,zn))});function zn(){return{moreValuesAvailable:!1,values:[]}}l();s();u();c();var Or=re(fa(),e=>{e.addCase(Fr,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=Py(_q(r.payload)))}).addCase(xe.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(Fe,(t,r)=>{let n=r.payload.f||{},o=r.payload.fExcluded||{};Object.keys(t).forEach(d=>{let{request:p}=t[d],m=n[d]||[],f=o[d]||[],h=m.length+f.length,x=p.currentValues.filter(A=>!m.includes(A.value)&&!f.includes(A.value));p.currentValues=[...m.map(XA),...f.map(ZA),...x.map($q)],p.preventAutoSelect=h>0,p.numberOfValues=Math.max(h,p.numberOfValues)})}).addCase(Rr,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let d=a.currentValues.find(m=>m.value===o.value);if(!d){gd(a,o);return}let p=d.state==="selected";d.state=p?"idle":"selected",a.freezeCurrentValues=!0}).addCase(br,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let d=a.currentValues.find(m=>m.value===o.value);if(!d){gd(a,o);return}let p=d.state==="excluded";d.state=p?"idle":"excluded",a.freezeCurrentValues=!0}).addCase(Yr,(t,r)=>{let{facetId:n,freezeCurrentValues:o}=r.payload,a=t[n]?.request;a&&(a.freezeCurrentValues=o)}).addCase(Te,(t,r)=>{gc(t[r.payload]?.request)}).addCase(qe,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>gc(r))}).addCase(yn,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>gc(r))}).addCase(Ot,(t,r)=>Object.values(t).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow})).addCase(Ai,(t,r)=>{li(t,r.payload)}).addCase(qo,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload;Bl(t[n]?.request,o)}).addCase(Do,(t,r)=>{let{facetId:n,isFieldExpanded:o}=r.payload,a=t[n]?.request;a&&(a.isFieldExpanded=o)}).addCase(G.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>JA(t[o.facetId]?.request,o))}).addCase(ur.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>JA(t[o.facetId]?.request,o))}).addCase(Io,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:d}=o,{currentValues:p}=a,m=p.find(h=>h.value===d);if(m){m.state="selected";return}let f=XA(d);gd(a,f),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(To,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:d}=o,{currentValues:p}=a,m=p.find(h=>h.value===d);if(m){m.state="excluded";return}let f=ZA(d);gd(a,f),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Ie,(t,r)=>{if(!(r.payload in t))return;let{request:n}=t[r.payload];gc(n)})});function gd(e,t){let{currentValues:r}=e,n=r.findIndex(a=>a.state==="idle"),o=n===-1?r.length:n;e.currentValues.splice(o,0,t),n>-1&&e.currentValues.pop(),e.numberOfValues=e.currentValues.length}function JA(e,t){e&&(e.currentValues=t.values.map(jq),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var Fc={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function _q(e){return{...Fc,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function jq(e){let{value:t,state:r}=e;return{value:t,state:r}}function XA(e){return{value:e,state:"selected"}}function ZA(e){return{value:e,state:"excluded"}}function $q(e){return{...e,state:"idle"}}l();s();u();c();var Sd=e=>e.state==="selected",hd=e=>e.state==="excluded",yd=(e,t)=>{let r={facetId:e,facetValue:t.value};return Sd(t)?Yt(r):De(r)},Cd=e=>Sd(e)?Kr():Ue(),eF=(e,t)=>{let r={facetId:e,facetValue:t.value};return hd(t)?zr(r):Ft(r)},tF=e=>hd(e)?Ag():Sr();l();s();u();c();function xd(e,t){let{dispatch:r}=e,{options:n,select:o,exclude:a,isForFieldSuggestions:d,executeFacetSearchActionCreator:p,executeFieldSuggestActionCreator:m}=t,{facetId:f}=n,h=()=>"state"in e?e.state.facetSearchSet[f]:e[Un].facetSearchSet[f];r(ed(n));let x=Ri(e,{options:n,getFacetSearch:h,isForFieldSuggestions:d,executeFacetSearchActionCreator:p,executeFieldSuggestActionCreator:m});return{...x,select(A){r(Io({facetId:f,value:A})),o(A)},exclude(A){r(To({facetId:f,value:A})),a(A)},singleSelect(A){r(Te(f)),r(Io({facetId:f,value:A})),o(A)},singleExclude(A){r(Te(f)),r(To({facetId:f,value:A})),a(A)},get state(){let{values:A}=x.state;return{...x.state,values:A.map(({count:C,displayValue:F,rawValue:w})=>({count:C,displayValue:F,rawValue:w}))}}}}l();s();u();c();l();s();u();c();var rF={facetId:de,selection:new B({values:ko})},nF=ie("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},rF),n(Rr({facetId:e,selection:t})),n(fe())}),oF=ie("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},rF),n(br({facetId:e,selection:t})),n(fe())});l();s();u();c();l();s();u();c();var vi=["allValues","atLeastOneValue"];l();s();u();c();var Ad=["score","alphanumeric","alphanumericDescending","occurrences","automatic","alphanumericNatural","alphanumericNaturalDescending"];var aF=new ue({facetId:yr,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),field:Cr,filterFacetCount:xr,injectionDepth:Ar,numberOfValues:Jt,sortCriteria:new D({constrainTo:Ad}),resultsMustMatch:new D({constrainTo:vi}),facetSearch:xi});function iF(e,t,r=aF){if(!Hq(e))throw W;let{dispatch:n}=e,o=ee(e),a=ot(e,t.options),d=t.options.tabs??{},p=st(e.state.tabSet),m={...Fc,...Hc("facetSearch",t.options),field:t.options.field,facetId:a,tabs:d,activeTab:p},f={facetSearch:{...mt,...t.options.facetSearch},...m};Pe(e,r,f,"buildFacet");let h=()=>Eu(e.state,a),x=()=>la(e.state,a),A=()=>rr(e.state),C=()=>hr(e.state,a),F=()=>{let{currentValues:b}=h();return b.filter(R=>R.state!=="idle").length},w=()=>{let{currentValues:b}=h(),R=f.numberOfValues,E=!!b.find(P=>P.state==="idle");return R<b.length&&E};return n(Fr(m)),{...o,toggleSelect:b=>n(nF({facetId:f.facetId,selection:b})),toggleExclude:b=>n(oF({facetId:f.facetId,selection:b})),toggleSingleSelect:function(b){b.state==="idle"&&n(Te(a)),this.toggleSelect(b)},toggleSingleExclude:function(b){b.state==="idle"&&n(Te(a)),this.toggleExclude(b)},isValueSelected:Sd,isValueExcluded:hd,deselectAll(){n(Te(a)),n(fe())},sortBy(b){n(Ai({facetId:a,criterion:b})),n(fe())},isSortedBy(b){return this.state.sortCriterion===b},showMoreValues(){let b=h().numberOfValues,R=f.numberOfValues,E=R-b%R,P=b+E;n(qo({facetId:a,numberOfValues:P})),n(Do({facetId:a,isFieldExpanded:!0})),n(fe())},showLessValues(){let b=f.numberOfValues,R=Math.max(b,F());n(qo({facetId:a,numberOfValues:R})),n(Do({facetId:a,isFieldExpanded:!1})),n(fe())},enable(){n(rt(a))},disable(){n(Ie(a))},get state(){let b=h(),R=x(),E=A(),P=C(),T;typeof b.sortCriteria=="object"?T=b.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":T=b.sortCriteria;let M=R?R.values:[],q=M.some(V=>V.state!=="idle"),O=R?R.moreValuesAvailable:!1,k=b.resultsMustMatch;return{label:R?.label,facetId:a,tabs:d,values:M,sortCriterion:T,resultsMustMatch:k,isLoading:E,hasActiveValues:q,canShowMoreValues:O,canShowLessValues:w(),enabled:P}}}}function Hq(e){return e.addReducers({facetSet:Or,facetOptions:He,configuration:ae,facetSearchSet:bi}),!0}l();s();u();c();var sF=new ue({facetId:yr,field:Cr,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),filterFacetCount:xr,injectionDepth:Ar,numberOfValues:Jt,sortCriteria:new D({constrainTo:Ad}),resultsMustMatch:new D({constrainTo:vi}),facetSearch:xi,allowedValues:nd,hasBreadcrumbs:QA,customSort:od});function cF(e,t){if(!Gq(e))throw W;let{dispatch:r}=e,n=iF(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},sF),o=()=>n.state.facetId,d=(()=>{let{facetSearch:f}=t.options;return xd(e,{options:{facetId:o(),...f},select:h=>{r(fe()),r(G({legacy:De({facetId:o(),facetValue:h.rawValue}),next:Ue()}))},exclude:h=>{r(fe()),r(G({legacy:Ft({facetId:o(),facetValue:h.rawValue}),next:Sr()}))},isForFieldSuggestions:!1,executeFacetSearchActionCreator:je,executeFieldSuggestActionCreator:fr})})(),{state:p,...m}=d;return{...n,facetSearch:m,toggleSelect(f){n.toggleSelect(f),r(G({legacy:yd(o(),f),next:Cd(f)}))},toggleExclude(f){n.toggleExclude(f),r(G({legacy:eF(o(),f),next:tF(f)}))},deselectAll(){n.deselectAll(),r(G({legacy:$e(o()),next:nt()}))},sortBy(f){n.sortBy(f),r(G({legacy:gr({facetId:o(),criterion:f})}))},isSortedBy(f){return this.state.sortCriterion===f},showMoreValues(){n.showMoreValues(),r(ur({legacy:hi(o())}))},showLessValues(){n.showLessValues(),r(ur({legacy:yi(o())}))},get state(){return{...n.state,facetSearch:d.state}}}}function Gq(e){return e.addReducers({facetSet:Or,configuration:ae,facetSearchSet:bi,search:ce}),!0}l();s();u();c();l();s();u();c();var Fd=e=>e.state==="selected",vg=e=>e.state==="excluded",Rd=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return Fd(t)?Yt(n):De(n)},bd=e=>Fd(e)?Kr():Ue(),uF=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return vg(t)?zr(n):Ft(n)};l();s();u();c();l();s();u();c();l();s();u();c();var vd=v("rangeFacet/executeToggleSelect",e=>I(e,Mo(e.selection))),Pd=v("rangeFacet/executeToggleExclude",e=>I(e,Mo(e.selection)));var lF={facetId:de,selection:new B({values:No})},dF=ie("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,lF),t(Pr(e)),t(vd(e)),t(fe())}),pF=ie("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,lF),t(wr(e)),t(Pd(e)),t(fe())});l();s();u();c();l();s();u();c();var Ed={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function Id(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let o=mF(r);r.numberOfValues=o,e[n]=t}function Td(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=mF(n))}function Od(e,t,r){let n=e[t]?.request;if(!n)return;let o=wd(n.currentValues,r);if(!o)return;let a=o.state==="selected";o.state=a?"idle":"selected",n.preventAutoSelect=!0}function kd(e,t,r){let n=e[t]?.request;if(!n)return;let o=wd(n.currentValues,r);if(!o)return;let a=o.state==="excluded";o.state=a?"idle":"excluded",n.preventAutoSelect=!0}function Kn(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(n=>n.state="idle")}function qd(e,t){Object.entries(e).forEach(([r,{request:n}])=>{let o=t[r]||[];n.currentValues.forEach(p=>(!!wd(o,p)&&(p.state="selected"),p));let a=o.filter(p=>!wd(n.currentValues,p)),d=n.currentValues;d.push(...a),n.numberOfValues=Math.max(n.numberOfValues,d.length)})}function Dd(e,t,r){t.forEach(n=>{let o=n.facetId,a=e[o]?.request;if(!a)return;let d=r(n.values);a.currentValues=d,a.preventAutoSelect=!1})}function wd(e,t){let{start:r,end:n}=t;return e.find(o=>o.start===r&&o.end===n)}function mF(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var kr=re(pa(),e=>{e.addCase(vr,(t,r)=>{let{payload:n}=r,o=Wq(n);Id(t,by(o))}).addCase(xe.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase(Fe,(t,r)=>{let n=r.payload.df||{};qd(t,n)}).addCase(Pr,(t,r)=>{let{facetId:n,selection:o}=r.payload;Od(t,n,o)}).addCase(wr,(t,r)=>{let{facetId:n,selection:o}=r.payload;kd(t,n,o)}).addCase(Jr,(t,r)=>{let{facetId:n,values:o}=r.payload;Td(t,n,o)}).addCase(sd,(t,r)=>{Kn(t,r.payload)}).addCase(qe,t=>{Object.keys(t).forEach(r=>{Kn(t,r)})}).addCase(id,(t,r)=>{li(t,r.payload)}).addCase(G.fulfilled,(t,r)=>{let n=r.payload.response.facets;Dd(t,n,zq)}).addCase(Ie,(t,r)=>{Kn(t,r.payload)})});function Wq(e){return{...Ed,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function zq(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();function Vd(e,t){let{facetId:r,getRequest:n}=t,o=ee(e),a=e.dispatch,d=()=>hr(e.state,r);return{...o,isValueSelected:Fd,isValueExcluded:vg,deselectAll(){a(Te(r)),a(fe())},sortBy(p){a(Fi({facetId:r,criterion:p})),a(fe())},isSortedBy(p){return this.state.sortCriterion===p},enable(){a(rt(r))},disable(){a(Ie(r))},get state(){let p=n(),m=Ht(e.state,r),f=p.sortCriteria,h=p.resultsMustMatch,x=m?m.values:[],A=rr(e.state),C=d(),F=x.some(w=>w.state!=="idle");return{facetId:r,values:x,sortCriterion:f,resultsMustMatch:h,hasActiveValues:F,isLoading:A,enabled:C}}}}function Nd(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}l();s();u();c();l();s();u();c();var Md=["idle","selected","excluded"];l();s();u();c();var Ld=["ascending","descending"],Qd=["even","equiprobable"];var Kq={start:new D,end:new D,endInclusive:new oe,state:new D({constrainTo:Md})},Yq=new ue({facetId:yr,field:Cr,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),generateAutomaticRanges:rd,filterFacetCount:xr,injectionDepth:Ar,numberOfValues:Jt,currentValues:new te({each:new B({values:Kq})}),sortCriteria:new D({constrainTo:Ld}),rangeAlgorithm:new D({constrainTo:Qd})});function Bd(e,t){Pe(e,Yq,t,"buildDateFacet"),ad(t)}function fF(e,t){if(!Jq(e))throw W;Nd(t.options,"buildDateFacet");let r=e.dispatch,n=ot(e,t.options),o=t.options.tabs??{},a=st(e.state.tabSet),d={currentValues:[],...t.options,facetId:n,tabs:o,activeTab:a};Bd(e,d),r(vr(d));let p=Vd(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...p,toggleSelect:m=>r(dF({facetId:n,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&r(Te(n)),this.toggleSelect(m)},toggleExclude:m=>r(pF({facetId:n,selection:m})),toggleSingleExclude:function(m){m.state==="idle"&&r(Te(n)),this.toggleExclude(m)},get state(){return p.state}}}function Jq(e){return e.addReducers({configuration:ae,search:ce,dateFacetSet:kr,facetOptions:He}),!0}function gF(e,t){let r=fF(e,t),n=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(G({legacy:$e(o()),next:nt()}))},sortBy(a){r.sortBy(a),n(G({legacy:gr({facetId:o(),criterion:a})}))},toggleSelect:a=>{r.toggleSelect(a),n(G({legacy:Rd(o(),a),next:bd(a)}))},toggleExclude:a=>{r.toggleExclude(a),n(G({legacy:uF(o(),a)}))},get state(){return r.state}}}l();s();u();c();l();s();u();c();var Lt=re(ma(),e=>{e.addCase(Er,(t,r)=>{let{payload:n}=r,o=Xq(n);Id(t,vy(o))}).addCase(xe.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase(Fe,(t,r)=>{let n=r.payload.nf||{};qd(t,n)}).addCase(Ir,(t,r)=>{let{facetId:n,selection:o}=r.payload;Od(t,n,o)}).addCase(Tr,(t,r)=>{let{facetId:n,selection:o}=r.payload;kd(t,n,o)}).addCase(Xr,(t,r)=>{let{facetId:n,values:o}=r.payload;Td(t,n,o)}).addCase(ld,(t,r)=>{Kn(t,r.payload)}).addCase(qe,t=>{Object.keys(t).forEach(r=>{Kn(t,r)})}).addCase(ud,(t,r)=>{li(t,r.payload)}).addCase(G.fulfilled,(t,r)=>{let n=r.payload.response.facets;Dd(t,n,Zq)}).addCase(Ie,(t,r)=>{Kn(t,r.payload)})});function Xq(e){return{...Ed,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Zq(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}l();s();u();c();l();s();u();c();var SF={facetId:de,selection:new B({values:Vo})},hF=ie("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,SF),t(Ir(e)),t(vd(e)),t(fe())}),RFe=ie("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,SF),t(Tr(e)),t(Pd(e)),t(fe())});l();s();u();c();var eD={start:new J,end:new J,endInclusive:new oe,state:new D({constrainTo:Md})},tD=new ue({facetId:yr,tabs:new B({options:{required:!1},values:{included:new te({each:new D}),excluded:new te({each:new D})}}),field:Cr,generateAutomaticRanges:rd,filterFacetCount:xr,injectionDepth:Ar,numberOfValues:Jt,currentValues:new te({each:new B({values:eD})}),sortCriteria:new D({constrainTo:Ld}),resultsMustMatch:new D({constrainTo:vi}),rangeAlgorithm:new D({constrainTo:Qd})});function Ud(e,t){Pe(e,tD,t,"buildNumericFacet"),cd(t)}l();s();u();c();function Pi(e){return{endInclusive:!1,state:"idle",...e}}function yF(e,t){if(!rD(e))throw W;Nd(t.options,"buildNumericFacet");let r=e.dispatch,n=ot(e,t.options),o=t.options.tabs??{},a=st(e.state.tabSet),d={currentValues:[],...t.options,facetId:n,tabs:o,activeTab:a};Ud(e,d),r(Er(d));let p=Vd(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...p,toggleSelect:m=>r(hF({facetId:n,selection:m})),toggleSingleSelect(m){m.state==="idle"&&r(Te(n)),this.toggleSelect(m)},get state(){return p.state}}}function rD(e){return e.addReducers({numericFacetSet:Lt,facetOptions:He,configuration:ae,search:ce}),!0}function CF(e,t){if(!nD(e))throw W;let r=yF(e,t),n=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(G({legacy:$e(o()),next:nt()}))},sortBy(a){r.sortBy(a),n(G({legacy:gr({facetId:o(),criterion:a})}))},toggleSelect:a=>{r.toggleSelect(a),n(G({legacy:Rd(o(),a),next:bd(a)}))},get state(){return{...r.state}}}}function nD(e){return e.addReducers({numericFacetSet:Lt,configuration:ae,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function oD(e,t){return!!t&&t.facetId in e.numericFacetSet}var xF=(e,t)=>{let r=Ht(e,t);if(oD(e,r))return r},AF=(e,t)=>(xF(e,t)||{values:[]}).values.filter(n=>n.state!=="idle"),FF=(e,t)=>(xF(e,t)||{values:[]}).values.filter(n=>n.state==="selected");function RF(e,t){if(!aD(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,a=ot(e,t.options),d=t.options.tabs??{},p=st(e.state.tabSet),m={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a,tabs:d,activeTab:p};Ud(e,m),n(Er(m));let f=()=>hr(e.state,a);return{...r,clear:()=>{n(Xr({facetId:a,values:[]})),n(fe())},setRange:h=>{let x={...h,state:"selected",numberOfResults:0,endInclusive:!0},A=Xr({facetId:a,values:[x]});return A.error?!1:(n(A),n(fe()),!0)},enable(){n(rt(a))},disable(){n(Ie(a))},get state(){let h=rr(o()),x=f(),A=FF(o(),a),C=A.length?A[0]:void 0;return{facetId:a,isLoading:h,range:C,enabled:x}}}}function aD(e){return e.addReducers({numericFacetSet:Lt,facetOptions:He,configuration:ae,search:ce}),!0}function bF(e,t){if(!iD(e))throw W;let r=RF(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(G({legacy:$e(o()),next:nt()}))},setRange:a=>{let d=r.setRange(a);return d&&n(G({legacy:De({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:Ue()})),d},get state(){return{...r.state}}}}function iD(e){return e.addReducers({numericFacetSet:Lt,configuration:ae,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();function sD(e,t){return!!t&&t.facetId in e.dateFacetSet}var vF=(e,t)=>{let r=Ht(e,t);if(sD(e,r))return r},PF=(e,t)=>(vF(e,t)||{values:[]}).values.filter(n=>n.state==="selected"),wF=(e,t)=>(vF(e,t)||{values:[]}).values.filter(n=>n.state!=="idle");function EF(e,t){if(!cD(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,a=ot(e,t.options),d=t.options.tabs??{},p=st(e.state.tabSet),m={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a,tabs:d,activeTab:p};Bd(e,m),n(vr(m));let f=()=>hr(e.state,a);return{...r,clear:()=>{n(Jr({facetId:a,values:[]})),n(fe())},setRange:h=>{let x={...h,state:"selected",numberOfResults:0,endInclusive:!0},A=Jr({facetId:a,values:[x]});return A.error?!1:(n(A),n(fe()),!0)},enable(){n(rt(a))},disable(){n(Ie(a))},get state(){let h=rr(o()),x=f(),A=PF(o(),a),C=A.length?A[0]:void 0;return{facetId:a,isLoading:h,range:C,enabled:x}}}}function cD(e){return e.addReducers({dateFacetSet:kr,facetOptions:He,configuration:ae,search:ce}),!0}function IF(e,t){if(!uD(e))throw W;let r=EF(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(G({legacy:$e(o()),next:nt()}))},setRange:a=>{let d=r.setRange(a);return d&&n(G({legacy:De({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:Ue()})),d},get state(){return{...r.state}}}}function uD(e){return e.addReducers({dateFacetSet:kr,configuration:ae,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var _d={f:new B,fExcluded:new B,lf:new B,cf:new B,nf:new B,nfExcluded:new B,mnf:new B,mnfExcluded:new B,df:new B,dfExcluded:new B,sortCriteria:new B,page:new J({min:0}),perPage:new J({min:1})};var TF=v("commerce/productListingParameters/restore",e=>I(e,_d));l();s();u();c();l();s();u();c();var OF={q:new D,..._d};var jd=v("commerce/searchParameters/restore",e=>I(e,OF));var $d=re(Ua(),e=>{e.addCase(G.fulfilled,Pg).addCase(fi.fulfilled,Pg).addCase(jn.fulfilled,Pg).addCase(jd,kF).addCase(TF,kF).addCase(xe.fulfilled,(t,r)=>r.payload?.facetOrder??t).addCase(fd,()=>Ua()).addCase(KA,()=>Ua())});function Pg(e,t){return t.payload.response.facets.map(r=>r.facetId)}function kF(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.lf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.mnf??{})]}l();s();u();c();var Hd=()=>K("history/analytics/forward",e=>e.makeSearchEvent("historyForward")),Gd=()=>K("history/analytics/backward",e=>e.makeSearchEvent("historyBackward")),Wd=()=>K("history/analytics/noresultsback",e=>e.makeNoResultsBack());l();s();u();c();l();s();u();c();var lD=10,qF=e=>({past:[],present:e,future:[]}),dD=e=>{let{past:t,present:r,future:n}=e;if(!r||t.length===0)return e;let o=t[t.length-1];return{past:t.slice(0,t.length-1),present:o,future:[r,...n]}},pD=e=>{let{past:t,present:r,future:n}=e;if(!r||n.length===0)return e;let o=n[0],a=n.slice(1);return{past:[...t,r],present:o,future:a}},mD=e=>{let{action:t,state:r,reducer:n}=e,{past:o,present:a}=r,d=n(a,t);return a?a===d?r:{past:[...o,a].slice(-lD),present:d,future:[]}:qF(d)},DF=e=>{let{actionTypes:t,reducer:r}=e,n=qF();return(o=n,a)=>{switch(a.type){case t.undo:return dD(o);case t.redo:return pD(o);case t.snapshot:return mD({state:o,reducer:r,action:a});default:return o}}};l();s();u();c();l();s();u();c();var fD=Object.getOwnPropertyNames,gD=Object.getOwnPropertySymbols,SD=Object.prototype.hasOwnProperty;function VF(e,t){return function(n,o,a){return e(n,o,a)&&t(n,o,a)}}function zd(e){return function(r,n,o){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,o);var a=o.cache,d=a.get(r),p=a.get(n);if(d&&p)return d===n&&p===r;a.set(r,n),a.set(n,r);var m=e(r,n,o);return a.delete(r),a.delete(n),m}}function NF(e){return fD(e).concat(gD(e))}var jF=Object.hasOwn||function(e,t){return SD.call(e,t)};function wi(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var $F="_owner",MF=Object.getOwnPropertyDescriptor,LF=Object.keys;function hD(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function yD(e,t){return wi(e.getTime(),t.getTime())}function QF(e,t,r){if(e.size!==t.size)return!1;for(var n={},o=e.entries(),a=0,d,p;(d=o.next())&&!d.done;){for(var m=t.entries(),f=!1,h=0;(p=m.next())&&!p.done;){var x=d.value,A=x[0],C=x[1],F=p.value,w=F[0],b=F[1];!f&&!n[h]&&(f=r.equals(A,w,a,h,e,t,r)&&r.equals(C,b,A,w,e,t,r))&&(n[h]=!0),h++}if(!f)return!1;a++}return!0}function CD(e,t,r){var n=LF(e),o=n.length;if(LF(t).length!==o)return!1;for(var a;o-- >0;)if(a=n[o],a===$F&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!jF(t,a)||!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Rc(e,t,r){var n=NF(e),o=n.length;if(NF(t).length!==o)return!1;for(var a,d,p;o-- >0;)if(a=n[o],a===$F&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!jF(t,a)||!r.equals(e[a],t[a],a,a,e,t,r)||(d=MF(e,a),p=MF(t,a),(d||p)&&(!d||!p||d.configurable!==p.configurable||d.enumerable!==p.enumerable||d.writable!==p.writable)))return!1;return!0}function xD(e,t){return wi(e.valueOf(),t.valueOf())}function AD(e,t){return e.source===t.source&&e.flags===t.flags}function BF(e,t,r){if(e.size!==t.size)return!1;for(var n={},o=e.values(),a,d;(a=o.next())&&!a.done;){for(var p=t.values(),m=!1,f=0;(d=p.next())&&!d.done;)!m&&!n[f]&&(m=r.equals(a.value,d.value,a.value,d.value,e,t,r))&&(n[f]=!0),f++;if(!m)return!1}return!0}function FD(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var RD="[object Arguments]",bD="[object Boolean]",vD="[object Date]",PD="[object Map]",wD="[object Number]",ED="[object Object]",ID="[object RegExp]",TD="[object Set]",OD="[object String]",kD=Array.isArray,UF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,_F=Object.assign,qD=Object.prototype.toString.call.bind(Object.prototype.toString);function DD(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,p=e.areSetsEqual,m=e.areTypedArraysEqual;return function(h,x,A){if(h===x)return!0;if(h==null||x==null||typeof h!="object"||typeof x!="object")return h!==h&&x!==x;var C=h.constructor;if(C!==x.constructor)return!1;if(C===Object)return o(h,x,A);if(kD(h))return t(h,x,A);if(UF!=null&&UF(h))return m(h,x,A);if(C===Date)return r(h,x,A);if(C===RegExp)return d(h,x,A);if(C===Map)return n(h,x,A);if(C===Set)return p(h,x,A);var F=qD(h);return F===vD?r(h,x,A):F===ID?d(h,x,A):F===PD?n(h,x,A):F===TD?p(h,x,A):F===ED?typeof h.then!="function"&&typeof x.then!="function"&&o(h,x,A):F===RD?o(h,x,A):F===bD||F===wD||F===OD?a(h,x,A):!1}}function VD(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,o={areArraysEqual:n?Rc:hD,areDatesEqual:yD,areMapsEqual:n?VF(QF,Rc):QF,areObjectsEqual:n?Rc:CD,arePrimitiveWrappersEqual:xD,areRegExpsEqual:AD,areSetsEqual:n?VF(BF,Rc):BF,areTypedArraysEqual:n?Rc:FD};if(r&&(o=_F({},o,r(o))),t){var a=zd(o.areArraysEqual),d=zd(o.areMapsEqual),p=zd(o.areObjectsEqual),m=zd(o.areSetsEqual);o=_F({},o,{areArraysEqual:a,areMapsEqual:d,areObjectsEqual:p,areSetsEqual:m})}return o}function ND(e){return function(t,r,n,o,a,d,p){return e(t,r,p)}}function MD(e){var t=e.circular,r=e.comparator,n=e.createState,o=e.equals,a=e.strict;if(n)return function(m,f){var h=n(),x=h.cache,A=x===void 0?t?new WeakMap:void 0:x,C=h.meta;return r(m,f,{cache:A,equals:o,meta:C,strict:a})};if(t)return function(m,f){return r(m,f,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var d={cache:void 0,equals:o,meta:void 0,strict:a};return function(m,f){return r(m,f,d)}}var APe=qr(),FPe=qr({strict:!0}),RPe=qr({circular:!0}),bPe=qr({circular:!0,strict:!0}),vPe=qr({createInternalComparator:function(){return wi}}),PPe=qr({strict:!0,createInternalComparator:function(){return wi}}),wPe=qr({circular:!0,createInternalComparator:function(){return wi}}),EPe=qr({circular:!0,createInternalComparator:function(){return wi},strict:!0});function qr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,o=e.createState,a=e.strict,d=a===void 0?!1:a,p=VD(e),m=DD(p),f=n?n(m):ND(m);return MD({circular:r,comparator:m,createState:o,equals:f,strict:d})}function Lo(e,t,r=(n,o)=>n===o){return e.length===t.length&&e.findIndex((n,o)=>!r(t[o],n))===-1}function LD(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(n=>bc(r,n))!==-1)}var bc=qr({createCustomConfig:e=>({...e,areArraysEqual:LD})});var QD=re(CC(),e=>{e.addCase(xt,(t,r)=>BD(t,r.payload)?void 0:r.payload)}),BD=(e,t)=>UD(e.context,t.context)&&_D(e.dictionaryFieldContext,t.dictionaryFieldContext)&&KD(e.advancedSearchQueries,t.advancedSearchQueries)&&jD(e.tabSet,t.tabSet)&&$D(e.staticFilterSet,t.staticFilterSet)&&wg(e.facetSet,t.facetSet)&&wg(e.dateFacetSet,t.dateFacetSet)&&wg(e.numericFacetSet,t.numericFacetSet)&&GD(e.automaticFacetSet,t.automaticFacetSet)&&HD(e.categoryFacetSet,t.categoryFacetSet)&&WD(e.pagination,t.pagination)&&zD(e.query,t.query)&&YD(e,t)&&JD(e.pipeline,t.pipeline)&&XD(e.searchHub,t.searchHub)&&ZD(e.facetOrder,t.facetOrder)&&eV(e.debug,t.debug),UD=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),_D=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),jD=(e,t)=>{let r=HF(e),n=HF(t);return r?.id===n?.id},HF=e=>Object.values(e).find(t=>t.isActive),$D=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=GF(e[r]),a=GF(n);if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},GF=e=>e.values.filter(t=>t.state!=="idle"),wg=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=e[r].request.currentValues.filter(d=>d.state!=="idle"),a=n.request.currentValues.filter(d=>d.state!=="idle");if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},HD=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=dt(e[r]?.request.currentValues).map(({value:d})=>d),a=dt(n?.request.currentValues).map(({value:d})=>d);if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},GD=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let o=e.set[r].response.values.filter(d=>d.state!=="idle"),a=n.response.values.filter(d=>d.state!=="idle");if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},WD=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,zD=(e,t)=>JSON.stringify(e)===JSON.stringify(t),KD=(e,t)=>JSON.stringify(e)===JSON.stringify(t),YD=(e,t)=>e.sortCriteria===t.sortCriteria,JD=(e,t)=>e===t,XD=(e,t)=>e===t,ZD=(e,t)=>Lo(e,t),eV=(e,t)=>e===t,Kd=DF({actionTypes:{redo:Sf.type,undo:gf.type,snapshot:xt.type},reducer:QD});function WF(e){if(!tV(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,o=a=>a.past.length>0&&!ne(a.present);return{...t,subscribe(a){a();let d=JSON.stringify(n().history.present),p=()=>{let m=JSON.stringify(n().history.present);d!==m&&(d=m,a())};return e.subscribe(()=>p())},get state(){return n().history},async back(){o(this.state)&&(await r(js()),r(G({legacy:Gd()})))},async forward(){!this.state.future.length||!this.state.present||(await r(ju()),r(G({legacy:Hd()})))},async backOnNoResults(){o(this.state)&&(await r(js()),r(G({legacy:Wd()})))}}}function tV(e){return e.addReducers({history:Kd,configuration:ae,facetOrder:$d}),!0}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();var aV=new J({min:1,default:8,required:!1}),iV=new J({min:1,max:20,default:5,required:!1}),sV={desiredCount:iV,numberOfValues:aV},Yd=v("automaticFacet/setOptions",e=>I(e,sV)),Jd=v("automaticFacet/deselectAll",e=>I(e,de)),cV=H,Yn=v("automaticFacet/toggleSelectValue",e=>I(e,{field:cV,selection:new B({values:ko})}));var Dr=re(Dt(),e=>{e.addCase(Oa,(t,r)=>{let n=Eg(t),o=r.payload;t.defaultNumberOfResults=t.numberOfResults=o,t.firstResult=vc(n,o)}).addCase(ka,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(At,t=>{t.firstResult=0}).addCase(qa,(t,r)=>{let n=r.payload;t.firstResult=vc(n,t.numberOfResults)}).addCase(kt,(t,r)=>{let n=r.payload;t.firstResult=vc(n,t.numberOfResults)}).addCase(Va,t=>{let r=Eg(t),n=Math.max(r-1,1);t.firstResult=vc(n,t.numberOfResults)}).addCase(Da,t=>{let r=Eg(t),n=uV(t),o=Math.min(r+1,n);t.firstResult=vc(o,t.numberOfResults)}).addCase(xe.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(Fe,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(G.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(Te,t=>{at(t)}).addCase(wr,t=>{at(t)}).addCase(br,t=>{at(t)}).addCase(Tr,t=>{at(t)}).addCase(To,t=>{at(t)}).addCase(Rr,t=>{at(t)}).addCase(pr,t=>{at(t)}).addCase(Mn,t=>{at(t)}).addCase(ci,t=>{at(t)}).addCase(Pr,t=>{at(t)}).addCase(Ir,t=>{at(t)}).addCase(qe,t=>{at(t)}).addCase(Jr,t=>{at(t)}).addCase(Xr,t=>{at(t)}).addCase(Io,t=>{at(t)}).addCase(Yn,t=>{at(t)})});function at(e){e.firstResult=Dt().firstResult}function Eg(e){let{firstResult:t,numberOfResults:r}=e;return Ig(t,r)}function uV(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Tg(t,r)}function vc(e,t){return(e-1)*t}function Ig(e,t){return Math.round(e/t)+1}function Tg(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function lV(e){return e.pagination.firstResult}function zF(e){return e.pagination.numberOfResults}function dV(e){return e.pagination.totalCountFiltered}var Zr=e=>{let t=lV(e),r=zF(e);return Ig(t,r)},Pc=e=>{let t=dV(e),r=zF(e);return Tg(t,r)},Xd=(e,t)=>{let r=Zr(e),n=Pc(e),o=pV(r,t);return o=mV(o),o=fV(o,n),gV(o)};function pV(e,t){let r=t%2===0,n=Math.floor(t/2),o=r?n-1:n,a=e-n,d=e+o;return{start:a,end:d}}function mV(e){let t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}function fV(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),o=e.end-r;return{start:n,end:o}}function gV(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var Ii=()=>K("analytics/pager/resize",(e,t)=>e.makePagerResize({currentResultsPerPage:t.pagination?.numberOfResults||Dt().numberOfResults})),Ti=()=>K("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:Zr(t)})),Zd=()=>K("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:Zr(t)})),ep=()=>K("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:Zr(t)})),Oi=()=>({actionCause:"browseResults"});l();s();u();c();var SV=new ue({numberOfPages:new J({default:5,min:0})}),hV=new ue({page:new J({min:1})});function KF(e,t={}){if(!yV(e))throw W;let r=ee(e),{dispatch:n}=e,o=Pe(e,SV,t.options,"buildPager"),d=Le(e,hV,t.initialState,"buildPager").page;d&&n(qa(d));let p=()=>Zr(e.state),m=()=>{let{numberOfPages:h}=o;return Xd(e.state,h)},f=()=>Pc(e.state);return{...r,get state(){let h=p(),x=f(),A=h>1&&x>0,C=h<x;return{currentPage:h,currentPages:m(),maxPage:x,hasPreviousPage:A,hasNextPage:C}},selectPage(h){n(kt(h))},nextPage(){n(Da())},previousPage(){n(Va())},isCurrentPage(h){return h===this.state.currentPage}}}function yV(e){return e.addReducers({configuration:ae,pagination:Dr}),!0}function YF(e,t={}){let{dispatch:r}=e,n=KF(e,t);return{...n,get state(){return n.state},selectPage(o){n.selectPage(o),r(cr({legacy:Ti(),next:Oi()}))},nextPage(){n.nextPage(),r(cr({legacy:Zd(),next:Oi()}))},previousPage(){n.previousPage(),r(cr({legacy:ep(),next:Oi()}))}}}l();s();u();c();l();s();u();c();function JF(e){if(!CV(e))throw W;let t=ee(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function CV(e){return e.addReducers({search:ce}),!0}function XF(e){return JF(e)}l();s();u();c();l();s();u();c();l();s();u();c();function ki(e){if(!xV(e))throw W;let t=ee(e),r=()=>e.state;return{...t,get state(){let n=r();return{hasError:n.search.error!==null,isLoading:n.search.isLoading,hasResults:!!n.search.results.length,firstSearchExecuted:Ks(n)}}}}function xV(e){return e.addReducers({search:ce}),!0}function ZF(e){if(!AV(e))throw W;let t=ee(e),r=ki(e),n=()=>e.state,o=()=>{let a=n().search.duration/1e3;return Math.round((a+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:o(),firstResult:n().pagination.firstResult+1,hasDuration:n().search.duration!==0,hasQuery:n().search.queryExecuted!=="",lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function AV(e){return e.addReducers({search:ce,pagination:Dr}),!0}function eR(e){return ZF(e)}l();s();u();c();l();s();u();c();var FV=new ue({fieldsToInclude:new te({required:!1,each:new D({required:!0,emptyAllowed:!1})})});function tp(e,t){if(!RV(e))throw W;let r=ee(e),n=ki(e),{dispatch:o}=e,a=()=>e.state,d=Pe(e,FV,t?.options,"buildCoreResultList");d.fieldsToInclude&&o(qn(d.fieldsToInclude));let p=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,m=0,f=0,h=5,x=200,A=!1;return{...r,get state(){let F=a();return{...n.state,results:F.search.results,moreResultsAvailable:p(),searchResponseId:F.search.searchResponseId}},fetchMoreResults:async()=>{if(e.state.search.isLoading)return;if(!p()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-m<x){if(f++,f>=h){m=Date.now(),!A&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${h} times, with little delay. Please verify the conditions under which the function is called.`),A=!0;return}}else f=0;A=!1,t?.fetchMoreResultsActionCreator&&(await o(t?.fetchMoreResultsActionCreator()),m=Date.now())}}}function RV(e){return e.addReducers({search:ce,configuration:ae,fields:Nn}),!0}function tR(e,t){return tp(e,{...t,fetchMoreResultsActionCreator:In})}l();s();u();c();l();s();u();c();var bV={results:new te({required:!0,each:new B({values:Vu})}),maxLength:new J({required:!0,min:1,default:10})},qi=v("recentResults/registerRecentResults",e=>I(e,bV)),Qt=v("recentResults/pushRecentResult",e=>(pt(e),{payload:e})),Di=v("recentResults/clearRecentResults");l();s();u();c();var rp=e=>K({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(pt(e),t.makeDocumentOpen(Be(e,r),we(e))),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Be(e,t),n=we(e);return{responseId:e.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});l();s();u();c();function ft(e,t,r){if(!vV(e))throw W;let n=1e3,o={selectionDelay:n,debounceWait:n,...t.options},a;return{select:Ol(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function vV(e){return e.addReducers({configuration:ae}),!0}function rR(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(rp(t.options.result)))};return ft(e,t,()=>{n(),e.dispatch(Qt(t.options.result))})}l();s();u();c();function nR(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(Zy(t.options.result)))};return ft(e,t,()=>{n(),e.dispatch(Qt(t.options.result))})}l();s();u();c();l();s();u();c();var PV=new ue({numberOfResults:new J({min:0})});function oR(e,t={}){if(!wV(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,d=Le(e,PV,t.initialState,"buildResultsPerPage").numberOfResults;return d!==void 0&&n(Oa(d)),{...r,get state(){return{numberOfResults:o().pagination.numberOfResults}},set(p){n(ka(p))},isSetTo(p){return p===this.state.numberOfResults}}}function wV(e){return e.addReducers({pagination:Dr,configuration:ae}),!0}function aR(e,t={}){if(!EV(e))throw W;let r=oR(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(o){r.set(o),n(cr({legacy:Ii(),next:Oi()}))}}}function EV(e){return e.addReducers({pagination:Dr,configuration:ae}),!0}l();s();u();c();l();s();u();c();var wc={id:H},Vi=v("querySuggest/register",e=>I(e,{...wc,count:new J({min:0})})),iR=v("querySuggest/unregister",e=>I(e,wc)),Vr=v("querySuggest/selectSuggestion",e=>I(e,{...wc,expression:be})),Jn=v("querySuggest/clear",e=>I(e,wc)),Xn=ie("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,wc);let d=e.id,p=await IV(d,t(),a),m=await n.querySuggest(p);return _e(m)?r(m.error):{id:d,q:p.q,...m.success}}),IV=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl??Me(t.configuration.organizationId,t.configuration.environment),count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?It.getInstance().getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await Ma(t.configuration.analytics):Cn(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});l();s();u();c();var Zn=()=>K("analytics/searchbox/submit",e=>e.makeSearchboxSubmit()),np=()=>({actionCause:"searchboxSubmit"});l();s();u();c();l();s();u();c();var Ec={id:H,query:be},Ni=v("querySet/register",e=>I(e,Ec)),Qo=v("querySet/update",e=>I(e,Ec));l();s();u();c();l();s();u();c();var sR=v("commerce/querySet/register",e=>I(e,Ec)),cR=v("commerce/querySet/update",e=>I(e,Ec));var Mi=re(tl(),e=>{e.addCase(Ni,(t,r)=>lR(t,r.payload)).addCase(sR,(t,r)=>lR(t,r.payload)).addCase(Qo,(t,r)=>{let{id:n,query:o}=r.payload;Ic(t,n,o)}).addCase(cR,(t,r)=>{let{id:n,query:o}=r.payload;Ic(t,n,o)}).addCase(Vr,(t,r)=>{let{id:n,expression:o}=r.payload;Ic(t,n,o)}).addCase(xA,(t,r)=>{let{id:n,expression:o}=r.payload;Ic(t,n,o)}).addCase(jn.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Og(t,n)}).addCase(G.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Og(t,n)}).addCase(Fe,uR).addCase(jd,uR).addCase(xe.fulfilled,(t,r)=>{if(r.payload)for(let[n,o]of Object.entries(r.payload.querySet))Ic(t,n,o)})});function uR(e,t){ne(t.payload.q)||Og(e,t.payload.q)}function Og(e,t){Object.keys(e).forEach(r=>e[r]=t)}var Ic=(e,t,r)=>{t in e&&(e[t]=r)},lR=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)};l();s();u();c();var op=e=>K("analytics/querySuggest",(t,r)=>{let n=kg(r,e);return t.makeOmniboxAnalytics(n)}),dR=()=>({actionCause:"omniboxAnalytics"});function kg(e,t){let{id:r,suggestion:n}=t,o=e.querySuggest&&e.querySuggest[r];if(!o)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let a=o.completions.map(f=>f.expression),d=o.partialQueries.length-1,p=o.partialQueries[d]||"",m=o.responseId;return{suggestionRanking:a.indexOf(n),partialQuery:p,partialQueries:o.partialQueries,suggestions:a,querySuggestResponseId:m}}l();s();u();c();l();s();u();c();var pR=()=>({});var Li=re(pR(),e=>e.addCase(Vi,(t,r)=>{mR(t,r.payload)}).addCase(CA,(t,r)=>{mR(t,r.payload)}).addCase(iR,(t,r)=>{delete t[r.payload.id]}).addCase(Xn.pending,fR).addCase(Xn.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(Xn.rejected,gR).addCase(_n.pending,fR).addCase(_n.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{query:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions.map(a=>({expression:a.expression,highlighted:a.highlighted,score:0,executableConfidence:0})),n.isLoading=!1,n.error=null}).addCase(_n.rejected,gR).addCase(Jn,(t,r)=>{SR(t,r.payload)}).addCase(yA,(t,r)=>{SR(t,r.payload)}));function mR(e,t){let r=t.id;r in e||(e[r]=TV(t))}function TV(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function fR(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function gR(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function SR(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}l();s();u();c();var gt=re(Qe(),e=>e.addCase(tt,(t,r)=>({...t,...r.payload})).addCase(qt,(t,r)=>{t.q=r.payload}).addCase(Vr,(t,r)=>{t.q=r.payload.expression}).addCase(xe.fulfilled,(t,r)=>r.payload?.query??t).addCase(Fe,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));l();s();u();c();var ap={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},qg={open:new D,close:new D},Dg={id:H,numberOfSuggestions:new J({min:0}),enableQuerySyntax:new oe,highlightOptions:new B({values:{notMatchDelimiters:new B({values:qg}),exactMatchDelimiters:new B({values:qg}),correctionDelimiters:new B({values:qg})}}),clearFilters:new oe},hR=new ue(Dg);function yR(e,t){if(!kV(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,a=t.options?.id||nn("search_box"),d={id:a,highlightOptions:{...t.options?.highlightOptions},...ap,...t.options};Pe(e,hR,d,"buildSearchBox"),n(Ni({id:a,query:e.state.query.q})),d.numberOfSuggestions&&n(Vi({id:a,count:d.numberOfSuggestions}));let p=()=>e.state.querySet[d.id],m=async f=>{let{enableQuerySyntax:h,clearFilters:x}=d;n(Ga({q:p(),enableQuerySyntax:h,clearFilters:x})),t.isNextAnalyticsReady?n(t.executeSearchActionCreator(f)):n(t.executeSearchActionCreator(f.legacy))};return{...r,updateText(f){n(Qo({id:a,query:f})),this.showSuggestions()},clear(){n(Qo({id:a,query:""})),n(Jn({id:a}))},showSuggestions(){d.numberOfSuggestions&&n(t.fetchQuerySuggestionsActionCreator({id:a}))},selectSuggestion(f){n(Vr({id:a,expression:f})),m({legacy:op({id:a,suggestion:f}),next:dR()}).then(()=>{n(Jn({id:a}))})},submit(f=Zn(),h){m({legacy:f,next:h}),n(Jn({id:a}))},get state(){let f=o(),h=f.querySuggest[d.id],x=OV(h,d.highlightOptions),A=h?h.isLoading:!1;return{searchBoxId:a,value:p(),suggestions:x,isLoading:f.search.isLoading,isLoadingSuggestions:A}}}}function OV(e,t){return e?e.completions.map(r=>({highlightedValue:tm(r.highlighted,t),rawValue:r.expression})):[]}function kV(e){return e.addReducers({query:gt,querySuggest:Li,configuration:ae,querySet:Mi,search:ce}),!0}function ip(e,t={}){let r=yR(e,{...t,executeSearchActionCreator:G,fetchQuerySuggestionsActionCreator:Xn,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(Zn(),np())},get state(){return r.state}}}l();s();u();c();l();s();u();c();function sp(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}l();s();u();c();l();s();u();c();var CR=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},xR=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},AR=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(([n,o])=>{sp(o)&&delete t[r].cache[n]})},FR=(e,t,r)=>{for(let o in t)for(let a in t[o].cache)t[o].cache[a].isActive=!1;if(!Vg(e,t)){qV(e,t,r);return}let n=Vg(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},RR=(e,t,r)=>{let{id:n,q:o,searchUid:a,cacheTimeout:d,totalCountFiltered:p,duration:m}=e;t[n].cache[o]={...Vg(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:d?d+Date.now():0,totalCountFiltered:p,duration:m}},bR=(e,t)=>{let{id:r,q:n,error:o}=e;t[r].cache[n].error=o||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},Vg=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},qV=(e,t,r)=>{let{q:n,id:o}=e;t[o].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};l();s();u();c();function vR(){return{}}var cp=re(vR(),e=>{e.addCase(Ia,(t,r)=>{CR(r.payload,t)}),e.addCase(ar,(t,r)=>{xR(r.payload,t)}),e.addCase(Ta,(t,r)=>{AR(r.payload,t)}),e.addCase(Wa.pending,(t,r)=>{FR(r.meta.arg,t,{results:[]})}),e.addCase(Wa.fulfilled,(t,r)=>{let n=r.payload.results.map(o=>({...o,searchUid:r.payload.searchUid}));RR({...r.payload,...r.meta.arg},t,{results:n})}),e.addCase(Wa.rejected,(t,r)=>{bR(r.meta.arg,t)})});l();s();u();c();var DV={searchBoxId:Ee,maxResultsPerQuery:new J({required:!0,min:1}),cacheTimeout:new J},PR=new ue(DV);function wR(e,t){if(!VV(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,a={searchBoxId:t.options.searchBoxId||nn("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};Pe(e,PR,a,"buildInstantResults");let d=a.searchBoxId;n(Ia({id:d}));let p=()=>o().instantResults[d],m=x=>p().cache[x],f=()=>p().q,h=()=>{let x=m(f());return x?x.isLoading?[]:x.results:[]};return{...r,updateQuery(x){if(!x)return;let A=m(x);(!A||!A.isLoading&&(A.error||sp(A)))&&n(Wa({id:d,q:x,maxResultsPerQuery:a.maxResultsPerQuery,cacheTimeout:a.cacheTimeout})),n(ar({id:d,q:x}))},clearExpired(){n(Ta({id:d}))},get state(){let x=f(),A=m(x);return{q:x,isLoading:A?.isLoading||!1,error:A?.error||null,results:h()}}}}function VV(e){return e.addReducers({instantResults:cp}),!0}l();s();u();c();l();s();u();c();var Qi=()=>K("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Et()})),up=()=>({actionCause:"resultsSort"});l();s();u();c();l();s();u();c();var ER={by:new jt({enum:So,required:!0})},Bi=v("sortCriteria/register",e=>IR(e)),Ui=v("sortCriteria/update",e=>IR(e)),IR=e=>zo(e)?(e.forEach(t=>I(t,ER)),{payload:e}):I(e,ER);l();s();u();c();var lp=re(Et(),e=>{e.addCase(Bi,(t,r)=>nr(r.payload)).addCase(Ui,(t,r)=>nr(r.payload)).addCase(xe.fulfilled,(t,r)=>r.payload?.sortCriteria??t).addCase(Fe,(t,r)=>r.payload.sortCriteria??t)});function NV(e,t){if(!t)return;let r=new ue({criterion:new te({each:ky})}),n=MV(t),o={...t,criterion:n};Le(e,r,o,"buildSort")}function MV(e){return e.criterion?zo(e.criterion)?e.criterion:[e.criterion]:[]}function TR(e,t){if(!LV(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state;NV(e,t.initialState);let a=t.initialState?.criterion;return a&&n(Bi(a)),{...r,sortBy(d){n(Ui(d)),n(kt(1))},isSortedBy(d){return this.state.sortCriteria===nr(d)},get state(){return{sortCriteria:o().sortCriteria}}}}function LV(e){return e.addReducers({configuration:ae,sortCriteria:lp}),!0}function OR(e,t={}){let{dispatch:r}=e,n=TR(e,t),o=()=>r(G({legacy:Qi(),next:up()}));return{...n,get state(){return n.state},sortBy(a){n.sortBy(a),o()}}}l();s();u();c();l();s();u();c();l();s();u();c();var Bo=H,dp=new B({options:{required:!0},values:{caption:be,expression:be,state:new D({constrainTo:["idle","selected","excluded"]})}}),pp=new te({required:!0,each:dp});var _i=v("staticFilter/register",e=>I(e,{id:Bo,values:pp})),en=v("staticFilter/toggleSelect",e=>I(e,{id:Bo,value:dp})),tn=v("staticFilter/toggleExclude",e=>I(e,{id:Bo,value:dp})),eo=v("staticFilter/deselectAllFilterValues",e=>I(e,Bo)),mp=e=>K("analytics/staticFilter/select",t=>t.makeStaticFilterSelect(e)),ji=e=>K("analytics/staticFilter/deselect",t=>t.makeStaticFilterDeselect(e)),fp=e=>K("analytics/staticFilter/clearAll",t=>t.makeStaticFilterClearAll(e));l();s();u();c();var gp=re(rl(),e=>e.addCase(_i,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]=n)}).addCase(en,(t,r)=>{let{id:n,value:o}=r.payload,a=t[n];if(!a)return;let d=a.values.find(m=>m.caption===o.caption);if(!d)return;let p=d.state==="selected";d.state=p?"idle":"selected"}).addCase(tn,(t,r)=>{let{id:n,value:o}=r.payload,a=t[n];if(!a)return;let d=a.values.find(m=>m.caption===o.caption);if(!d)return;let p=d.state==="excluded";d.state=p?"idle":"excluded"}).addCase(eo,(t,r)=>{let n=r.payload,o=t[n];o&&o.values.forEach(a=>a.state="idle")}).addCase(qe,t=>{Object.values(t).forEach(r=>{r.values.forEach(n=>n.state="idle")})}).addCase(Fe,(t,r)=>{let n=r.payload.sf||{};Object.entries(t).forEach(([o,a])=>{let d=n[o]||[];a.values.forEach(p=>{p.state=d.includes(p.caption)?"selected":"idle"})})}));l();s();u();c();function Ng(e){return{state:"idle",...e}}var QV=new ue({id:Bo,values:pp});function kR(e,t){if(!BV(e))throw W;Pe(e,QV,t.options,"buildStaticFilter");let r=ee(e),{dispatch:n}=e,o=()=>e.state,{id:a}=t.options;return n(_i(t.options)),{...r,toggleSelect(d){n(en({id:a,value:d})),n(G({legacy:Sp(a,d)}))},toggleSingleSelect(d){d.state==="idle"&&n(eo(a)),n(en({id:a,value:d})),n(G({legacy:Sp(a,d)}))},toggleExclude(d){n(tn({id:a,value:d})),n(G({legacy:Sp(a,d)}))},toggleSingleExclude(d){d.state==="idle"&&n(eo(a)),n(tn({id:a,value:d})),n(G({legacy:Sp(a,d)}))},deselectAll(){n(eo(a)),n(G({legacy:fp({staticFilterId:a})}))},isValueSelected(d){return d.state==="selected"},isValueExcluded(d){return d.state==="excluded"},get state(){let d=o().staticFilterSet[a]?.values||[],p=d.some(m=>m.state!=="idle");return{id:a,values:d,hasActiveValues:p}}}}function BV(e){return e.addReducers({staticFilterSet:gp}),!0}function Sp(e,t){let{caption:r,expression:n,state:o}=t;return(o==="idle"?mp:ji)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}l();s();u();c();l();s();u();c();l();s();u();c();var $i=re(nl(),e=>{e.addCase(ei,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]={...n,isActive:!1})}).addCase(At,(t,r)=>{let n=r.payload;qR(t,n)}).addCase(_u,(t,r)=>{let n=r.payload;qR(t,n)}).addCase(xe.fulfilled,(t,r)=>r.payload?.tabSet??t).addCase(Fe,(t,r)=>{let n=r.payload.tab;ne(n)||Object.keys(t).forEach(o=>{t[o].isActive=o===n})})});function qR(e,t){t in e&&Object.keys(e).forEach(n=>{e[n].isActive=n===t})}var UV=new ue({expression:be,id:H,clearFiltersOnTabChange:new oe}),_V=new ue({isActive:new oe});function DR(e,t){if($V(t.options.id),!jV(e))throw W;let r=ee(e),{dispatch:n}=e;Pe(e,UV,t.options,"buildTab");let o=Le(e,_V,t.initialState,"buildTab"),{id:a,expression:d}=t.options;return n(ei({id:a,expression:d})),Object.keys(e.state.tabSet).length===1&&(o.isActive=!0),o.isActive&&n(At(a)),{...r,select(){t.options.clearFiltersOnTabChange&&n(Ga({q:"",clearFilters:!0})),n(At(a))},get state(){return{isActive:e.state.tabSet[a]?.isActive}}}}function jV(e){return e.addReducers({configuration:ae,tabSet:$i}),!0}function $V(e){let t=ti().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function VR(e,t){let{dispatch:r}=e,n=DR(e,t),o=()=>r(G({legacy:fn(),next:xa()}));return{...n,get state(){return n.state},select(){n.select(),o()}}}l();s();u();c();l();s();u();c();function NR(e){if(!HV(e))throw W;let t=ee(e),r=le(n=>n.tabSet,n=>Object.values(n).find(a=>a.isActive)?.id??"");return{...t,get state(){return{activeTab:r(e.state)}}}}function HV(e){return e.addReducers({tabSet:$i}),!0}function MR(e){let t=NR(e);return{...t,get state(){return t.state}}}l();s();u();c();l();s();u();c();function LR(e){if(!GV(e))throw W;let t=ee(e),r=()=>e.state;return{...t,sort(n){return zs(n,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(a=>a.facetId)}}}}function GV(e){return e.addReducers({search:ce,facetOptions:He}),!0}function QR(e){return LR(e)}l();s();u();c();l();s();u();c();var WV={categoryFacetId:de,categoryFacetPath:new te({required:!0,each:H})},zV=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let o=e.categoryFacetSet[t]?.request.field,a=`${o}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:o,categoryFacetTitle:a}},hp=e=>K("analytics/categoryFacet/breadcrumb",(t,r)=>(I(e,WV),t.makeBreadcrumbFacet(zV(r,e)))),BR=()=>({actionCause:"breadcrumbFacet"});l();s();u();c();var yp=()=>K("analytics/facet/deselectAllBreadcrumbs",e=>e.makeBreadcrumbResetAll());l();s();u();c();l();s();u();c();var Cp=(e,{facetId:t,selection:r})=>{let o=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,a=`${o}_${t}`;return{facetId:t,facetField:o,facetTitle:a,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},xp=()=>({actionCause:"breadcrumbFacet"});var Tc=e=>K("analytics/dateFacet/breadcrumb",(t,r)=>{I(e,Mo(e.selection));let n=Cp(r,e);return t.makeBreadcrumbFacet(n)}),Mg=xp;l();s();u();c();var Oc=e=>K("analytics/numericFacet/breadcrumb",(t,r)=>{I(e,Mo(e.selection));let n=Cp(r,e);return t.makeBreadcrumbFacet(n)}),Lg=xp;l();s();u();c();var Ap=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(n=>({value:n,deselect:()=>{n.state==="selected"?e.executeToggleSelect({facetId:t,selection:n}):n.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:n})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function UR(e){let t=ee(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(qe())},deselectBreadcrumb(n){n.deselect()}}}function _R(e){if(!KV(e))throw W;let t=UR(e),{dispatch:r}=e,n=()=>e.state,o=()=>{let b={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:R,selection:E})=>{r(Rr({facetId:R,selection:E})),r(Yr({facetId:R,freezeCurrentValues:!1})),r(G({legacy:Ci({facetId:R,facetValue:E.value}),next:td()}))},executeToggleExclude:({facetId:R,selection:E})=>{r(br({facetId:R,selection:E})),r(Yr({facetId:R,freezeCurrentValues:!1})),r(G({legacy:Ci({facetId:R,facetValue:E.value}),next:td()}))},facetValuesSelector:Ay};return Ap(b)},a=()=>{let b={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:R=>{r(Ir(R)),r(G({legacy:Oc(R),next:Lg()}))},executeToggleExclude:R=>{r(Tr(R)),r(G({legacy:Oc(R),next:Lg()}))},facetValuesSelector:AF};return Ap(b)},d=()=>{let b={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:R=>{r(Pr(R)),r(G({legacy:Tc(R),next:Mg()}))},executeToggleExclude:R=>{r(wr(R)),r(G({legacy:Tc(R),next:Mg()}))},facetValuesSelector:wF};return Ap(b)},p=()=>Object.keys(n().categoryFacetSet).map(m).filter(b=>b.path.length),m=b=>{let R=Ry(n(),b);return{facetId:b,field:n().categoryFacetSet[b].request.field,path:R,deselect:()=>{r(pr(b)),r(G({legacy:hp({categoryFacetPath:R.map(E=>E.value),categoryFacetId:b}),next:BR()}))}}},f=()=>{let b=n().staticFilterSet??{};return Object.values(b).map(h)},h=b=>{let{id:R,values:E}=b,P=E.filter(T=>T.state!=="idle").map(T=>x(R,T));return{id:R,values:P}},x=(b,R)=>({value:R,deselect:()=>{let{caption:E,expression:P}=R;R.state==="selected"?r(en({id:b,value:R})):R.state==="excluded"&&r(tn({id:b,value:R})),r(G({legacy:ji({staticFilterId:b,staticFilterValue:{caption:E,expression:P}})}))}}),A=()=>{let b=n().automaticFacetSet?.set??{};return Object.values(b).map(R=>C(R.response)).filter(R=>R.values.length>0)},C=b=>{let{field:R,label:E}=b,P=b.values.filter(T=>T.state!=="idle").map(T=>F(R,T));return{facetId:R,field:R,label:E,values:P}},F=(b,R)=>({value:R,deselect:()=>{r(Yn({field:b,selection:R})),r(G({legacy:Ci({facetId:b,facetValue:R.value}),next:td()}))}});function w(){return!![...o(),...a(),...d(),...p(),...f(),...A()].length}return{...t,get state(){return{facetBreadcrumbs:o(),categoryFacetBreadcrumbs:p(),numericFacetBreadcrumbs:a(),dateFacetBreadcrumbs:d(),staticFilterBreadcrumbs:f(),automaticFacetBreadcrumbs:A(),hasBreadcrumbs:w()}},deselectAll:()=>{t.deselectAll(),r(G({legacy:yp()}))}}}function KV(e){return e.addReducers({configuration:ae,search:ce,facetSet:Or,numericFacetSet:Lt,dateFacetSet:kr,categoryFacetSet:mr}),!0}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function jR(e){return e.type==="redirect"}var Fp=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(jR);return t.length?t[0].content:null}};var Hi=v("standaloneSearchBox/register",e=>I(e,{id:H,redirectionUrl:H,overwrite:new oe({required:!1})})),Gi=v("standaloneSearchBox/updateRedirectionUrl",e=>I(e,{id:H,redirectionUrl:H})),Wi=v("standaloneSearchBox/reset",e=>I(e,{id:H})),zi=v("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>I(e,{id:H})),Ki=v("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),to=ie("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:o,validatePayload:a,navigatorContext:d}})=>{a(e,{id:new D({emptyAllowed:!1})});let p=await JV(r(),d),m=await o.plan(p);if(_e(m))return n(m.error);let{redirectionUrl:f}=new Fp(m.success);return f&&t(YV(f)),f||""}),YV=e=>K("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),JV=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await Ma(e.configuration.analytics):Cn(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});l();s();u();c();l();s();u();c();function $R(){return{}}var Rp=re($R(),e=>e.addCase(Hi,(t,r)=>{let{id:n,redirectionUrl:o,overwrite:a}=r.payload;!a&&n in t||(t[n]=Qg(o))}).addCase(Wi,(t,r)=>{let{id:n}=r.payload,o=t[n];if(o){t[n]=Qg(o.defaultRedirectionUrl);return}}).addCase(Gi,(t,r)=>{let{id:n,redirectionUrl:o}=r.payload;n in t&&(t[n]=Qg(o))}).addCase(to.pending,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!0)}).addCase(to.fulfilled,(t,r)=>{let n=r.payload,o=t[r.meta.arg.id];o&&(o.redirectTo=n||o.defaultRedirectionUrl,o.isLoading=!1)}).addCase(to.rejected,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!1)}).addCase(zi,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="searchFromLink")}).addCase(Ki,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function Qg(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}l();s();u();c();var HR=new ue({...Dg,redirectionUrl:new D({required:!0,emptyAllowed:!1}),overwrite:new oe({required:!1})});function GR(e,t){if(!XV(e))throw W;let{dispatch:r}=e,n=()=>e.state,o=t.options.id||nn("standalone_search_box"),a={id:o,highlightOptions:{...t.options.highlightOptions},...ap,overwrite:!1,...t.options};Pe(e,HR,a,"buildStandaloneSearchBox");let d=ip(e,{options:a});return r(Hi({id:o,redirectionUrl:a.redirectionUrl,overwrite:a.overwrite})),{...d,updateText(p){d.updateText(p),r(zi({id:o}))},selectSuggestion(p){let m=kg(n(),{id:o,suggestion:p});r(Vr({id:o,expression:p})),r(Ki({id:o,metadata:m})),this.submit()},afterRedirection(){r(Wi({id:o}))},updateRedirectUrl(p){r(Gi({id:o,redirectionUrl:p}))},submit(){r(tt({q:this.state.value,enableQuerySyntax:a.enableQuerySyntax})),r(to({id:o}))},get state(){let m=n().standaloneSearchBoxSet[o];return{...d.state,isLoading:m.isLoading,redirectTo:m.redirectTo,analytics:m.analytics}}}}function XV(e){return e.addReducers({standaloneSearchBoxSet:Rp,configuration:ae,query:gt,querySuggest:Li}),!0}l();s();u();c();l();s();u();c();function zR(e,t){return e.q!==t.q?Zn():e.sortCriteria!==t.sortCriteria?Qi():e.firstResult!==t.firstResult?Ti():e.numberOfResults!==t.numberOfResults?Ii():Bt(e.f,t.f)?kc(e.f,t.f):Bt(e.fExcluded,t.fExcluded)?kc(e.fExcluded,t.fExcluded,!0):Bt(e.cf,t.cf)?kc(e.cf,t.cf):Bt(e.af,t.af)?kc(e.af,t.af):Bt(e.nf,t.nf)?WR(e.nf,t.nf):Bt(e.df,t.df)?WR(e.df,t.df):fn()}function kc(e={},t={},r=!1){let n=Object.keys(e),o=Object.keys(t),a=n.filter(A=>!o.includes(A));if(a.length){let A=a[0];switch(!0){case e[A].length>1:return $e(A);case r:return zr({facetId:A,facetValue:e[A][0]});default:return Yt({facetId:A,facetValue:e[A][0]})}}let d=o.filter(A=>!n.includes(A));if(d.length){let A=d[0];return r?Ft({facetId:A,facetValue:t[A][0]}):De({facetId:A,facetValue:t[A][0]})}let p=o.find(A=>t[A].filter(C=>e[A].includes(C)));if(!p)return fn();let m=e[p],f=t[p],h=f.filter(A=>!m.includes(A));if(h.length)return r?Ft({facetId:p,facetValue:h[0]}):De({facetId:p,facetValue:h[0]});let x=m.filter(A=>!f.includes(A));return x.length?r?zr({facetId:p,facetValue:x[0]}):Yt({facetId:p,facetValue:x[0]}):fn()}function WR(e={},t={}){return kc(Ji(e),Ji(t))}function KR(e,t){return e.q!==t.q?np():e.sortCriteria!==t.sortCriteria?up():Bt(e.f,t.f)?Yi(e.f,t.f):Bt(e.fExcluded,t.fExcluded)?Yi(e.fExcluded,t.fExcluded,!0):Bt(e.cf,t.cf)?Yi(e.cf,t.cf):Bt(e.af,t.af)?Yi(e.af,t.af):Bt(e.nf,t.nf)?Yi(Ji(e.nf),Ji(t.nf)):Bt(e.df,t.df)?Yi(Ji(e.df),Ji(t.df)):xa()}function Bt(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Yi(e={},t={},r=!1){let n=Object.keys(e),o=Object.keys(t),a=n.filter(A=>!o.includes(A));if(a.length){let A=a[0];return e[A].length>1?nt():Kr()}if(o.filter(A=>!n.includes(A)).length)return r?Sr():Ue();let p=o.find(A=>t[A].filter(C=>e[A].includes(C)));if(!p)return xa();let m=e[p],f=t[p];return f.filter(A=>!m.includes(A)).length?r?Sr():Ue():m.filter(A=>!f.includes(A)).length?Kr():xa()}function Ji(e={}){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(n=>`${n.start}..${n.end}`)),t}l();s();u();c();l();s();u();c();function YR(e){return{q:Qe().q,enableQuerySyntax:Qe().enableQuerySyntax,aq:e.advancedSearchQueries?.defaultFilters.aq??Wt().defaultFilters.aq,cq:e.advancedSearchQueries?.defaultFilters.cq??Wt().defaultFilters.cq,firstResult:Dt().firstResult,numberOfResults:e.pagination?.defaultNumberOfResults??Dt().defaultNumberOfResults,sortCriteria:Et(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:hn(),sf:{},tab:"",af:{},mnf:{}}}var ZV=new ue({parameters:new B({options:{required:!0},values:Uu})});function XR(e,t){let{dispatch:r}=e,n=ee(e);Le(e,ZV,t.initialState,"buildSearchParameterManager");let o=JR(e.state.tabSet,t.initialState.parameters);return r(Fe(o)),{...n,synchronize(a){let d=JR(e.state.tabSet,bp(e,a));r(Fe(d))},get state(){return{parameters:Bg(e)}}}}function bp(e,t){return{...YR(e.state),...t}}function JR(e,t){if(t.tab&&e){let r=Object.values(e).some(o=>o.id===t.tab),n=Object.values(e).find(o=>o.isActive);if(!r&&n)return{...t,tab:n.id};if(!r)return{...t,tab:""}}return t}function Bg(e){let t=e.state;return{...yg(t.query,r=>r.q,Qe().q),...PA(t.tabSet,r=>{let n=Object.values(r??{}).find(o=>o.isActive);return n?n.id:Object.keys(r??{})[0]},t.tabSet?Object.keys(t.tabSet)[0]:""),...Cg(t.sortCriteria,r=>r,Et()),...Eo(t.facetSet,qc(t),eN,"f"),...Eo(t.facetSet,qc(t),tN,"fExcluded"),...rN(t),...nN(t),...oN(t),...aN(t)}}function qc(e){return t=>e.facetOptions?.facets[t]?.enabled??!0}function eN(e){return e.currentValues.filter(t=>t.state==="selected").map(t=>t.value)}function ZR(e){return e.currentValues.filter(t=>t.state==="selected")}function tN(e){return e.currentValues.filter(t=>t.state==="excluded").map(t=>t.value)}function rN(e){return Eo(e.categoryFacetSet,qc(e),t=>dt(t.currentValues).map(r=>r.value),"cf")}function nN(e){return Eo(e.numericFacetSet,qc(e),ZR,"nf")}function oN(e){return Eo(e.dateFacetSet,qc(e),ZR,"df")}function aN(e){let t=e.automaticFacetSet?.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:o}])=>{let a=iN(o);return a.length?{[n]:a}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function iN(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function vp(e,t){let{dispatch:r}=e,n=XR(e,t);return{...n,synchronize(o){let a=eb(e),d=bp(e,a),p=bp(e,o);bc(d,p)||(n.synchronize(o),r(G({legacy:zR(d,p),next:KR(d,p)})))},get state(){return{parameters:eb(e)}}}}function eb(e){let t=e.state;return{...Bg(e),...sN(t),...cN(t),...uN(t),...lN(t),...dN(t),...fN(t),...pN(t)}}function sN(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==Qe().enableQuerySyntax?{enableQuerySyntax:t}:{}}function cN(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function uN(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function lN(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Dt().firstResult?{firstResult:t}:{}}function dN(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function pN(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,n])=>{let o=mN(n.values);return o.length?{[r]:o}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{sf:t}:{}}function mN(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function fN(e){if(e.debug===void 0)return{};let t=e.debug;return t!==hn()?{debug:t}:{}}l();s();u();c();l();s();u();c();var rb="..",Ug="...",gN=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,SN={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0},Pp="&",Dc="=";function Vc(){return{serialize:CN(xN),deserialize:PN}}function Nc(e){return e in SN}function hN(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,debug:!0,tab:!0}}function yN(e){let r=e in{nf:!0,df:!0,mnf:!0};return Nc(e)&&r}function nb(e){return hN(e)||Nc(e)}var CN=e=>t=>Object.entries(t).map(e).filter(r=>r).join(Pp);function xN(e){let[t,r]=e;return nb(t)?Nc(t)&&!yN(t)?FN(r)?bN(t,r):"":t==="nf"||t==="df"?RN(r)?vN(t,r):"":AN(t,r):""}function AN(e,t){return`${e}${Dc}${encodeURIComponent(t)}`}function FN(e){return _g(e)?ob(e,r=>typeof r=="string"):!1}function RN(e){return _g(e)?ob(e,r=>_g(r)&&"start"in r&&"end"in r):!1}function _g(e){return!!(e&&typeof e=="object")}function ob(e,t){return Object.entries(e).filter(n=>{let o=n[1];return!Array.isArray(o)||!o.every(t)}).length===0}function bN(e,t){return Object.entries(t).map(([r,n])=>`${e}-${r}${Dc}${n.map(o=>encodeURIComponent(o)).join(",")}`).join(Pp)}function vN(e,t){return Object.entries(t).map(([r,n])=>{let o=n.map(({start:a,end:d,endInclusive:p})=>`${a}${p?Ug:rb}${d}`).join(",");return`${e}-${r}${Dc}${o}`}).join(Pp)}function PN(e){return e.split(Pp).map(n=>wN(n)).map(n=>EN(n)).filter(kN).map(n=>qN(n)).reduce((n,o)=>{let[a,d]=o;if(Nc(a)){let p={...n[a],...d};return{...n,[a]:p}}return{...n,[a]:d}},{})}function wN(e){let[t,...r]=e.split(Dc),n=r.join(Dc);return[t,n]}function EN(e,t=gN){let[r,n]=e,o=t.exec(r);if(!o)return e;let a=o[1],d=o[2],p=n.split(","),m=IN(a,p),f={[d]:m};return[a,JSON.stringify(f)]}function IN(e,t){return e==="nf"||e==="mnf"?TN(t,"selected"):e==="df"?ON(t,"selected"):t}function TN(e,t){let r=[];for(let n of e){let{startAsString:o,endAsString:a,isEndInclusive:d}=ab(n),p=parseFloat(o),m=parseFloat(a);!Number.isFinite(p)||!Number.isFinite(m)||r.push(Pi({start:p,end:m,state:t,endInclusive:d}))}return r}function tb(e){try{return aC(e)?(Wu(e,La),!0):ir(e)?(Fn(e),!0):!1}catch{return!1}}function ON(e,t){let r=[];for(let n of e){let{isEndInclusive:o,startAsString:a,endAsString:d}=ab(n);!tb(a)||!tb(d)||r.push(Wn({start:a,end:d,state:t,endInclusive:o}))}return r}function kN(e){let t=nb(e[0]),r=e.length===2;return t&&r}function qN(e,t=!0){let[r,n]=e;return r==="enableQuerySyntax"?[r,n==="true"]:r==="debug"?[r,n==="true"]:r==="firstResult"?[r,parseInt(n)]:r==="numberOfResults"?[r,parseInt(n)]:Nc(r)?[r,DN(n)]:[r,t?decodeURIComponent(n):n]}function DN(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(n=>{let[o,a]=n;r[o]=a.map(d=>Wo(d)?decodeURIComponent(d):d)}),r}function ab(e){let t=e.indexOf(Ug)!==-1,[r,n]=e.split(t?Ug:rb);return{isEndInclusive:t,startAsString:r,endAsString:n}}var VN=new ue({fragment:new D});function ib(e,t){let r;function n(){r=e.state.search.requestId}function o(){return r!==e.state.search.requestId}if(!MN(e))throw W;Le(e,VN,t.initialState,"buildUrlManager");let a=ee(e),d=t.initialState.fragment;n();let p=vp(e,{initialState:{parameters:wp(d)}});return{...a,subscribe(m){let f=()=>{let h=this.state.fragment;!NN(d,h)&&o()&&(d=h,m()),n()};return f(),e.subscribe(f)},get state(){return{fragment:Vc().serialize(p.state.parameters)}},synchronize(m){d=m;let f=wp(m);p.synchronize(f)}}}function NN(e,t){if(e===t)return!0;let r=wp(e),n=wp(t);return bc(r,n)}function wp(e){return Vc().deserialize(e)}function MN(e){return e.addReducers({configuration:ae}),!0}l();s();u();c();function sb(e){return ki(e)}l();s();u();c();l();s();u();c();l();s();u();c();async function Ep(e,t){let{search:r,accessToken:n,organizationId:o}=e.configuration,a=e.query?.q||"";return{url:r.apiBaseUrl??Me(e.configuration.organizationId,e.configuration.environment),accessToken:n,organizationId:o,enableNavigation:!1,q:a,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Uo=ie("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),a=await Ep(o,e),d=await t.apiClient.html(a);return _e(d)?n(d.error):{content:d.success,uniqueId:e.uniqueId}}),Xi=v("resultPreview/next"),Zi=v("resultPreview/previous"),es=v("resultPreview/prepare",e=>I(e,{results:new te({required:!0})})),cb=2048,ts=ie("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let n=t(),o=th(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return o?.length>cb&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${cb} characters.`),{contentURL:o}});l();s();u();c();var ub=e=>K({prefix:"analytics/resultPreview/open",__legacy__getBuilder:(t,r)=>{pt(e);let n=Be(e,r),o=we(e);return t.makeDocumentQuickview(n,o)},analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Be(e,t),n=we(e);return{responseId:e.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});l();s();u();c();l();s();u();c();l();s();u();c();function jg(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var $g=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:o}=jg();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=o},Hg=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),Ip=re(jg(),e=>{e.addCase(Uo.pending,t=>{t.isLoading=!0}).addCase(Uo.fulfilled,(t,r)=>{let{content:n,uniqueId:o}=r.payload;t.position=t.resultsWithPreview.indexOf(o),t.content=n,t.uniqueId=o,t.isLoading=!1}).addCase(G.fulfilled,(t,r)=>{$g(t),t.resultsWithPreview=Hg(r.payload.response.results)}).addCase(In.fulfilled,(t,r)=>{$g(t),t.resultsWithPreview=t.resultsWithPreview.concat(Hg(r.payload.response.results))}).addCase(cr.fulfilled,$g).addCase(es,(t,r)=>{t.resultsWithPreview=Hg(r.payload.results)}).addCase(Xi,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(Zi,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(ts.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function lb(e,t,r,n,o){if(!LN(e))throw W;let{dispatch:a}=e,d=()=>e.state,p=ee(e),{result:m,maximumPreviewSize:f}=t.options,h=()=>{let{resultsWithPreview:A,position:C}=d().resultPreview;return A[C]},x=A=>{a(ts({uniqueId:A,requestedOutputSize:f,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||a(Uo({uniqueId:A,requestedOutputSize:f})),o&&o()};return{...p,fetchResultContent(){x(m.uniqueId)},next(){a(Xi()),x(h())},previous(){a(Zi()),x(h())},get state(){let A=d(),C=m.hasHtmlVersion,F=A.resultPreview,w=m.uniqueId===F.uniqueId?F.content:"",b=F.isLoading,R=F.contentURL,E=h();return{content:w,resultHasPreview:C,isLoading:b,contentURL:R,currentResultUniqueId:E}}}}function LN(e){return e.addReducers({configuration:ae,resultPreview:Ip}),!0}function db(e,t){if(!QN(e))throw W;let{dispatch:r}=e,n=()=>e.state,o=()=>n().search.results,p=lb(e,t,Ep,"/html",()=>{e.dispatch(ub(t.options.result))});return r(es({results:o()})),{...p,get state(){return{...p.state,currentResult:o().findIndex(m=>m.uniqueId===p.state.currentResultUniqueId)+1,totalResults:o().length}}}}function QN(e){return e.addReducers({search:ce}),!0}l();s();u();c();l();s();u();c();var BN=e=>K("analytics/folding/showMore",(t,r)=>(pt(e),t.makeShowMoreFoldedResults(Be(e,r),we(e)))),UN=()=>K("analytics/folding/showLess",e=>e.makeShowLessFoldedResults()),pb={logShowMoreFoldedResults:BN,logShowLessFoldedResults:UN};l();s();u();c();l();s();u();c();function _N(e,t){return e.raw[t.collection]}function Gg(e,t){return e.raw[t.parent]}function Mc(e,t){let r=e.raw[t.child];return jc(r)?r[0]:r}function jN(e,t){return(e||t)!==void 0&&e===t}function fb(e,t,r,n=[]){let o=Mc(e,r);return o?n.indexOf(o)!==-1?[]:t.filter(a=>{let d=Mc(a,r)===Mc(e,r);return Gg(a,r)===o&&!d}).map(a=>{let d={...a,searchUid:e.searchUid};return{result:d,children:fb(d,t,r,[...n,o])}}):[]}function $N(e,t){return e.find(r=>{let n=Gg(r,t)===void 0,o=jN(Gg(r,t),Mc(r,t));return n||o})}function gb(e){return e.parentResult?gb(e.parentResult):e}function HN(e,t,r,n){let o=Du(e),d={...n??$N(o,t)??gb(e),searchUid:r};return{result:d,children:fb(d,o,t),moreResultsAvailable:e.totalNumberOfChildResults>1,isLoadingMoreResults:!1}}function Tp(e,t,r,n){let o={};return e.forEach(a=>{let d=_N(a,t);d&&(!Mc(a,t)&&!a.parentResult||(o[d]=HN(a,t,r,n)))}),o}function mb(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var Op=re(Dl(),e=>e.addCase(G.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Tp(r.response.results,t.fields,r.response.searchUid):{}}).addCase(cr.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Tp(r.response.results,t.fields,r.response.searchUid):{}}).addCase(In.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Tp(r.response.results,t.fields,r.response.searchUid)}:{}}).addCase(Dn,(t,{payload:r})=>t.enabled?t:{enabled:!0,collections:{},fields:{collection:r.collectionField??t.fields.collection,parent:r.parentField??t.fields.parent,child:r.childField??t.fields.child},filterFieldRange:r.numberOfFoldedResults??t.filterFieldRange}).addCase(Vn.pending,(t,{meta:r})=>{let n=r.arg;mb(t,n).isLoadingMoreResults=!0}).addCase(Vn.rejected,(t,{meta:r})=>{let n=r.arg;mb(t,n).isLoadingMoreResults=!1}).addCase(Vn.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:o,searchUid:a}})=>{let d=Tp(n,t.fields,a,o);if(!d||!d[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=d[r],t.collections[r].moreResultsAvailable=!1}));var GN=new ue(pg);function Sb(e,t,r){if(!WN(e))throw W;let n=tp(e,t),{dispatch:o}=e,a=()=>e.state,d=t.options?.folding?Pe(e,GN,t.options.folding,"buildFoldedResultList"):{};return o(Dn({...d})),{...n,loadCollection:p=>{o(t.loadCollectionActionCreator(p.result.raw[e.state.folding.fields.collection])),o(r.logShowMoreFoldedResults(p.result))},logShowMoreFoldedResults:p=>{o(r.logShowMoreFoldedResults(p))},logShowLessFoldedResults:()=>{o(r.logShowLessFoldedResults())},findResultById(p){return Wg(this.state.results,m=>m.result.uniqueId===p.result.uniqueId)},findResultByCollection(p){return Wg(this.state.results,m=>m.result.raw.foldingcollection===p.result.raw.foldingcollection)},get state(){let p=a();return{...n.state,results:n.state.results.map(m=>{let f=m.raw[p.folding.fields.collection];return!f||!p.folding.collections[f]?{result:m,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:p.folding.collections[f]})}}}}function WN(e){return e.addReducers({search:ce,configuration:Tl,folding:Op,query:gt}),!0}function Wg(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let o=Wg(n.children,t);if(o)return o}}return null}function hb(e,t={}){let r=Sb(e,{...t,loadCollectionActionCreator:Vn,fetchMoreResultsActionCreator:In},pb);return{...r,get state(){return r.state}}}l();s();u();c();l();s();u();c();l();s();u();c();function yb(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function Cb(e,t){let r=[],n=[],o=[],a=[];return t.forEach(d=>{switch(d.type){case"redirect":r.push(d.content);break;case"query":n.push(d.content);break;case"execute":o.push({functionName:d.content.name,params:d.content.params});break;case"notify":a.push(d.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=o,e.notifications=a,e}function xb(e,t){return e.queryModification={...t,queryToIgnore:""},e}function Ab(e,t){return e.queryModification.queryToIgnore=t,e}l();s();u();c();var Fb=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var ro=re(Fb(),e=>e.addCase(G.pending,yb).addCase(G.fulfilled,(t,r)=>Cb(t,r.payload.response.triggers)).addCase(_a,(t,r)=>xb(t,r.payload)).addCase(bn,(t,r)=>Ab(t,r.payload)));function Rb(e){if(!zN(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,o=n().triggers.redirectTo;return{...t,subscribe(a){let d=()=>{let p=o!==this.state.redirectTo;o=this.state.redirectTo,p&&this.state.redirectTo&&(a(),r(sl()))};return d(),e.subscribe(d)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function zN(e){return e.addReducers({triggers:ro}),!0}l();s();u();c();function bb(e){if(!KN(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,o=()=>n().triggers.queryModification.newQuery,a=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:o(),originalQuery:a(),wasQueryModified:o()!==""}},undo(){r(bn(o())),r(tt({q:a()})),r(G({legacy:al({undoneQuery:o()})}))}}}function KN(e){return e.addReducers({triggers:ro,query:gt}),!0}l();s();u();c();function vb(e){if(!YN(e))throw W;let t=ee(e),{dispatch:r}=e,n=()=>e.state,o=n().triggers.executions;return{...t,subscribe(a){let d=()=>{let p=!Lo(this.state.executions,o,(m,f)=>m.functionName===f.functionName&&Lo(m.params,f.params));o=this.state.executions,p&&this.state.executions.length&&(a(),r(cl()))};return d(),e.subscribe(d)},get state(){return{executions:n().triggers.executions}}}}function YN(e){return e.addReducers({triggers:ro}),!0}l();s();u();c();l();s();u();c();function Pb(e,t){let r=t.options.logNotifyTriggerActionCreator;if(!JN(e))throw W;let n=ee(e),{dispatch:o}=e,a=()=>e.state,d=a().triggers.notifications;return{...n,subscribe(p){let m=()=>{let f=!Lo(d,this.state.notifications);d=this.state.notifications,f&&(p(),o(r()))};return m(),e.subscribe(m)},get state(){return{notifications:a().triggers.notifications}}}}function JN(e){return e.addReducers({triggers:ro}),!0}function wb(e){return Pb(e,{options:{logNotifyTriggerActionCreator:il}})}l();s();u();c();l();s();u();c();l();s();u();c();var kp=()=>new B({values:{questionAnswerId:H},options:{required:!0}}),zg=()=>new B({values:{linkText:be,linkURL:be},options:{required:!0}});function rs(e){return I(e,kp())}l();s();u();c();function Ne(e,t){let r=t??e.search?.questionAnswer?.documentId;return r&&e.search&&EC(e,r.contentIdKey,r.contentIdValue)}function Xt(e,t){let r=e.questionAnswering?.relatedQuestions.findIndex(o=>o.questionAnswerId===t)??-1;return r===-1?null:e.search?.questionAnswer?.relatedQuestions?.[r]??null}var Kg=()=>K({prefix:"analytics/smartSnippet/expand",__legacy__getBuilder:e=>e.makeExpandSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=we(t),n=e.search?.response.searchUid;if(n)return{action:"expand",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),Yg=()=>K({prefix:"analytics/smartSnippet/collapse",__legacy__getBuilder:e=>e.makeCollapseSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=we(t),n=e.search?.response.searchUid;if(n)return{action:"collapse",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),Jg=()=>K({prefix:"analytics/smartSnippet/like",__legacy__getBuilder:e=>e.makeLikeSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=we(t),n=e.search?.response.searchUid;if(n)return{action:"like",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),Xg=()=>K({prefix:"analytics/smartSnippet/dislike",__legacy__getBuilder:e=>e.makeDislikeSmartSnippet(),analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:e=>{let t=Ne(e),r=we(t),n=e.search?.response.searchUid;if(n)return{action:"dislike",snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),Zg=()=>K({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(e,t)=>{let r=Ne(t);return e.makeOpenSmartSnippetSource(Be(r,t),we(r))},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:e=>{let t=Ne(e),r=we(t),n=e.search?.response.searchUid;if(n)return{snippetType:"SmartSnippet",responseId:n,itemMetadata:{uniqueFieldName:r.contentIDKey,uniqueFieldValue:r.contentIDValue,title:t.title,url:t.clickUri}}}}),Lc=e=>K({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(t,r)=>{I(e,zg());let n=Ne(r);return n?t.makeOpenSmartSnippetInlineLink(Be(n,r),{...we(n),...e}):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:t=>{let r=Ne(t),n=we(r),o=t.search?.response.searchUid;if(o)return{snippetType:"SmartSnippet",responseId:o,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri}}}}),eS=()=>K("analytics/smartSnippet/feedbackModal/open",e=>e.makeOpenSmartSnippetFeedbackModal()),tS=()=>K("analytics/smartSnippet/feedbackModal/close",e=>e.makeCloseSmartSnippetFeedbackModal()),XN={does_not_answer:"doesNotAnswer",partially_answers:"partiallyAnswers",was_not_a_question:"wasNotAQuestion"},rS=e=>K({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason(e),analyticsType:"SmartSnippets.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=Ne(t),n=we(r),o=t.search?.response.searchUid;if(o)return{responseId:o,snippetType:"SmartSnippet",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri},reason:XN[e]}}}),nS=e=>K({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason("other",e),analyticsType:"SmartSnippets.SubmitFeedback",analyticsPayloadBuilder:t=>{let r=Ne(t),n=we(r),o=t.search?.response.searchUid;if(o)return{responseId:o,snippetType:"SmartSnippet",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.title,url:r.clickUri},reason:"other",additionalNotes:e}}}),oS=e=>K({prefix:"analytics/smartSnippetSuggestion/expand",__legacy__getBuilder:(t,r)=>{rs(e);let n=Xt(r,e.questionAnswerId);return n?t.makeExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:t=>{let r=Xt(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let o=Ne(t,r.documentId);return{action:"expand",responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:o?.title,url:o?.clickUri}}}}}),aS=e=>K({prefix:"analytics/smartSnippetSuggestion/collapse",__legacy__getBuilder:(t,r)=>{rs(e);let n=Xt(r,e.questionAnswerId);return n?t.makeCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"SmartSnippets.AnswerAction",analyticsPayloadBuilder:t=>{let r=Xt(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let o=Ne(t,r.documentId);return{action:"collapse",responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:o?.title,url:o?.clickUri}}}}}),Qc=e=>K({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(t,r)=>{I(e,kp());let n=Xt(r,e.questionAnswerId);if(!n)return null;let o=Ne(r,n.documentId);return o?t.makeOpenSmartSnippetSuggestionSource(Be(o,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:t=>{let r=Xt(t,e.questionAnswerId),n=t.search?.response.searchUid;if(n&&r){let o=Ne(t,r.documentId);return{responseId:n,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:r.documentId.contentIdKey,uniqueFieldValue:r.documentId.contentIdValue,title:o?.title,url:o?.clickUri}}}}}),qp=(e,t)=>K({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(r,n)=>{I(e,kp()),I(t,zg());let o=Xt(n,e.questionAnswerId);if(!o)return null;let a=Ne(n,o.documentId);return a?r.makeOpenSmartSnippetSuggestionInlineLink(Be(a,n),{question:o.question,answerSnippet:o.answerSnippet,documentId:o.documentId,linkText:t.linkText,linkURL:t.linkURL}):null},analyticsType:"SmartSnippets.SourceClick",analyticsPayloadBuilder:r=>{let n=Xt(r,e.questionAnswerId),o=r.search?.response.searchUid;if(o&&n){let a=Ne(r,n.documentId);return{responseId:o,snippetType:"SmartSnippetSuggestion",itemMetadata:{uniqueFieldName:n.documentId.contentIdKey,uniqueFieldValue:n.documentId.contentIdValue,title:a?.title,url:a?.clickUri}}}}}),Dp={logExpandSmartSnippet:Kg,logCollapseSmartSnippet:Yg,logLikeSmartSnippet:Jg,logDislikeSmartSnippet:Xg,logOpenSmartSnippetSource:Zg,logOpenSmartSnippetInlineLink:Lc,logOpenSmartSnippetFeedbackModal:eS,logCloseSmartSnippetFeedbackModal:tS,logSmartSnippetFeedback:rS,logSmartSnippetDetailedFeedback:nS,logExpandSmartSnippetSuggestion:oS,logCollapseSmartSnippetSuggestion:aS,logOpenSmartSnippetSuggestionSource:Qc};l();s();u();c();l();s();u();c();var ns=v("smartSnippet/expand"),os=v("smartSnippet/collapse"),as=v("smartSnippet/like"),is=v("smartSnippet/dislike"),ss=v("smartSnippet/feedbackModal/open"),no=v("smartSnippet/feedbackModal/close"),cs=v("smartSnippet/related/expand",e=>rs(e)),us=v("smartSnippet/related/collapse",e=>rs(e));l();s();u();c();l();s();u();c();var iS=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var Eb=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function Ib({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Ko({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function ZN(e,t){let r=Ib(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Nr=re(iS(),e=>e.addCase(ns,t=>{t.expanded=!0}).addCase(os,t=>{t.expanded=!1}).addCase(as,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(is,t=>{t.liked=!1,t.disliked=!0}).addCase(ss,t=>{t.feedbackModalOpen=!0}).addCase(no,t=>{t.feedbackModalOpen=!1}).addCase(G.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((a,d)=>ZN(a,t.relatedQuestions[d])),o=Ib(r.payload.response.questionAnswer);return t.questionAnswerId===o?{...t,relatedQuestions:n}:{...iS(),relatedQuestions:n,questionAnswerId:o}}).addCase(cs,(t,r)=>{let n=Eb(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(us,(t,r)=>{let n=Eb(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)}));function Tb(e,t,r){if(!eM(e))throw W;let n=ee(e),o=()=>e.state,a=()=>Ne(o()),d=null,p=ft(e,{options:{selectionDelay:r?.options?.selectionDelay}},()=>{let m=a();if(!m){d=null;return}let{searchResponseId:f}=o().search;d!==f&&(d=f,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(Qt(m)))});return{...n,get state(){let m=o();return{question:m.search.questionAnswer.question,answer:m.search.questionAnswer.answerSnippet,documentId:m.search.questionAnswer.documentId,expanded:m.questionAnswering.expanded,answerFound:m.search.questionAnswer.answerSnippet!=="",liked:m.questionAnswering.liked,disliked:m.questionAnswering.disliked,feedbackModalOpen:m.questionAnswering.feedbackModalOpen,source:a()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(ns())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(os())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(as())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(is())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(ss())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(no())},sendFeedback(m){e.dispatch(t.logSmartSnippetFeedback(m)),e.dispatch(no())},sendDetailedFeedback(m){e.dispatch(t.logSmartSnippetDetailedFeedback(m)),e.dispatch(no())},selectSource(){p.select()},beginDelayedSelectSource(){p.beginDelayedSelect()},cancelPendingSelectSource(){p.cancelPendingSelect()}}}function eM(e){return e.addReducers({search:ce,questionAnswering:Nr}),!0}l();s();u();c();function Vp(e,t){if(!tM(e))throw W;let r=()=>e.state,n=new Set,o=h=>n.has(h)?!0:(n.add(h),!1),a=null,d=h=>{a!==h&&(a=h,m={},n.clear())},p=(h,x,A)=>ft(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{o(x)||e.dispatch(A?qp({questionAnswerId:A},h):Lc(h))}),m={},f=(h,x)=>{let{searchResponseId:A}=r().search;d(A);let C=Ko({...h,questionAnswerId:x});return C in m||(m[C]=p(h,C,x)),m[C]};return{selectInlineLink(h,x){f(h,x)?.select()},beginDelayedSelectInlineLink(h,x){f(h,x)?.beginDelayedSelect()},cancelPendingSelectInlineLink(h,x){f(h,x)?.cancelPendingSelect()}}}function tM(e){return e.addReducers({search:ce,questionAnswering:Nr}),!0}function Ob(e,t){On(e.state.configuration.analytics.analyticsMode);let r=Tb(e,Dp,t),n=Vp(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){n.selectInlineLink(o)},beginDelayedSelectInlineLink(o){n.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){n.cancelPendingSelectInlineLink(o)}}}l();s();u();c();l();s();u();c();function kb(e,t){if(!rM(e))throw W;let r=ee(e),n=()=>e.state,o=a=>{let{contentIdKey:d,contentIdValue:p}=a;return e.state.search.results.find(m=>Tn(m,d)===p)};return{...r,get state(){let a=n();return{questions:a.search.questionAnswer.relatedQuestions.map((d,p)=>({question:d.question,answer:d.answerSnippet,documentId:d.documentId,questionAnswerId:a.questionAnswering.relatedQuestions[p].questionAnswerId,expanded:a.questionAnswering.relatedQuestions[p].expanded,source:o(d.documentId)}))}},expand(a){let d={questionAnswerId:a};e.dispatch(t.logExpandSmartSnippetSuggestion(d)),e.dispatch(cs(d))},collapse(a){let d={questionAnswerId:a};e.dispatch(t.logCollapseSmartSnippetSuggestion(d)),e.dispatch(us(d))}}}function rM(e){return e.addReducers({search:ce,questionAnswering:Nr}),!0}l();s();u();c();function qb(e,t){if(!nM(e))throw W;let r=()=>e.state,n=x=>{let A=r(),C=Xt(A,x);return C?Ne(A,C.documentId):null},o=new Set,a=x=>o.has(x)?!0:(o.add(x),!1),d=null,p=x=>{d!==x&&(d=x,f={},o.clear())},m=(x,A)=>ft(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{a(A)||(e.dispatch(Qc({questionAnswerId:A})),e.dispatch(Qt(x)))}),f={},h=x=>{let{searchResponseId:A}=r().search;p(A);let C=n(x);return C?(x in f||(f[x]=m(C,x)),f[x]):null};return{selectSource(x){h(x)?.select()},beginDelayedSelectSource(x){h(x)?.beginDelayedSelect()},cancelPendingSelectSource(x){h(x)?.cancelPendingSelect()}}}function nM(e){return e.addReducers({search:ce,questionAnswering:Nr}),!0}function Db(e,t){On(e.state.configuration.analytics.analyticsMode);let r=kb(e,Dp),n=Vp(e,{options:{selectionDelay:t?.options?.selectionDelay}}),o=qb(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectSource(a){o.selectSource(a)},beginDelayedSelectSource(a){o.beginDelayedSelectSource(a)},cancelPendingSelectSource(a){o.cancelPendingSelectSource(a)},selectInlineLink(a,d){n.selectInlineLink(d,a)},beginDelayedSelectInlineLink(a,d){n.beginDelayedSelectInlineLink(d,a)},cancelPendingSelectInlineLink(a,d){n.cancelPendingSelectInlineLink(d,a)}}}l();s();u();c();l();s();u();c();var oM={queries:new te({required:!0,each:new D({emptyAllowed:!1})}),maxLength:new J({required:!0,min:1,default:10})},_o=v("recentQueries/registerRecentQueries",e=>I(e,oM)),ls=v("recentQueries/clearRecentQueries");l();s();u();c();var Vb=()=>K("analytics/recentQueries/clear",e=>e.makeClearRecentQueries()),Nb=()=>K("analytics/recentQueries/click",e=>e.makeRecentQueryClick());l();s();u();c();l();s();u();c();function Mb(){return{queries:[],maxLength:10}}var Np=re(Mb(),e=>{e.addCase(_o,aM).addCase(ls,iM).addCase(G.fulfilled,(t,r)=>{let n=r.payload.queryExecuted,o=r.payload.response.results;!n.length||!o.length||sM(n,t)})});function aM(e,t){e.queries=Array.from(new Set(t.payload.queries.map(r=>r.trim().toLowerCase()))).slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function iM(e){e.queries=[]}function sM(e,t){let r=e.trim().toLowerCase();if(r==="")return;let n=Array.from(new Set(t.queries.filter(o=>o.trim().toLowerCase()!==r))).slice(0,t.maxLength-1);t.queries=[r,...n]}var cM={queries:[]},uM={maxLength:10,clearFilters:!0},lM=new ue({queries:new te({required:!0})}),dM=new ue({maxLength:new J({required:!0,min:1}),clearFilters:new oe});function pM(e,t){Pe(e,dM,t?.options,"buildRecentQueriesList"),Le(e,lM,t?.initialState,"buildRecentQueriesList")}function Lb(e,t){if(!mM(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,a={...uM,...t?.options},d={...cM,...t?.initialState};pM(e,{options:a,initialState:d});let p={queries:d.queries,maxLength:a.maxLength};return n(_o(p)),{...r,get state(){let m=o();return{...m.recentQueries,analyticsEnabled:m.configuration.analytics.enabled}},clear(){n(Vb()),n(ls())},updateRecentQueries(m){let f=new te({required:!0,each:new D({required:!0}),min:1}).validate(m);if(f)throw new Error(f);n(_o({queries:m,maxLength:a.maxLength}))},executeRecentQuery(m){let f=new J({required:!0,min:0,max:this.state.queries.length}).validate(m);if(f)throw new Error(f);let h={q:this.state.queries[m],clearFilters:a.clearFilters};_c(e.state.query?.enableQuerySyntax)&&(h.enableQuerySyntax=e.state.query.enableQuerySyntax),n(Ga(h)),n(G({legacy:Nb()}))}}}function mM(e){return e.addReducers({search:ce,recentQueries:Np}),!0}l();s();u();c();l();s();u();c();var Qb=e=>K("analytics/recentResults/click",(t,r)=>(pt(e),t.makeRecentResultClick(Be(e,r),we(e)))),Bb=()=>K("analytics/recentResults/clear",e=>e.makeClearRecentResults());l();s();u();c();l();s();u();c();function Ub(){return{results:[],maxLength:10}}var Mp=re(Ub(),e=>{e.addCase(qi,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Di,t=>{t.results=[]}).addCase(Qt,(t,r)=>{let n=r.payload;t.results=t.results.filter(a=>a.uniqueId!==n.uniqueId);let o=t.results.slice(0,t.maxLength-1);t.results=[n,...o]})});var fM={initialState:{results:[]},options:{maxLength:10}},gM=new ue({results:new te({required:!0})}),SM=new ue({maxLength:new J({required:!0,min:1})});function hM(e,t){Pe(e,SM,t?.options,"buildRecentResultsList"),Le(e,gM,t?.initialState,"buildRecentResultsList")}function _b(e,t){if(!yM(e))throw W;let r=ee(e),{dispatch:n}=e,o=()=>e.state,a={...fM,...t};hM(e,a);let d={results:a.initialState.results,maxLength:a.options.maxLength};return n(qi(d)),{...r,get state(){return o().recentResults},clear(){n(Bb()),n(Di())}}}function yM(e){return e.addReducers({recentResults:Mp}),!0}l();s();u();c();function jb(e,t){return ft(e,t,()=>e.dispatch(Qb(t.options.result)))}l();s();u();c();function $b(e,t){if(!CM(e))throw W;let r=A=>e.state.facetOptions.facets[A]?.enabled??!1,n=A=>e.state.facetSet?.[A]?.request?.currentValues??e.state.categoryFacetSet?.[A]?.request?.currentValues??e.state.numericFacetSet?.[A]?.request?.currentValues??e.state.dateFacetSet?.[A]?.request?.currentValues??null,o=A=>A in e.state.facetOptions.facets,a=()=>Ko({isFacetRegistered:o(t.facetId),parentFacets:t.conditions.map(({parentFacetId:A})=>o(A)?{enabled:r(A),values:n(A)}:null)}),d=()=>{let A=a();return A===h?!1:(h=A,!0)},p=()=>t.conditions.some(A=>{if(!r(A.parentFacetId))return!1;let C=n(A.parentFacetId);return C===null?!1:A.condition(C)}),m=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([A,C])=>C.request.freezeCurrentValues&&e.dispatch(Yr({facetId:A,freezeCurrentValues:!1})))},f=()=>{if(!o(t.facetId))return;let A=r(t.facetId),C=p();A!==C&&(e.dispatch(C?rt(t.facetId):Ie(t.facetId)),m())};if(!t.conditions.length)return{stopWatching(){}};let h=a(),x=e.subscribe(()=>{d()&&f()});return f(),{stopWatching(){x()}}}function CM(e){return e.addReducers({facetOptions:He}),!0}l();s();u();c();function Hb(e,t){if(!xM(e))throw W;let{facetSearch:r,allowedValues:n,...o}=t.options.facet,a=ot(e,o);e.dispatch(Fr({...Fc,...o,facetId:a,...n&&{allowedValues:{type:"simple",values:n}}}));let d=xd(e,{options:{...r,facetId:a},select:m=>{e.dispatch(fe()),e.dispatch(G({legacy:De({facetId:a,facetValue:m.rawValue}),next:Ue()}))},exclude:m=>{e.dispatch(fe()),e.dispatch(G({legacy:Ft({facetId:a,facetValue:m.rawValue}),next:Sr()}))},isForFieldSuggestions:!0,executeFacetSearchActionCreator:je,executeFieldSuggestActionCreator:fr});return{...ee(e),...d,updateText:function(m){d.updateText(m),d.search()},get state(){return d.state}}}function xM(e){return e.addReducers({facetSet:Or,configuration:ae,facetSearchSet:bi,search:ce}),!0}l();s();u();c();function Gb(e,t){if(!AM(e))throw W;let{facetSearch:r,...n}=t.options.facet,o=ot(e,n);e.dispatch(dr({...Sc,...n,facetId:o}));let a=md(e,{options:{...r,facetId:o},executeFacetSearchActionCreator:je,executeFieldSuggestActionCreator:fr,select:p=>{e.dispatch(fe()),e.dispatch(G({legacy:De({facetId:o,facetValue:p.rawValue}),next:Ue()}))},isForFieldSuggestions:!0});return{...ee(e),...a,updateText:function(p){a.updateText(p),a.search()},get state(){return a.state}}}function AM(e){return e.addReducers({categoryFacetSet:mr,configuration:ae,categoryFacetSearchSet:Si,search:ce}),!0}l();s();u();c();l();s();u();c();var zb=re(ua(),e=>{e.addCase(G.fulfilled,(t,r)=>{t.set={},r.payload.response.generateAutomaticFacets?.facets?.forEach(o=>{t.set[o.field]={response:o}})}).addCase(Yd,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(Yn,(t,r)=>{let{field:n,selection:o}=r.payload,a=t.set[n]?.response;if(!a)return;let d=a.values.find(m=>m.value===o.value);if(!d)return;let p=d.state==="selected";d.state=p?"idle":"selected"}).addCase(Jd,(t,r)=>{let n=r.payload,o=t.set[n]?.response;if(o)for(let a of o.values)a.state="idle"}).addCase(Fe,(t,r)=>{let n=r.payload.af??{},o=Object.keys(t.set);for(let a in n)if(!t.set[a]){let d=FM(a),p=n[a].map(m=>Wb(m));d.values.push(...p),t.set[a]={response:d}}for(let a of o)if(!(a in n)){let d=t.set[a]?.response;for(let p of d.values)p.state="idle"}for(let a in n){let d=t.set[a]?.response;if(d){let p=d.values,m=new Set(n[a]);for(let f of p)m.has(f.value)?(f.state="selected",m.delete(f.value)):f.state="idle";for(let f of m)d.values.push(Wb(f))}}}).addCase(xe.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(qe,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(n=>n.state="idle")})})});function FM(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function Wb(e){return{value:e,state:"selected",numberOfResults:0}}l();s();u();c();function Kb(e,t){let{dispatch:r}=e,n=ee(e),{field:o}=t;return{...n,toggleSelect(a){r(Yn({field:o,selection:a})),r(G({legacy:yd(o,a),next:Cd(a)}))},deselectAll(){r(Jd(o)),r(G({legacy:$e(o),next:nt()}))},get state(){let a=e.state.automaticFacetSet?.set[o]?.response;return a?{field:a.field,label:a.label,values:a.values}:{field:"",values:[],label:""}}}}l();s();u();c();function Yb(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function Jb(e,t){if(!RM(e))throw W;let{dispatch:r}=e,n=Yb(t.options);return r(Yd(n)),{...ee(e),get state(){return{automaticFacets:e.state.search.response.generateAutomaticFacets?.facets.map(d=>Kb(e,{field:d.field}))??[]}}}}function RM(e){return e.addReducers({automaticFacetSet:zb,configuration:ae,search:ce}),!0}l();s();u();c();l();s();u();c();l();s();u();c();l();s();u();c();function sS(){return{id:"",isVisible:!0,isEnabled:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1,cannotAnswer:!1}}l();s();u();c();function Lp(e){let t=new Set;return e.filter(r=>{let n=!t.has(r.uri);return n&&t.add(r.uri),n})}var ds=re(sS(),e=>e.addCase(Ya,(t,{payload:r})=>{t.isVisible=r}).addCase(nc,(t,{payload:r})=>{t.isEnabled=r}).addCase(Cl,(t,{payload:r})=>{t.id=r.id}).addCase(oc,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(ac,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=Lp([...t.citations,...r.citations]),delete t.error}).addCase(Bf,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===im},t.citations=[],delete t.answer}).addCase(gl,t=>{t.liked=!0,t.disliked=!1}).addCase(Sl,t=>{t.liked=!1,t.disliked=!0}).addCase(hl,t=>{t.feedbackModalOpen=!0}).addCase(xl,t=>{t.feedbackModalOpen=!1}).addCase(Ja,t=>{t.feedbackSubmitted=!0}).addCase(lr,t=>({...sS(),...t.answerConfigurationId?{answerConfigurationId:t.answerConfigurationId}:{},responseFormat:t.responseFormat,fieldsToIncludeInCitations:t.fieldsToIncludeInCitations,isVisible:t.isVisible,id:t.id})).addCase(rc,(t,{payload:r})=>{t.isLoading=r}).addCase(fl,(t,{payload:r})=>{t.isStreaming=r}).addCase(sc,(t,{payload:r})=>{t.answerContentFormat=r}).addCase(Al,(t,{payload:r})=>{t.responseFormat=r}).addCase(Rl,(t,r)=>{t.fieldsToIncludeInCitations=[...new Set(t.fieldsToIncludeInCitations.concat(r.payload))]}).addCase(Uf,(t,{payload:r})=>{t.isAnswerGenerated=r}).addCase(ic,t=>{t.expanded=!0}).addCase(yl,t=>{t.expanded=!1}).addCase(Fl,(t,{payload:r})=>{t.answerConfigurationId=r}).addCase(xo,(t,{payload:r})=>{t.cannotAnswer=r}));l();s();u();c();function Qp(e,t,r={}){if(!bM(e))throw W;let{dispatch:n}=e,o=ee(e),a=()=>e.state,d=r.initialState?.isVisible;d!==void 0&&n(Ya(d));let p=r.initialState?.responseFormat;p&&n(Al(p));let m=r.fieldsToIncludeInCitations;return m&&n(Rl(m)),r.initialState?.expanded&&n(ic()),{...o,get state(){return a().generatedAnswer},like(){this.state.liked||(n(gl()),n(t.logLikeGeneratedAnswer()))},dislike(){this.state.disliked||(n(Sl()),n(t.logDislikeGeneratedAnswer()))},openFeedbackModal(){n(hl())},closeFeedbackModal(){n(xl())},sendFeedback(h){n(t.logGeneratedAnswerFeedback(h)),n(Ja())},logCitationClick(h){n(t.logOpenGeneratedAnswerSource(h))},logCitationHover(h,x){n(t.logHoverCitation(h,x))},show(){this.state.isVisible||(n(Ya(!0)),n(t.logGeneratedAnswerShowAnswers()))},hide(){this.state.isVisible&&(n(Ya(!1)),n(t.logGeneratedAnswerHideAnswers()))},expand(){this.state.expanded||(n(ic()),n(t.logGeneratedAnswerExpand()))},collapse(){this.state.expanded&&(n(yl()),n(t.logGeneratedAnswerCollapse()))},enable(){this.state.isEnabled||n(nc(!0))},disable(){this.state.isEnabled&&n(nc(!1))},logCopyToClipboard(){n(t.logCopyGeneratedAnswer())},retry(){}}}function bM(e){return e.addReducers({generatedAnswer:ds}),!0}var it={engines:{},setAbortControllerRef:(e,t)=>{it.engines[t].abortController=e},getIsStreamInProgress:e=>!it.engines[e].abortController||it.engines[e].abortController?.signal.aborted?(it.engines[e].abortController=void 0,!1):!0,subscribeToSearchRequests:e=>{let t=()=>{let r=e.state,n=r.search.requestId,o=r.search.extendedResults.generativeQuestionAnsweringId,a=r.generatedAnswer.id;if(it.engines[a].lastRequestId!==n){if(it.engines[a].lastRequestId=n,it.engines[a].abortController?.abort(),r.generatedAnswer.isEnabled===!1)return;e.dispatch(lr())}if(!it.getIsStreamInProgress(a)&&o&&o!==it.engines[a].lastStreamId){if(it.engines[a].lastStreamId=o,r.generatedAnswer.isEnabled===!1)return;e.dispatch(VC({setAbortControllerRef:p=>it.setAbortControllerRef(p,a)}))}};return e.subscribe(t)}};function Xb(e,t,r={}){if(!vM(e))throw W;let n=Qp(e,t,r),o=()=>e.state;if(e.state.generatedAnswer.id&&!it.engines[e.state.generatedAnswer.id]&&(it.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:e.state.search.requestId,lastStreamId:e.state.search.extendedResults.generativeQuestionAnsweringId??""}),!e.state.generatedAnswer.id){let d=nn("genQA-",12);e.dispatch(Cl({id:d}))}it.engines[e.state.generatedAnswer.id]||(it.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:"",lastStreamId:""}),it.subscribeToSearchRequests(e);let a=d=>"executeFirstSearchAfterStandaloneSearchBoxRedirect"in d;return{...n,get state(){return o().generatedAnswer},retry(){a(e)&&e.dispatch(G({legacy:t.logRetryGeneratedAnswer()}))}}}function vM(e){return e.addReducers({generatedAnswer:ds}),!0}l();s();u();c();l();s();u();c();var Zb=wl.injectEndpoints({endpoints:e=>({post:e.query({query:t=>({url:"/evaluations",method:"POST",body:t})})})});var Bp=e=>e==="yes"?!0:e==="no"?!1:null,PM=({answerApiState:e,feedback:t,query:r})=>({additionalNotes:t.details??null,answer:{text:e.answer,responseId:e.answerId,format:e.contentFormat??"text/plain"},correctAnswerUrl:t.documentUrl??null,details:{correctTopic:Bp(t.correctTopic),documented:Bp(t.documented),hallucinationFree:Bp(t.hallucinationFree),readable:Bp(t.readable)},helpful:t.helpful,question:r}),wM=e=>{let t,r=()=>{let n=e.state,o=sx(n);(!t||o.q.length===0)&&(t=o),o.q.length===0&&n.generatedAnswer.cannotAnswer&&e.dispatch(xo(!1)),!(o.q.length===0||o.requestId.length===0||o.requestId===t.requestId)&&(t=o,e.dispatch(lr()),e.dispatch(Jf(n,e.navigatorContext)))};e.subscribe(r)};function ev(e,t,r={}){if(!EM(e))throw W;On(e.state.configuration.analytics.analyticsMode);let{...n}=Qp(e,t,r),o=()=>e.state;return e.dispatch(Fl(r.answerConfigurationId)),wM(e),{...n,get state(){let a=Zs(e.state,e.navigatorContext).data;return{...o().generatedAnswer,answer:a?.answer,citations:Lp(a?.citations??[]),error:{message:a?.error?.message,statusCode:a?.error?.code},isLoading:a?.isLoading??!1,isStreaming:a?.isStreaming??!1,answerContentFormat:a?.contentFormat??"text/plain",isAnswerGenerated:a?.generated??!1}},retry(){e.dispatch(Jf(o(),e.navigatorContext))},reset(){e.dispatch(lr())},async sendFeedback(a){let d=PM({query:o().query.q,feedback:a,answerApiState:Zs(e.state,e.navigatorContext).data});e.dispatch(Zb.endpoints.post.initiate(d)),e.dispatch(Ja())}}}function EM(e){return e.addReducers({[Ao.reducerPath]:Ao.reducer,query:gt}),!0}function tv(e,t={}){On(e.state.configuration.analytics.analyticsMode);let r=t.answerConfigurationId?ev(e,tc,t):Xb(e,tc,t);return{...r,get state(){return r.state}}}l();s();u();c();l();s();u();c();function rv(e,t,r){let n=!1,o=()=>{n||(n=!0,e.dispatch(t.logOpenGeneratedAnswerSource(r.options.citation.id)))};return ft(e,r,()=>{o()})}function nv(e,t){return rv(e,tc,t)}l();s();u();c();l();s();u();c();l();s();u();c();var oo=()=>new D({required:!1,emptyAllowed:!0}),Up=v("advancedSearchQueries/update",e=>I(e,{aq:oo(),cq:oo(),lq:oo(),dq:oo()})),_p=v("advancedSearchQueries/register",e=>I(e,{aq:oo(),cq:oo(),lq:oo(),dq:oo()}));var ov=re(Wt(),e=>{e.addCase(Up,(t,r)=>{let{aq:n,cq:o,lq:a,dq:d}=r.payload;ze(n)||(t.aq=n,t.aqWasSet=!0),ze(o)||(t.cq=o,t.cqWasSet=!0),ze(a)||(t.lq=a,t.lqWasSet=!0),ze(d)||(t.dq=d,t.dqWasSet=!0)}).addCase(_p,(t,r)=>{let{aq:n,cq:o,lq:a,dq:d}=r.payload;ze(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),ze(o)||(t.defaultFilters.cq=o,t.cqWasSet||(t.cq=o)),ze(a)||(t.defaultFilters.lq=a,t.lqWasSet||(t.lq=a)),ze(d)||(t.defaultFilters.dq=d,t.dqWasSet||(t.dq=d))}).addCase(xe.fulfilled,(t,r)=>r.payload?.advancedSearchQueries??t).addCase(Fe,(t,r)=>{let{aq:n,cq:o}=r.payload;ze(n)||(t.aq=n,t.aqWasSet=!0),ze(o)||(t.cq=o,t.cqWasSet=!0)})});function IM(e){return e.addReducers({advancedSearchQueries:ov}),{updateAdvancedSearchQueries:Up,registerAdvancedSearchQueries:_p}}l();s();u();c();function TM(e){return e.addReducers({categoryFacetSet:mr}),{deselectAllCategoryFacetValues:pr,registerCategoryFacet:dr,toggleSelectCategoryFacetValue:Mn,updateCategoryFacetNumberOfValues:wo,updateCategoryFacetSortCriterion:pi,updateFacetAutoSelection:Ot,updateCategoryFacetBasePath:_l}}l();s();u();c();function OM(e){return e.addReducers({facetSet:Or}),{deselectAllFacetValues:Te,registerFacet:Fr,toggleSelectFacetValue:Rr,toggleExcludeFacetValue:br,updateFacetIsFieldExpanded:Do,updateFacetNumberOfValues:qo,updateFacetSortCriterion:Ai,updateFreezeCurrentValues:Yr,updateFacetAutoSelection:Ot}}l();s();u();c();function kM(e){return e.addReducers({configuration:ae}),{disableAnalytics:Aa,enableAnalytics:Fa,setOriginLevel2:Qu,setOriginLevel3:Bu,updateAnalyticsConfiguration:gn,updateBasicConfiguration:or}}l();s();u();c();function qM(e){return e.addReducers({configuration:ae,pipeline:Pa,searchHub:Ea}),{updateSearchConfiguration:Tt}}l();s();u();c();function DM(e){return e.addReducers({context:Nl}),{addContext:vo,removeContext:Po,setContext:bo}}l();s();u();c();function VM(e){return e.addReducers({dictionaryFieldContext:Ml}),{addContext:ii,removeContext:si,setContext:ai}}l();s();u();c();function NM(e){return e.addReducers({debug:ba}),{disableDebug:Ra,enableDebug:Sn}}l();s();u();c();function MM(e){return e.addReducers({dateFacetSet:kr}),{deselectAllDateFacetValues:sd,registerDateFacet:vr,toggleSelectDateFacetValue:Pr,toggleExcludeDateFacetValue:wr,updateDateFacetSortCriterion:id,updateDateFacetValues:Jr}}l();s();u();c();function LM(e){return e.addReducers({facetOptions:He}),{updateFacetOptions:fe,enableFacet:rt,disableFacet:Ie}}l();s();u();c();function QM(e){return e.addReducers({didYouMean:Ql,query:gt}),{applyDidYouMeanCorrection:qt,disableDidYouMean:Ku,enableDidYouMean:Qa,enableAutomaticQueryCorrection:Yu,disableAutomaticQueryCorrection:Ba,setCorrectionMode:Co}}l();s();u();c();function BM(e){return e.addReducers({fields:Nn}),{registerFieldsToInclude:qn,enableFetchAllFields:ni,disableFetchAllFields:Ro,fetchFieldsDescription:oi}}l();s();u();c();function UM(e){return e.addReducers({history:Kd,facetOrder:$d}),{back:js,forward:ju}}l();s();u();c();function _M(e){return e.addReducers({numericFacetSet:Lt}),{deselectAllNumericFacetValues:ld,registerNumericFacet:Er,toggleSelectNumericFacetValue:Ir,toggleExcludeNumericFacetValue:Tr,updateNumericFacetSortCriterion:ud,updateNumericFacetValues:Xr}}l();s();u();c();function jM(e){return e.addReducers({folding:Op}),{registerFolding:Dn,loadCollection:Vn}}l();s();u();c();function $M(e){return e.addReducers({pagination:Dr}),{nextPage:Da,previousPage:Va,registerNumberOfResults:Oa,registerPage:qa,updateNumberOfResults:ka,updatePage:kt}}l();s();u();c();function HM(e){return e.addReducers({pipeline:Pa}),{setPipeline:va}}l();s();u();c();function GM(e){return e.addReducers({query:gt}),{updateQuery:tt}}l();s();u();c();function WM(e){return e.addReducers({querySet:Mi}),{registerQuerySetQuery:Ni,updateQuerySetQuery:Qo}}l();s();u();c();function zM(e){return e.addReducers({instantResults:cp}),{registerInstantResults:Ia,updateInstantResultsQuery:ar,clearExpiredResults:Ta}}l();s();u();c();function KM(e){return e.addReducers({querySuggest:Li,querySet:Mi}),{clearQuerySuggest:Jn,fetchQuerySuggestions:Xn,registerQuerySuggest:Vi,selectQuerySuggestion:Vr}}l();s();u();c();function YM(e){return e.addReducers({search:ce}),{executeSearch:ja,fetchMoreResults:Ha,fetchFacetValues:ll,fetchPage:$a,fetchInstantResults:AC}}l();s();u();c();function JM(e){return e.addReducers({searchHub:Ea}),{setSearchHub:wa}}l();s();u();c();function XM(e){return e.addReducers({sortCriteria:lp}),{registerSortCriterion:Bi,updateSortCriterion:Ui}}l();s();u();c();function ZM(e){return e.addReducers({standaloneSearchBoxSet:Rp}),{registerStandaloneSearchBox:Hi,fetchRedirectUrl:to,updateStandaloneSearchBoxRedirectionUrl:Gi,updateAnalyticsToSearchFromLink:zi,updateAnalyticsToOmniboxFromLink:Ki,resetStandaloneSearchBox:Wi}}l();s();u();c();function eL(e){return e.addReducers({staticFilterSet:gp}),{registerStaticFilter:_i,toggleSelectStaticFilterValue:en,toggleExcludeStaticFilterValue:tn,deselectAllStaticFilterValues:eo}}l();s();u();c();function tL(e){return e.addReducers({tabSet:$i}),{registerTab:ei,updateActiveTab:At}}l();s();u();c();function rL(e){return e.addReducers({questionAnswering:Nr}),{collapseSmartSnippet:os,expandSmartSnippet:ns,dislikeSmartSnippet:is,likeSmartSnippet:as,openFeedbackModal:ss,closeFeedbackModal:no,expandSmartSnippetRelatedQuestion:cs,collapseSmartSnippetRelatedQuestion:us}}l();s();u();c();function nL(e){return e.addReducers({}),{deselectAllBreadcrumbs:qe,deselectAllNonBreadcrumbs:yn}}l();s();u();c();function oL(e){return e.addReducers({recentQueries:Np}),{registerRecentQueries:_o,clearRecentQueries:ls}}l();s();u();c();function aL(e){return e.addReducers({recentResults:Mp}),{registerRecentResults:qi,clearRecentResults:Di,pushRecentResult:Qt}}l();s();u();c();l();s();u();c();l();s();u();c();var jp=v("excerptLength/set",e=>I(e,new J({min:0,required:!0})));l();s();u();c();function av(){return{length:void 0}}var iv=re(av(),e=>{e.addCase(jp,(t,r)=>{t.length=r.payload})});function iL(e){return e.addReducers({excerptLength:iv}),{setExcerptLength:jp}}l();s();u();c();function sL(e){return e.addReducers({resultPreview:Ip}),{fetchResultContent:Uo,updateContentURL:ts,nextPreview:Xi,previousPreview:Zi,preparePreviewPagination:es}}l();s();u();c();function cL(e){return e.addReducers({generatedAnswer:ds}),{resetAnswer:lr}}l();s();u();c();l();s();u();c();var uL=new ue({content:new ve({required:!0}),conditions:new ve({required:!0}),priority:new J({required:!1,default:0,min:0}),fields:new te({required:!1,each:H})});function sv(){let e=[],t=r=>{let n=uL.validate(r);if(!r.conditions.every(a=>a instanceof Function))throw new ys("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return n};return{registerTemplates(...r){r.forEach(n=>{let o={...t(n),fields:n.fields||[]};e.push(o)}),e.sort((n,o)=>o.priority-n.priority)},selectTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.content:null},selectLinkTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.linkContent:null}}}function cv(e){if(!lL(e))throw W;let{registerTemplates:t,selectTemplate:r,selectLinkTemplate:n}=sv();return{registerTemplates:(...o)=>{t(...o);let a=[];o.forEach(d=>{d.fields&&a.push(...d.fields)}),e.dispatch(qn(a))},selectTemplate:r,selectLinkTemplate:n}}function lL(e){return e.addReducers({fields:Nn}),!0}l();s();u();c();function dL(e){return e.addReducers({}),{logClearBreadcrumbs:yp,logInterfaceLoad:Nu,logSearchFromLink:Mu,logOmniboxFromLink:Lu,logInterfaceChange:fn,logDidYouMeanClick:Ju,logCategoryFacetBreadcrumb:hp,logFacetBreadcrumb:Ci,logFacetClearAll:$e,logFacetUnexclude:zr,logFacetExclude:Ft,logFacetDeselect:Yt,logFacetSelect:De,logFacetShowLess:yi,logFacetShowMore:hi,logFacetUpdateSort:gr,logDateFacetBreadcrumb:Tc,logNumericFacetBreadcrumb:Oc,logNavigateBackward:Gd,logNavigateForward:Hd,logPageNext:Zd,logPageNumber:Ti,logPagePrevious:ep,logPagerResize:Ii,logSearchboxSubmit:Zn,logQuerySuggestionClick:op,logResultsSort:Qi,logDislikeSmartSnippet:Xg,logLikeSmartSnippet:Jg,logOpenSmartSnippetFeedbackModal:eS,logCloseSmartSnippetFeedbackModal:tS,logSmartSnippetFeedback:rS,logSmartSnippetDetailedFeedback:nS,logExpandSmartSnippet:Kg,logCollapseSmartSnippet:Yg,logExpandSmartSnippetSuggestion:oS,logCollapseSmartSnippetSuggestion:aS,logNoResultsBack:Wd,logStaticFilterSelect:mp,logStaticFilterDeselect:ji,logStaticFilterClearAll:fp,logTriggerQuery:ol,logUndoTriggerQuery:al,logNotifyTrigger:il,logTriggerRedirect:sl,logTriggerExecute:cl}}l();s();u();c();function pL(e){return e.addReducers({}),{logDocumentOpen:rp,logOpenSmartSnippetSource:Zg,logOpenSmartSnippetSuggestionSource:Qc,logOpenSmartSnippetInlineLink:Lc,logOpenSmartSnippetSuggestionInlineLink:qp}}l();s();u();c();function mL(e){return e.addReducers({}),{logSearchEvent:Gy,logClickEvent:Wy,logCustomEvent:zy}}l();s();u();c();l();s();u();c();var uv=ie("analytics/addPageViewEntry",async(e,{getState:t})=>{t().configuration.analytics.enabled&&It.getInstance().addElement({name:"PageView",value:e,time:JSON.stringify(new Date)})});function fL(e){return e.addReducers({}),{addPageViewEntryInActionsHistory:uv}}l();s();u();c();function gL(e){let{by:t,order:r}=e;switch(t){case"relevancy":return ha();case"qre":return Ou();case"nosort":return ku();case"date":if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Iu(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Tu(t,r)}}function SL(e){return e===void 0||e==="ascending"||e==="descending"}function lv(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(n=>{let o=n.trim().split(" "),a=o[0].toLowerCase(),d=o[1]&&o[1].toLowerCase();if(o.length>2||a==="")throw r;if(!SL(d))throw new Error(`Wrong criterion sort order "${d}" in expression "${e}". Order should either be "ascending" or "descending"`);return gL({by:a,order:d})})}l();s();u();c();l();s();u();c();l();s();u();c();function Ge(e){return e.negate?"NOT ":""}l();s();u();c();function Ut(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function dv(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=Ut(e.operator);return`${Ge(e)}@${t}${n}${r}`}}}l();s();u();c();function pv(e){return{toQuerySyntax(){let t=Ge(e),{field:r,from:n,to:o}=e,a=Ut("isExactly");return`${t}@${r}${a}${n}..${o}`}}}l();s();u();c();function mv(e){return{toQuerySyntax(){let t=Ge(e),{expression:r}=e;return`${t}"${r}"`}}}l();s();u();c();function fv(e){return{toQuerySyntax(){let t=Ge(e),{field:r}=e;return`${t}@${r}`}}}l();s();u();c();function gv(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}l();s();u();c();function Sv(e){return{toQuerySyntax(){let t=Ge(e),{startTerm:r,otherTerms:n}=e,o=hL(n),a=`${r} ${o}`;return e.negate?`${t}(${a})`:a}}}function hL(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:n}=t;return`near:${n} ${r}`}).join(" ")}l();s();u();c();function hv(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=Ge(e),o=Ut(e.operator);return`${n}@${t}${o}${r}`}}}l();s();u();c();function yv(e){return{toQuerySyntax(){let t=Ge(e),{field:r,from:n,to:o}=e,a=Ut("isExactly");return`${t}@${r}${a}${n}..${o}`}}}l();s();u();c();function Cv(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,n=yL(r);return`$${t}(${n})`}}}function yL(e){return Object.entries(e).map(t=>{let[r,n]=t,o=typeof n=="string"?n:n.toQuerySyntax();return`${r}: ${o}`}).join(", ")}l();s();u();c();function xv(e){return{toQuerySyntax(){let t=Ge(e),{field:r,operator:n,value:o}=e,a=Ut(n),d=n==="fuzzyMatch"?` $quoteVar(value: ${o})`:`("${o}")`;return`${t}@${r}${a}${d}`}}}l();s();u();c();function Av(e){return{toQuerySyntax(){let{field:t}=e,r=Ge(e),n=Ut(e.operator),o=e.values.map(d=>`"${d}"`),a=o.length===1?o[0]:`(${o.join(",")})`;return`${r}@${t}${n}${a}`}}}function CL(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(gv(r)),this},addNear(r){return e.push(Sv(r)),this},addExactMatch(r){return e.push(mv(r)),this},addFieldExists(r){return e.push(fv(r)),this},addStringField(r){return e.push(Av(r)),this},addStringFacetField(r){return e.push(xv(r)),this},addNumericField(r){return e.push(hv(r)),this},addNumericRangeField(r){return e.push(yv(r)),this},addDateField(r){return e.push(dv(r)),this},addDateRangeField(r){return e.push(pv(r)),this},addQueryExtension(r){return e.push(Cv(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=xL(t),n=e.map(o=>o.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?n:`(${n})`}}}function xL(e){return e==="and"?"AND":"OR"}
/**
 * @license
 *
 * Copyright 2025 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

if(__exports != exports)module.exports = exports;return module.exports}));
//# sourceMappingURL=headless.js.map
