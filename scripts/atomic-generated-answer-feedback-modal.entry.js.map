{"file":"atomic-generated-answer-feedback-modal.entry.js","mappings":"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","names":[],"sources":["src/components/common/generated-answer/atomic-generated-answer-feedback/atomic-generated-answer-feedback-modal.pcss?tag=atomic-generated-answer-feedback-modal&encapsulation=shadow","src/components/common/generated-answer/atomic-generated-answer-feedback/atomic-generated-answer-feedback-modal.tsx"],"sourcesContent":["@import '../../../../global/global.pcss';\n\n@utility mobile-feedback-modal {\n  &::part(container) {\n    @apply w-auto min-w-full;\n  }\n\n  &::part(header),\n  &::part(body),\n  &::part(footer) {\n    @apply max-w-full;\n  }\n  [part='buttons'] {\n    .required-label {\n      @apply text-sm;\n    }\n  }\n  [part='form'] {\n    .answer-evaluation {\n      @apply block;\n    }\n\n    .options {\n      @apply mt-2;\n    }\n  }\n  [part='modal-header'] {\n    .hide {\n      @apply hidden;\n    }\n  }\n}\n\n[part='generated-answer-feedback-modal'] {\n  &::part(container) {\n    @apply min-w-170;\n  }\n\n  &::part(header),\n  &::part(body),\n  &::part(footer) {\n    @apply max-w-170;\n  }\n\n  @media not all and (width >= theme(--breakpoint-desktop)) {\n    @apply mobile-feedback-modal;\n  }\n}\n\n[part='form'] {\n  .active {\n    @apply border-primary-light text-primary-light bg-primary-background;\n  }\n  .text-error-red {\n    @apply text-inline-code;\n  }\n  .required {\n    @apply flex;\n  }\n}\n","import {\n  GeneratedAnswer,\n  GeneratedAnswerFeedback,\n  GeneratedAnswerFeedbackOption,\n} from '@coveo/headless';\nimport {\n  Component,\n  State,\n  h,\n  Watch,\n  Prop,\n  Element,\n  Event,\n  EventEmitter,\n} from '@stencil/core/internal';\nimport CloseIcon from '../../../../images/close.svg';\nimport Success from '../../../../images/success.svg';\nimport {\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../../utils/initialization-utils';\nimport {updateBreakpoints} from '../../../../utils/replace-breakpoint';\nimport {once, randomID} from '../../../../utils/utils';\nimport {ATOMIC_MODAL_EXPORT_PARTS} from '../../atomic-modal/export-parts';\nimport {IconButton} from '../../iconButton';\nimport {AnyBindings} from '../../interface/bindings';\nimport {Button} from '../../stencil-button';\nimport {FieldsetGroup} from '../../stencil-fieldset-group';\nimport {RadioButton} from '../../stencil-radio-button';\n\n/**\n * @internal\n */\n@Component({\n  tag: 'atomic-generated-answer-feedback-modal',\n  styleUrl: 'atomic-generated-answer-feedback-modal.pcss',\n  shadow: true,\n})\nexport class AtomicGeneratedAnswerFeedbackModal\n  implements InitializableComponent<AnyBindings>\n{\n  @InitializeBindings() public bindings!: AnyBindings;\n  @Element() public host!: HTMLElement;\n\n  /**\n   * Indicates whether the modal is open.\n   */\n  @Prop({reflect: true, mutable: true}) isOpen = false;\n  /**\n   * A `GeneratedAnswer` controller instance. It is used when the user interacts with the modal.\n   */\n  @Prop({reflect: true, mutable: true}) generatedAnswer!: GeneratedAnswer;\n  /**\n   * Indicates whether the answer was helpful or not.\n   */\n  @Prop({reflect: true, mutable: true}) helpful = false;\n\n  @State() public error!: Error;\n  @State() private currentAnswer: Partial<GeneratedAnswerFeedback> =\n    this.getInitialAnswerState();\n  @State() feedbackSubmitted: boolean = false;\n  @State() answerEvaluationRequired: boolean = false;\n\n  private readonly formId = randomID(\n    'atomic-generated-answer-feedback-modal-form-'\n  );\n  private detailsInputRef?: HTMLTextAreaElement;\n\n  private linkInputRef?: HTMLInputElement;\n\n  @Event() feedbackSent!: EventEmitter;\n\n  @Watch('isOpen')\n  watchToggleOpen(isOpen: boolean) {\n    if (isOpen) {\n      this.generatedAnswer.openFeedbackModal();\n    }\n  }\n\n  private static options: {\n    localeKey: string;\n    correspondingAnswer: keyof GeneratedAnswerFeedback;\n  }[] = [\n    {\n      localeKey: 'feedback-correct-topic',\n      correspondingAnswer: 'correctTopic',\n    },\n    {\n      localeKey: 'feedback-hallucination-free',\n      correspondingAnswer: 'hallucinationFree',\n    },\n    {\n      localeKey: 'feedback-documented',\n      correspondingAnswer: 'documented',\n    },\n    {\n      localeKey: 'feedback-readable',\n      correspondingAnswer: 'readable',\n    },\n  ];\n\n  private getInitialAnswerState(): Partial<GeneratedAnswerFeedback> {\n    return {\n      documented: undefined,\n      correctTopic: undefined,\n      hallucinationFree: undefined,\n      readable: undefined,\n    };\n  }\n\n  private resetState() {\n    this.feedbackSubmitted = false;\n    this.currentAnswer = this.getInitialAnswerState();\n    this.answerEvaluationRequired = false;\n    this.isOpen = false;\n  }\n\n  private clearInputRefs() {\n    if (this.detailsInputRef) {\n      this.detailsInputRef.value = '';\n    }\n    if (this.linkInputRef) {\n      this.linkInputRef.value = '';\n    }\n  }\n\n  private close() {\n    this.clearInputRefs();\n    this.resetState();\n    this.generatedAnswer.closeFeedbackModal();\n  }\n\n  private updateBreakpoints = once(() => updateBreakpoints(this.host));\n\n  private setCurrentAnswer(\n    key: keyof GeneratedAnswerFeedback,\n    value: GeneratedAnswerFeedbackOption | string\n  ) {\n    this.currentAnswer = {\n      ...this.currentAnswer,\n      [key]: value,\n    };\n  }\n\n  public sendFeedback() {\n    const feedback: GeneratedAnswerFeedback = {\n      ...(this.currentAnswer as GeneratedAnswerFeedback),\n      helpful: this.helpful,\n    };\n    this.generatedAnswer.sendFeedback(feedback);\n    this.feedbackSent.emit();\n  }\n\n  private isAnyAnswerEvaluationUndefined = () => {\n    return Object.values(this.currentAnswer).some(\n      (value) => value === undefined\n    );\n  };\n\n  private handleSubmit(e: Event) {\n    e.preventDefault();\n    if (this.isAnyAnswerEvaluationUndefined()) {\n      this.answerEvaluationRequired = true;\n      return;\n    }\n    this.feedbackSubmitted = true;\n    this.answerEvaluationRequired = false;\n    this.sendFeedback();\n  }\n\n  private renderHeader() {\n    return (\n      <div\n        slot=\"header\"\n        part=\"modal-header\"\n        class=\"flex w-full items-center justify-between\"\n      >\n        <h1>\n          <span>{this.bindings.i18n.t('feedback-modal-title')}</span>\n          <span class=\"hide ml-0.5\">\n            {this.bindings.i18n.t('additional-feedback')}\n          </span>\n        </h1>\n        <IconButton\n          style=\"text-transparent\"\n          class=\"search-clear-button\"\n          onClick={() => this.close()}\n          icon={CloseIcon}\n          partPrefix={'close'}\n          ariaLabel={this.bindings.i18n.t('close')}\n        />\n      </div>\n    );\n  }\n\n  private renderFeedbackOption(\n    option: GeneratedAnswerFeedbackOption,\n    correspondingAnswer: keyof GeneratedAnswerFeedback\n  ) {\n    const buttonClasses = [\n      'min-w-20',\n      'flex',\n      'items-center',\n      'justify-center',\n      'px-3',\n      'py-1.5',\n      'mr-1',\n      'text-neutral-dark',\n    ];\n    const isSelected = this.currentAnswer[correspondingAnswer] === option;\n\n    if (isSelected) {\n      buttonClasses.push('active');\n    }\n    return (\n      <RadioButton\n        key={String(correspondingAnswer)}\n        groupName={this.bindings.i18n.t(correspondingAnswer)}\n        style=\"outline-neutral\"\n        checked={isSelected}\n        aria-checked={isSelected}\n        onChecked={() => {\n          this.setCurrentAnswer(correspondingAnswer, option);\n        }}\n        class={buttonClasses.join(' ')}\n        text={this.bindings.i18n.t(option)}\n      ></RadioButton>\n    );\n  }\n\n  private renderAnswerEvaluation(\n    label: string,\n    correspondingAnswer: keyof GeneratedAnswerFeedback\n  ) {\n    const labelClasses = ['text-error-red', 'text-sm', 'hidden'];\n    const isRequired =\n      this.answerEvaluationRequired &&\n      this.currentAnswer[correspondingAnswer] === undefined;\n    if (isRequired) {\n      labelClasses.push('required');\n    }\n    return (\n      <div class=\"block\">\n        <div class=\"flex\">\n          <label class=\"text-base\">\n            {this.bindings.i18n.t(label)}\n            <span class=\"text-error-red ml-0.5\">*</span>\n          </label>\n        </div>\n        <span class={labelClasses.join(' ')}>\n          {this.bindings.i18n.t('required-fields-error')}\n        </span>\n      </div>\n    );\n  }\n\n  private renderOptions() {\n    return (\n      <fieldset>\n        <legend class=\"font-bold\">\n          {this.bindings.i18n.t('answer-evaluation')}\n        </legend>\n        {AtomicGeneratedAnswerFeedbackModal.options.map(\n          ({localeKey, correspondingAnswer}) => (\n            <FieldsetGroup label={this.bindings.i18n.t(localeKey)}>\n              <div\n                class={`answer-evaluation mt-3 flex items-center justify-between ${String(correspondingAnswer)}`}\n                key={String(correspondingAnswer)}\n              >\n                {this.renderAnswerEvaluation(localeKey, correspondingAnswer)}\n                <div\n                  class=\"options flex text-base\"\n                  aria-label={this.bindings.i18n.t(localeKey)}\n                >\n                  {this.renderFeedbackOption('yes', correspondingAnswer)}\n                  {this.renderFeedbackOption('unknown', correspondingAnswer)}\n                  {this.renderFeedbackOption('no', correspondingAnswer)}\n                </div>\n              </div>\n            </FieldsetGroup>\n          )\n        )}\n      </fieldset>\n    );\n  }\n\n  private renderLinkToCorrectAnswerField() {\n    return (\n      <fieldset>\n        <legend class=\"font-bold\">\n          {this.bindings.i18n.t('generated-answer-feedback-link')}\n        </legend>\n        <input\n          type=\"text\"\n          ref={(linkInputRef) => (this.linkInputRef = linkInputRef)}\n          placeholder=\"https://URL\"\n          class=\"input-primary placeholder-neutral-dark mt-4 h-9 w-full rounded-md px-4\"\n          onChange={(e) =>\n            this.setCurrentAnswer(\n              'documentUrl',\n              (e.currentTarget as HTMLInputElement).value\n            )\n          }\n        />\n      </fieldset>\n    );\n  }\n\n  private renderAddNotesField() {\n    return (\n      <fieldset>\n        <legend class=\"mt-8 font-bold\">\n          {this.bindings.i18n.t('generated-answer-additional-notes')}\n        </legend>\n        <textarea\n          name=\"answer-details\"\n          ref={(detailsInput) => (this.detailsInputRef = detailsInput)}\n          class=\"placeholder-neutral-dark border-neutral hover:border-primary-light focus-visible:border-primary mt-4 w-full resize-none rounded-md border px-4 py-2 leading-5 focus:outline-hidden focus-visible:ring-2\"\n          rows={4}\n          placeholder={this.bindings.i18n.t('add-notes')}\n          onChange={(e) =>\n            this.setCurrentAnswer(\n              'details',\n              (e.currentTarget as HTMLTextAreaElement).value\n            )\n          }\n        ></textarea>\n      </fieldset>\n    );\n  }\n\n  private renderFeedbackForm() {\n    return (\n      <form\n        part=\"form\"\n        id={this.formId}\n        slot=\"body\"\n        onSubmit={(e) => this.handleSubmit(e)}\n        class=\"flex flex-col gap-8 leading-4\"\n      >\n        {this.renderOptions()}\n        {this.renderLinkToCorrectAnswerField()}\n        {this.renderAddNotesField()}\n      </form>\n    );\n  }\n\n  private renderSuccessMessage() {\n    return (\n      <div slot=\"body\" class=\"my-4 flex flex-col items-center gap-4\">\n        <atomic-icon icon={Success} class=\"w-48\" />\n        <p class=\"text-base\">\n          {this.bindings.i18n.t('generated-answer-feedback-success')}\n        </p>\n      </div>\n    );\n  }\n\n  private renderBody() {\n    if (!this.feedbackSubmitted) {\n      return this.renderFeedbackForm();\n    } else {\n      return this.renderSuccessMessage();\n    }\n  }\n\n  private renderFeedbackFormFooter() {\n    const buttonClasses =\n      'flex items-center justify-center text-sm leading-4 p-2 rounded-md';\n\n    return (\n      <div slot=\"footer\" part=\"modal-footer\">\n        <div class=\"flex items-center justify-between\">\n          <div class=\"required-label text-base\">\n            <span class=\"text-error mr-0.5\">*</span>\n            {this.bindings.i18n.t('required-fields')}\n          </div>\n          <div class=\"flex gap-2\">\n            <Button\n              part=\"cancel-button\"\n              style=\"outline-primary\"\n              class={buttonClasses}\n              ariaLabel={this.bindings.i18n.t('skip')}\n              onClick={() => this.close()}\n            >\n              {this.bindings.i18n.t('skip')}\n            </Button>\n            <Button\n              part=\"submit-button\"\n              style=\"primary\"\n              type=\"submit\"\n              form={this.formId}\n              class={buttonClasses}\n              ariaLabel={this.bindings.i18n.t('generated-answer-send-feedback')}\n            >\n              {this.bindings.i18n.t('generated-answer-send-feedback')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  private renderSuccessFormFooter() {\n    return (\n      <div slot=\"footer\">\n        <div class=\"flex justify-end gap-2 p-2\">\n          <Button\n            part=\"cancel-button\"\n            style=\"primary\"\n            onClick={() => this.close()}\n            class=\"flex justify-center p-2 text-sm leading-4\"\n            ariaLabel={this.bindings.i18n.t('modal-done')}\n          >\n            {this.bindings.i18n.t('modal-done')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  private renderFooter() {\n    if (!this.feedbackSubmitted) {\n      return this.renderFeedbackFormFooter();\n    } else {\n      return this.renderSuccessFormFooter();\n    }\n  }\n\n  public render() {\n    this.updateBreakpoints();\n\n    return (\n      <atomic-modal\n        fullscreen={false}\n        isOpen={this.isOpen}\n        close={() => this.close()}\n        container={this.host}\n        part=\"generated-answer-feedback-modal\"\n        exportparts={ATOMIC_MODAL_EXPORT_PARTS}\n      >\n        {this.renderHeader()}\n        {this.renderBody()}\n        {this.renderFooter()}\n      </atomic-modal>\n    );\n  }\n}\n"],"version":3}