{"version":3,"names":["Rating","props","width","numberOfActiveIcons","numberOfTotalIcons","toString","iconSize","renderIcon","active","h","icon","class","style","height","part","emptyIconDisplay","i","push","filledIconDisplay","role","i18n","t","count","max","computeNumberOfStars","value","field","valueAsNumber","parseFloat","Number","isNaN","FieldValueIsNaNError"],"sources":["src/components/common/atomic-rating/atomic-rating.tsx"],"sourcesContent":["import {FunctionalComponent, h, VNode} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {FieldValueIsNaNError} from '../../commerce/product-template-components/error';\n\ninterface RatingProps {\n  i18n: i18n;\n  numberOfTotalIcons: number;\n  numberOfActiveIcons: number;\n  icon: string;\n  iconSize?: number;\n}\n\nexport const Rating: FunctionalComponent<RatingProps> = (props) => {\n  const width =\n    ((props.numberOfActiveIcons / props.numberOfTotalIcons) * 100).toString() +\n    '%';\n  const iconSize = `${props.iconSize ?? 0.75}rem`;\n\n  const renderIcon = (active: boolean) => {\n    return (\n      <atomic-icon\n        icon={props.icon}\n        class={`shrink-0 ${active ? 'icon-active' : 'icon-inactive'}`}\n        style={{width: iconSize, height: iconSize}}\n        part=\"value-rating-icon\"\n      ></atomic-icon>\n    );\n  };\n\n  const emptyIconDisplay = () => {\n    const emptyIconDisplay: VNode[] = [];\n    for (let i = 0; i < props.numberOfTotalIcons; i++) {\n      emptyIconDisplay.push(renderIcon(false));\n    }\n    return emptyIconDisplay;\n  };\n\n  const filledIconDisplay = () => {\n    const filledIconDisplay: VNode[] = [];\n    for (let i = 0; i < props.numberOfTotalIcons; i++) {\n      filledIconDisplay.push(renderIcon(true));\n    }\n    return filledIconDisplay;\n  };\n\n  return (\n    <div\n      class=\"relative w-max\"\n      part=\"value-rating\"\n      role=\"img\"\n      aria-label={props.i18n.t('stars', {\n        count: props.numberOfActiveIcons,\n        max: props.numberOfTotalIcons,\n      })}\n    >\n      <div class=\"z-0 flex gap-0.5\">{emptyIconDisplay()}</div>\n      <div\n        class=\"absolute top-0 left-0 z-1 flex gap-0.5 overflow-hidden\"\n        style={{width}}\n      >\n        {filledIconDisplay()}\n      </div>\n    </div>\n  );\n};\n\nexport const computeNumberOfStars = (\n  value: unknown,\n  field: string\n): number | null => {\n  if (value === null) {\n    return null;\n  }\n  const valueAsNumber = parseFloat(`${value}`);\n  if (Number.isNaN(valueAsNumber)) {\n    throw new FieldValueIsNaNError(field, value);\n  }\n  return valueAsNumber;\n};\n"],"mappings":"i8BAYaA,EAA4CC,IACvD,MAAMC,GACFD,EAAME,oBAAsBF,EAAMG,mBAAsB,KAAKC,WAC/D,IACF,MAAMC,EAAW,GAAGL,EAAMK,UAAY,SAEtC,MAAMC,EAAcC,GAEhBC,EAAA,eACEC,KAAMT,EAAMS,KACZC,MAAO,YAAYH,EAAS,cAAgB,kBAC5CI,MAAO,CAACV,MAAOI,EAAUO,OAAQP,GACjCQ,KAAK,sBAKX,MAAMC,EAAmB,KACvB,MAAMA,EAA4B,GAClC,IAAK,IAAIC,EAAI,EAAGA,EAAIf,EAAMG,mBAAoBY,IAAK,CACjDD,EAAiBE,KAAKV,EAAW,O,CAEnC,OAAOQ,CAAgB,EAGzB,MAAMG,EAAoB,KACxB,MAAMA,EAA6B,GACnC,IAAK,IAAIF,EAAI,EAAGA,EAAIf,EAAMG,mBAAoBY,IAAK,CACjDE,EAAkBD,KAAKV,EAAW,M,CAEpC,OAAOW,CAAiB,EAG1B,OACET,EAAA,OACEE,MAAM,iBACNG,KAAK,eACLK,KAAK,MAAK,aACElB,EAAMmB,KAAKC,EAAE,QAAS,CAChCC,MAAOrB,EAAME,oBACboB,IAAKtB,EAAMG,sBAGbK,EAAA,OAAKE,MAAM,oBAAoBI,KAC/BN,EAAA,OACEE,MAAM,yDACNC,MAAO,CAACV,UAEPgB,KAEC,E,MAIGM,EAAuB,CAClCC,EACAC,KAEA,GAAID,IAAU,KAAM,CAClB,OAAO,I,CAET,MAAME,EAAgBC,WAAW,GAAGH,KACpC,GAAII,OAAOC,MAAMH,GAAgB,CAC/B,MAAM,IAAII,EAAqBL,EAAOD,E,CAExC,OAAOE,CAAa,S","ignoreList":[]}