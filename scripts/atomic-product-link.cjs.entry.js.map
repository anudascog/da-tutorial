{"file":"atomic-product-link.entry.cjs.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,oBAAoB,GAAG,w21DAAw21D,CAAC;AACt41D,gCAAe,oBAAoB;;;;;;;;;;;;MC8BtB,iBAAiB;;;;;IA6BpB,gBAAgB,CAAC,OAAgB;QACvC,IAAI,OAAO,EAAE;YACX,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC3C;KACF;IAEM,UAAU;QACf,IAAI,CAAC,IAAI,CAAC,aAAa,CACrBA,2BAAgB,CACd,+BAA+B,EAC/B,CAAC,eAAwB;YACvB,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;SACxC,CACF,CACF,CAAC;KACH;IAEM,iBAAiB;QACtB,MAAM,QAAQ,GAAG,YAAY,CAAC;QAC9B,IAAI,CAAC,cAAc,GAAG,CAAC,CAACC,gCAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1D,IAAI,CAAC,cAAc,GAAGC,wCAAyB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;KACtE;IAEM,MAAM;QACX,MAAM,IAAI,GAAGC,iBAAW,CAAC,IAAI,CAAC,YAAY,CAAC;cACvC,IAAI,CAAC,OAAO,CAAC,QAAQ;cACrBC,2CAA8B,CAC5B,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,QAAQ,CACd,CAAC;QAEN,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC5B,OAAO;SACR;QAED,MAAM,EAAC,cAAc,EAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;QAEjD,QACEC,QAACC,8BAAqB,IACpB,IAAI,EAAE,IAAI,EACV,QAAQ,EAAE;gBACR,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;gBACtC,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;aAClC,EACD,oBAAoB,EAAE;gBACpB,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;gBACtC,IAAI,CAAC,kBAAkB,CAAC,kBAAkB,EAAE,CAAC;aAC9C,EACD,qBAAqB,EAAE;gBACrB,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;gBACtC,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,CAAC;aAC/C,EACD,UAAU,EAAE,IAAI,CAAC,cAAc,EAC/B,eAAe,EAAE,IAAI,CAAC,eAAe,IAEpC,IAAI,CAAC,cAAc,IAClBD,qBAAQ,KAERA,iCACE,KAAK,EAAC,SAAS,EACf,OAAO,EAAC,UAAU,GACG,CACxB,CACqB,EACxB;KACH;;;AAzFa,6CAA2B,GAAG,IAAH,CAAQ;AAHpB;IAA5BE,sCAAkB,EAAE;mDAAoC;AAK/B;IAAzBC,wCAAc,EAAE;kDAA2B;AACP;IAApCC,mDAAyB,EAAE;6DAAiD;;;;;","names":["buildCustomEvent","getDefaultSlotFromHost","getAttributesFromLinkSlot","isUndefined","buildStringTemplateFromProduct","h","LinkWithItemAnalytics","InitializeBindings","ProductContext","InteractiveProductContext"],"sources":["src/components/commerce/product-template-components/atomic-product-link/atomic-product-link.pcss?tag=atomic-product-link","src/components/commerce/product-template-components/atomic-product-link/atomic-product-link.tsx"],"sourcesContent":["@import '../../../../global/global.pcss';\n@import '../../../../utils/tailwind-utilities/link-style.tw.css';\n\natomic-product-link {\n  a {\n    @apply link-style;\n  }\n}\n","import {isUndefined} from '@coveo/bueno';\nimport {InteractiveProduct} from '@coveo/headless/commerce';\nimport {Product} from '@coveo/headless/commerce';\nimport {Component, h, Prop, Element} from '@stencil/core';\nimport {buildCustomEvent} from '../../../../utils/event-utils';\nimport {\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../../utils/initialization-utils';\nimport {getDefaultSlotFromHost} from '../../../../utils/slot-utils';\nimport {getAttributesFromLinkSlot} from '../../../common/item-link/attributes-slot';\nimport {LinkWithItemAnalytics} from '../../../common/item-link/item-link';\nimport {CommerceBindings} from '../../atomic-commerce-interface/atomic-commerce-interface';\nimport {\n  InteractiveProductContext,\n  ProductContext,\n} from '../product-template-decorators';\nimport {buildStringTemplateFromProduct} from '../product-utils';\n\n/**\n * @alpha\n * The `atomic-product-link` component automatically transforms a search product title into a clickable link that points to the original item.\n * @slot default - Lets you display alternative content inside the link.\n * @slot attributes - Lets you pass [attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attributes) down to the link element, overriding other attributes. Use only with an \"a\" tag, e.g., `<a slot=\"attributes\" target=\"_blank\" download></a>`.\n *\n */\n@Component({\n  tag: 'atomic-product-link',\n  styleUrl: 'atomic-product-link.pcss',\n  shadow: false,\n})\nexport class AtomicProductLink\n  implements InitializableComponent<CommerceBindings>\n{\n  @InitializeBindings() public bindings!: CommerceBindings;\n  public error!: Error;\n\n  public static isCompatibleWithProductList = true;\n\n  @ProductContext() private product!: Product;\n  @InteractiveProductContext() private interactiveProduct!: InteractiveProduct;\n\n  @Element() private host!: HTMLElement;\n\n  /**\n   * The [template literal](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals) from which to generate the `href` attribute value\n   *\n   * The template literal can reference any number of product properties from the parent product. It can also reference the window object.\n   *\n   * For example, the following markup generates an `href` value such as `http://uri.com?id=itemTitle`, using the product's `clickUri` and `itemtitle` fields.\n   * ```html\n   * <atomic-product-link href-template='${clickUri}?id=${permanentId}'></atomic-product-link>\n   * ```\n   */\n  @Prop({reflect: true}) hrefTemplate?: string;\n\n  private hasDefaultSlot!: boolean;\n  private linkAttributes?: Attr[];\n  private stopPropagation?: boolean;\n\n  private logWarningIfNeed(warning?: string) {\n    if (warning) {\n      this.bindings.engine.logger.warn(warning);\n    }\n  }\n\n  public initialize() {\n    this.host.dispatchEvent(\n      buildCustomEvent(\n        'atomic/resolveStopPropagation',\n        (stopPropagation: boolean) => {\n          this.stopPropagation = stopPropagation;\n        }\n      )\n    );\n  }\n\n  public connectedCallback() {\n    const slotName = 'attributes';\n    this.hasDefaultSlot = !!getDefaultSlotFromHost(this.host);\n    this.linkAttributes = getAttributesFromLinkSlot(this.host, slotName);\n  }\n\n  public render() {\n    const href = isUndefined(this.hrefTemplate)\n      ? this.product.clickUri\n      : buildStringTemplateFromProduct(\n          this.hrefTemplate,\n          this.product,\n          this.bindings\n        );\n\n    if (!this.interactiveProduct) {\n      return;\n    }\n\n    const {warningMessage} = this.interactiveProduct;\n\n    return (\n      <LinkWithItemAnalytics\n        href={href}\n        onSelect={() => {\n          this.logWarningIfNeed(warningMessage);\n          this.interactiveProduct.select();\n        }}\n        onBeginDelayedSelect={() => {\n          this.logWarningIfNeed(warningMessage);\n          this.interactiveProduct.beginDelayedSelect();\n        }}\n        onCancelPendingSelect={() => {\n          this.logWarningIfNeed(warningMessage);\n          this.interactiveProduct.cancelPendingSelect();\n        }}\n        attributes={this.linkAttributes}\n        stopPropagation={this.stopPropagation}\n      >\n        {this.hasDefaultSlot ? (\n          <slot />\n        ) : (\n          <atomic-product-text\n            field=\"ec_name\"\n            default=\"no-title\"\n          ></atomic-product-text>\n        )}\n      </LinkWithItemAnalytics>\n    );\n  }\n}\n"],"version":3}