{"file":"value-as-tree-container.js","mappings":"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","names":["LeftArrow"],"sources":["src/components/common/facets/category-facet/all-categories-button.tsx","src/components/common/facets/category-facet/value-link.tsx","src/components/common/facets/category-facet/child-value-link.tsx","src/components/common/facets/category-facet/children-as-tree-container.tsx","src/components/common/facets/category-facet/parent-as-tree-container.tsx","src/components/common/facets/category-facet/parent-button.tsx","src/components/common/facets/category-facet/parent-value-link.tsx","src/components/common/facets/category-facet/search-results-container.tsx","src/components/common/facets/category-facet/search-value.tsx","src/components/common/facets/category-facet/value-as-tree-container.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport LeftArrow from '../../../../images/arrow-left-rounded.svg';\nimport {Button} from '../../stencil-button';\n\ninterface CategoryFacetAllCategoryButtonProps {\n  i18n: i18n;\n  onClick(): void;\n}\n\nexport const CategoryFacetAllCategoryButton: FunctionalComponent<\n  CategoryFacetAllCategoryButtonProps\n> = ({i18n, onClick}) => {\n  const allCategories = i18n.t('all-categories');\n  return (\n    <Button\n      style=\"text-neutral\"\n      part=\"all-categories-button\"\n      onClick={() => {\n        onClick();\n      }}\n    >\n      <atomic-icon\n        aria-hidden=\"true\"\n        icon={LeftArrow}\n        part=\"back-arrow\"\n      ></atomic-icon>\n      <span class=\"truncate\">{allCategories}</span>\n    </Button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {FacetValueLabelHighlight} from '../facet-value-label-highlight/stencil-facet-value-label-highlight';\nimport {FacetValueLink} from '../facet-value-link/stencil-facet-value-link';\n\nexport interface CategoryFacetValueLinkProps {\n  displayValue: string;\n  numberOfResults: number;\n  i18n: i18n;\n  onClick: () => void;\n  isParent: boolean;\n  isSelected: boolean;\n  searchQuery: string;\n  isLeafValue: boolean;\n  setRef: (el?: HTMLButtonElement) => void;\n}\n\nexport const CategoryFacetValueLink: FunctionalComponent<\n  CategoryFacetValueLinkProps\n> = (\n  {\n    displayValue,\n    numberOfResults,\n    i18n,\n    onClick,\n    isParent,\n    isSelected,\n    searchQuery,\n    isLeafValue,\n    setRef,\n  },\n  children\n) => {\n  const partNames = [];\n  if (isParent) {\n    partNames.push('active-parent');\n  } else {\n    partNames.push(`value-link${isSelected ? ' value-link-selected' : ''}`);\n  }\n\n  if (isLeafValue) {\n    partNames.push('leaf-value');\n  } else {\n    partNames.push('node-value');\n  }\n\n  return (\n    <FacetValueLink\n      displayValue={displayValue}\n      numberOfResults={numberOfResults}\n      isSelected={isSelected}\n      i18n={i18n}\n      onClick={() => {\n        onClick();\n      }}\n      searchQuery={searchQuery}\n      part={partNames.join(' ')}\n      class=\"contents\"\n      buttonRef={(btn) => setRef(btn)}\n      subList={children}\n    >\n      <FacetValueLabelHighlight\n        displayValue={displayValue}\n        isSelected={isSelected}\n      ></FacetValueLabelHighlight>\n    </FacetValueLink>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {\n  CategoryFacetValueLink,\n  CategoryFacetValueLinkProps,\n} from './value-link';\n\ninterface CategoryFacetChildValueLinkProps\n  extends Omit<CategoryFacetValueLinkProps, 'isParent'> {}\n\nexport const CategoryFacetChildValueLink: FunctionalComponent<\n  CategoryFacetChildValueLinkProps\n> = (props, children) => {\n  return (\n    <CategoryFacetValueLink {...props} isParent={false}>\n      {children}\n    </CategoryFacetValueLink>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\ninterface CategoryFacetChildrenAsTreeContainerProps {\n  className?: string;\n}\nexport const CategoryFacetChildrenAsTreeContainer: FunctionalComponent<\n  CategoryFacetChildrenAsTreeContainerProps\n> = ({className}, children) => {\n  return (\n    <ul part=\"values\" class={className ?? ''}>\n      {children}\n    </ul>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\nexport interface CategoryFacetParentAsTreeContainerProps {\n  isTopLevel: boolean;\n  className?: string;\n}\nexport const CategoryFacetParentAsTreeContainer: FunctionalComponent<\n  CategoryFacetParentAsTreeContainerProps\n> = ({isTopLevel, className}, children) => {\n  return (\n    <ul class={className ?? ''} part={`${isTopLevel ? '' : 'sub-'}parents`}>\n      {children}\n    </ul>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport LeftArrow from '../../../../images/arrow-left-rounded.svg';\nimport {getFieldValueCaption} from '../../../../utils/field-utils';\nimport {Button} from '../../stencil-button';\n\ninterface CategoryFacetParentButtonProps {\n  i18n: i18n;\n  field: string;\n  facetValue: {value: string; numberOfResults: number};\n  onClick: () => void;\n}\nexport const CategoryFacetParentButton: FunctionalComponent<\n  CategoryFacetParentButtonProps\n> = ({field, facetValue, i18n, onClick}) => {\n  const displayValue = getFieldValueCaption(field, facetValue.value, i18n);\n  const ariaLabel = i18n.t('facet-value', {\n    value: displayValue,\n    count: facetValue.numberOfResults,\n    formattedCount: facetValue.numberOfResults.toLocaleString(i18n.language),\n  });\n\n  return (\n    <Button\n      style=\"text-neutral\"\n      part=\"parent-button\"\n      ariaPressed=\"false\"\n      onClick={() => {\n        onClick();\n      }}\n      ariaLabel={ariaLabel}\n    >\n      <atomic-icon\n        icon={LeftArrow}\n        part=\"back-arrow\"\n        class=\"back-arrow\"\n      ></atomic-icon>\n      <span class=\"truncate\">{displayValue}</span>\n    </Button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {\n  CategoryFacetValueLink,\n  CategoryFacetValueLinkProps,\n} from './value-link';\n\ninterface CategoryFacetParentValueLinkProps\n  extends Omit<CategoryFacetValueLinkProps, 'isParent' | 'isSelected'> {}\n\nexport const CategoryFacetParentValueLink: FunctionalComponent<\n  CategoryFacetParentValueLinkProps\n> = (props, children) => {\n  return (\n    <CategoryFacetValueLink {...props} isParent isSelected>\n      {children}\n    </CategoryFacetValueLink>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\nexport const CategoryFacetSearchResultsContainer: FunctionalComponent = (\n  _,\n  children\n) => {\n  return (\n    <ul part=\"search-results\" class=\"mt-3\">\n      {children}\n    </ul>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {getFieldValueCaption} from '../../../../utils/field-utils';\nimport {Button} from '../../stencil-button';\nimport {FacetValueLabelHighlight} from '../facet-value-label-highlight/stencil-facet-value-label-highlight';\n\ninterface CategoryFacetSearchValueProps {\n  value: {count: number; path: string[]; displayValue: string};\n  i18n: i18n;\n  field: string;\n  onClick(): void;\n  searchQuery: string;\n}\n\nconst SEPARATOR = '/';\nconst ELLIPSIS = '...';\nconst PATH_MAX_LENGTH = 3;\n\nexport const CategoryFacetSearchValue: FunctionalComponent<\n  CategoryFacetSearchValueProps\n> = ({value, field, i18n, onClick, searchQuery}) => {\n  const count = value.count.toLocaleString(i18n.language);\n  const inLabel = i18n.t('in');\n  const allCategories = i18n.t('all-categories');\n  const localizedPath = value.path.length\n    ? value.path.map((value) => getFieldValueCaption(field, value, i18n))\n    : [allCategories];\n  const ariaLabel = i18n.t('under', {\n    child: i18n.t('facet-value', {\n      count: value.count,\n      formattedCount: count,\n      value: value.displayValue,\n    }),\n    parent: localizedPath.join(', '),\n  });\n\n  function ellipsedPath(path: string[]) {\n    if (path.length <= PATH_MAX_LENGTH) {\n      return path;\n    }\n    const firstPart = path.slice(0, 1);\n    const lastParts = path.slice(-PATH_MAX_LENGTH + 1);\n    return firstPart.concat(ELLIPSIS, ...lastParts);\n  }\n\n  function renderPath(path: string[]) {\n    if (!path.length) {\n      return <span class=\"truncate\">{`${inLabel} ${allCategories}`}</span>;\n    }\n\n    return [\n      <span class=\"mr-0.5\">{inLabel}</span>,\n      ellipsedPath(path).map((value, index) => [\n        index > 0 && <span class=\"mx-0.5\">{SEPARATOR}</span>,\n        <span class={value === ELLIPSIS ? '' : 'max-w-max flex-1 truncate'}>\n          {value}\n        </span>,\n      ]),\n    ];\n  }\n\n  return (\n    <li key={value.displayValue}>\n      <Button\n        style=\"text-neutral\"\n        part=\"search-result\"\n        onClick={() => onClick()}\n        class=\"group flex w-full flex-col truncate px-2 py-2.5 focus-visible:outline-none\"\n        aria-label={ariaLabel}\n      >\n        <div class=\"flex w-full\">\n          <FacetValueLabelHighlight\n            displayValue={value.displayValue}\n            isSelected={false}\n            searchQuery={searchQuery}\n          ></FacetValueLabelHighlight>\n          <span part=\"value-count\" class=\"value-count\">\n            {i18n.t('between-parentheses', {\n              text: count,\n            })}\n          </span>\n        </div>\n        <div\n          part=\"search-result-path\"\n          class=\"text-neutral-dark group-focus:text-primary group-hover:text-primary mt-1 flex w-full\"\n        >\n          {renderPath(localizedPath)}\n        </div>\n      </Button>\n    </li>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\nexport const CategoryFacetTreeValueContainer: FunctionalComponent = (\n  _,\n  children\n) => {\n  return <li class=\"contents\">{children}</li>;\n};\n"],"version":3}