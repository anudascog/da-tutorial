{"version":3,"names":["atomicIpxTabCss","AtomicIpxTabStyle0","AtomicIPXTab","this","isAppLoaded","label","active","unsubscribe","select","tab","initialize","buildTab","bindings","engine","options","expression","id","initialState","isActive","subscribe","state","createAppLoadedListener","store","componentDidRender","dispatchTabLoaded","host","disconnectedCallback","render","buttonClasses","tabState","push","h","Button","style","part","class","join","ariaLabel","i18n","t","title","ariaPressed","onClick","__decorate","InitializeBindings","BindStateToController"],"sources":["src/components/ipx/atomic-ipx-tab/atomic-ipx-tab.pcss?tag=atomic-ipx-tab&encapsulation=shadow","src/components/ipx/atomic-ipx-tab/atomic-ipx-tab.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n\n.active {\n  &::after {\n    @apply bg-primary absolute bottom-0 block h-1 w-full rounded;\n    content: '';\n  }\n}\n\n[part='tab'] {\n  max-width: 150px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n","import {buildTab, Tab, TabState, Unsubscribe} from '@coveo/headless';\nimport {Component, h, Prop, State, Element, Method} from '@stencil/core';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../utils/initialization-utils';\nimport {createAppLoadedListener} from '../../common/interface/store';\nimport {Button} from '../../common/stencil-button';\nimport {dispatchTabLoaded} from '../../common/tabs/tab-common';\nimport {Bindings} from '../../search/atomic-search-interface/atomic-search-interface';\n\n/**\n * @internal\n */\n@Component({\n  tag: 'atomic-ipx-tab',\n  styleUrl: './atomic-ipx-tab.pcss',\n  shadow: true,\n})\nexport class AtomicIPXTab implements InitializableComponent {\n  private tab!: Tab;\n\n  @Element() host!: HTMLElement;\n\n  @InitializeBindings() public bindings!: Bindings;\n\n  @State() public error!: Error;\n  @State() private isAppLoaded = false;\n\n  @BindStateToController('tab')\n  @State()\n  private tabState!: TabState;\n\n  /**\n   * The label that will be shown to the user.\n   */\n  @Prop({reflect: true}) public label = 'no-label';\n\n  /**\n   * Whether this tab is active upon rendering.\n   * If multiple tabs are set to active on render, the last one to be rendered will override the others.\n   */\n  @Prop({reflect: true, mutable: true}) public active = false;\n\n  /**\n   * The expression that will be passed to the search as a `cq` paramenter upon being selected.\n   */\n  @Prop() public expression!: string;\n\n  private unsubscribe: Unsubscribe = () => {};\n\n  /**\n   * Activates the tab.\n   */\n  @Method()\n  public async select() {\n    this.tab.select();\n  }\n\n  public initialize() {\n    this.tab = buildTab(this.bindings.engine, {\n      options: {expression: this.expression, id: this.label},\n      initialState: {isActive: this.active},\n    });\n    this.unsubscribe = this.tab.subscribe(\n      () => (this.active = this.tab.state.isActive)\n    );\n    createAppLoadedListener(this.bindings.store, (isAppLoaded) => {\n      this.isAppLoaded = isAppLoaded;\n    });\n  }\n\n  public componentDidRender() {\n    dispatchTabLoaded(this.host);\n  }\n\n  public disconnectedCallback() {\n    this.unsubscribe();\n  }\n\n  public render() {\n    if (!this.isAppLoaded) {\n      return;\n    }\n\n    const buttonClasses = ['relative', 'pb-3', 'mt-1', 'mr-6', 'font-semibold'];\n    if (this.tabState.isActive) {\n      buttonClasses.push('active');\n    }\n\n    return (\n      <Button\n        style=\"text-transparent\"\n        part=\"tab\"\n        class={buttonClasses.join(' ')}\n        ariaLabel={this.bindings.i18n.t('tab-search', {label: this.label})}\n        title={this.label}\n        ariaPressed={`${this.tabState.isActive}`}\n        onClick={() => this.tab.select()}\n      >\n        {this.label}\n      </Button>\n    );\n  }\n}\n"],"mappings":"4cAAA,MAAMA,EAAkB,qv1DACxB,MAAAC,EAAeD,E,iXCmBFE,EAAY,M,yBAQNC,KAAAC,YAAc,MASDD,KAAAE,MAAQ,WAMOF,KAAAG,OAAS,MAO9CH,KAAAI,YAA2B,O,sCAtBJ,M,mCASO,W,YAMgB,M,0BAa/C,YAAMC,GACXL,KAAKM,IAAID,Q,CAGJ,UAAAE,GACLP,KAAKM,IAAME,EAASR,KAAKS,SAASC,OAAQ,CACxCC,QAAS,CAACC,WAAYZ,KAAKY,WAAYC,GAAIb,KAAKE,OAChDY,aAAc,CAACC,SAAUf,KAAKG,UAEhCH,KAAKI,YAAcJ,KAAKM,IAAIU,WAC1B,IAAOhB,KAAKG,OAASH,KAAKM,IAAIW,MAAMF,WAEtCG,EAAwBlB,KAAKS,SAASU,OAAQlB,IAC5CD,KAAKC,YAAcA,CAAW,G,CAI3B,kBAAAmB,GACLC,EAAkBrB,KAAKsB,K,CAGlB,oBAAAC,GACLvB,KAAKI,a,CAGA,MAAAoB,GACL,IAAKxB,KAAKC,YAAa,CACrB,M,CAGF,MAAMwB,EAAgB,CAAC,WAAY,OAAQ,OAAQ,OAAQ,iBAC3D,GAAIzB,KAAK0B,SAASX,SAAU,CAC1BU,EAAcE,KAAK,S,CAGrB,OACEC,EAACC,EAAM,CACLC,MAAM,mBACNC,KAAK,MACLC,MAAOP,EAAcQ,KAAK,KAC1BC,UAAWlC,KAAKS,SAAS0B,KAAKC,EAAE,aAAc,CAAClC,MAAOF,KAAKE,QAC3DmC,MAAOrC,KAAKE,MACZoC,YAAa,GAAGtC,KAAK0B,SAASX,WAC9BwB,QAAS,IAAMvC,KAAKM,IAAID,UAEvBL,KAAKE,M,6BA5EiBsC,EAAA,CAA5BC,K,+BAOOD,EAAA,CAFPE,EAAsB,Q","ignoreList":[]}