{"version":3,"names":["atomicFacetNumberInputCss","AtomicFacetNumberInputStyle0","FacetNumberInput","connectedCallback","this","start","filterState","range","end","apply","startRef","validity","valid","endRef","applyInput","emit","filter","setRange","render","label","bindings","i18n","t","minText","maxText","minAria","maxAria","applyAria","inputClasses","labelClasses","step","type","h","key","class","part","onSubmit","e","preventDefault","htmlFor","facetId","id","ref","required","min","Number","MIN_SAFE_INTEGER","max","value","onInput","target","valueAsNumber","MAX_SAFE_INTEGER","Button","style","ariaLabel","text"],"sources":["src/components/common/facets/facet-number-input/atomic-facet-number-input.pcss?tag=atomic-facet-number-input","src/components/common/facets/facet-number-input/facet-number-input.tsx"],"sourcesContent":["[part='input-form'] {\n  display: grid;\n  grid-template-areas:\n    'label-start label-end .'\n    'input-start input-end apply-button';\n  grid-template-columns: 1fr 1fr auto;\n}\n\n[part='label-start'] {\n  grid-area: label-start;\n}\n[part='label-end'] {\n  grid-area: label-end;\n}\n[part='input-start'] {\n  grid-area: input-start;\n}\n[part='input-end'] {\n  grid-area: input-end;\n}\n\n[part='input-apply-button'] {\n  grid-area: apply-button;\n}\n","import {NumericFilter, NumericFilterState} from '@coveo/headless';\nimport {Component, h, State, Prop, Event, EventEmitter} from '@stencil/core';\nimport {AnyBindings} from '../../interface/bindings';\nimport {Button} from '../../stencil-button';\nimport {NumberInputType} from './number-input-type';\n\n/**\n * Internal component made to be integrated in a NumericFacet.\n * @internal\n */\n@Component({\n  tag: 'atomic-facet-number-input',\n  styleUrl: 'atomic-facet-number-input.pcss',\n  shadow: false,\n})\nexport class FacetNumberInput {\n  @State() private start?: number;\n  @State() private end?: number;\n  private startRef!: HTMLInputElement;\n  private endRef!: HTMLInputElement;\n\n  @Prop() public bindings!: AnyBindings;\n  @Prop() public type!: NumberInputType;\n  @Prop() public filter!: NumericFilter;\n  @Prop() public filterState!: NumericFilterState;\n  @Prop() public label!: string;\n\n  @Event({\n    eventName: 'atomic/numberInputApply',\n  })\n  private applyInput!: EventEmitter;\n\n  public connectedCallback() {\n    this.start = this.filterState.range?.start;\n    this.end = this.filterState.range?.end;\n  }\n\n  private apply() {\n    if (!this.startRef.validity.valid || !this.endRef.validity.valid) {\n      return;\n    }\n\n    this.applyInput.emit();\n    this.filter.setRange({\n      start: this.start!,\n      end: this.end!,\n    });\n  }\n\n  render() {\n    const label = this.bindings.i18n.t(this.label);\n    const minText = this.bindings.i18n.t('min');\n    const maxText = this.bindings.i18n.t('max');\n    const minAria = this.bindings.i18n.t('number-input-minimum', {label});\n    const maxAria = this.bindings.i18n.t('number-input-maximum', {label});\n    const apply = this.bindings.i18n.t('apply');\n    const applyAria = this.bindings.i18n.t('number-input-apply', {label});\n\n    const inputClasses =\n      'p-2.5 input-primary placeholder-neutral-dark min-w-0 mr-1';\n    const labelClasses = 'text-neutral-dark text-sm';\n\n    const step = this.type === 'integer' ? '1' : 'any';\n\n    return (\n      <form\n        class=\"mt-4 gap-y-0.5 px-2\"\n        part=\"input-form\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          this.apply();\n          return false;\n        }}\n      >\n        <label\n          part=\"label-start\"\n          class={labelClasses}\n          htmlFor={`${this.filterState.facetId}_start`}\n        >\n          {minText}\n        </label>\n        <input\n          part=\"input-start\"\n          id={`${this.filterState.facetId}_start`}\n          type=\"number\"\n          step={step}\n          ref={(ref) => (this.startRef = ref!)}\n          class={inputClasses}\n          aria-label={minAria}\n          required\n          min={Number.MIN_SAFE_INTEGER}\n          max={this.end}\n          value={this.filterState.range?.start}\n          onInput={(e) =>\n            (this.start = (e.target as HTMLInputElement).valueAsNumber)\n          }\n        />\n        <label\n          part=\"label-end\"\n          class={labelClasses}\n          htmlFor={`${this.filterState.facetId}_end`}\n        >\n          {maxText}\n        </label>\n        <input\n          part=\"input-end\"\n          id={`${this.filterState.facetId}_end`}\n          type=\"number\"\n          step={step}\n          ref={(ref) => (this.endRef = ref!)}\n          class={inputClasses}\n          aria-label={maxAria}\n          required\n          min={this.start}\n          max={Number.MAX_SAFE_INTEGER}\n          value={this.filterState.range?.end}\n          onInput={(e) =>\n            (this.end = (e.target as HTMLInputElement).valueAsNumber)\n          }\n        />\n        <Button\n          style=\"outline-primary\"\n          type=\"submit\"\n          part=\"input-apply-button\"\n          class=\"flex-none truncate p-2.5\"\n          ariaLabel={applyAria}\n          text={apply}\n        ></Button>\n      </form>\n    );\n  }\n}\n"],"mappings":"8JAAA,MAAMA,EAA4B,sXAClC,MAAAC,EAAeD,E,MCcFE,EAAgB,M,uOAiBpB,iBAAAC,GACLC,KAAKC,MAAQD,KAAKE,YAAYC,OAAOF,MACrCD,KAAKI,IAAMJ,KAAKE,YAAYC,OAAOC,G,CAG7B,KAAAC,GACN,IAAKL,KAAKM,SAASC,SAASC,QAAUR,KAAKS,OAAOF,SAASC,MAAO,CAChE,M,CAGFR,KAAKU,WAAWC,OAChBX,KAAKY,OAAOC,SAAS,CACnBZ,MAAOD,KAAKC,MACZG,IAAKJ,KAAKI,K,CAId,MAAAU,GACE,MAAMC,EAAQf,KAAKgB,SAASC,KAAKC,EAAElB,KAAKe,OACxC,MAAMI,EAAUnB,KAAKgB,SAASC,KAAKC,EAAE,OACrC,MAAME,EAAUpB,KAAKgB,SAASC,KAAKC,EAAE,OACrC,MAAMG,EAAUrB,KAAKgB,SAASC,KAAKC,EAAE,uBAAwB,CAACH,UAC9D,MAAMO,EAAUtB,KAAKgB,SAASC,KAAKC,EAAE,uBAAwB,CAACH,UAC9D,MAAMV,EAAQL,KAAKgB,SAASC,KAAKC,EAAE,SACnC,MAAMK,EAAYvB,KAAKgB,SAASC,KAAKC,EAAE,qBAAsB,CAACH,UAE9D,MAAMS,EACJ,4DACF,MAAMC,EAAe,4BAErB,MAAMC,EAAO1B,KAAK2B,OAAS,UAAY,IAAM,MAE7C,OACEC,EAAA,QAAAC,IAAA,2CACEC,MAAM,sBACNC,KAAK,aACLC,SAAWC,IACTA,EAAEC,iBACFlC,KAAKK,QACL,OAAO,KAAK,GAGduB,EAAA,SAAAC,IAAA,2CACEE,KAAK,cACLD,MAAOL,EACPU,QAAS,GAAGnC,KAAKE,YAAYkC,iBAE5BjB,GAEHS,EAAA,SAAAC,IAAA,2CACEE,KAAK,cACLM,GAAI,GAAGrC,KAAKE,YAAYkC,gBACxBT,KAAK,SACLD,KAAMA,EACNY,IAAMA,GAAStC,KAAKM,SAAWgC,EAC/BR,MAAON,EAAY,aACPH,EACZkB,SAAQ,KACRC,IAAKC,OAAOC,iBACZC,IAAK3C,KAAKI,IACVwC,MAAO5C,KAAKE,YAAYC,OAAOF,MAC/B4C,QAAUZ,GACPjC,KAAKC,MAASgC,EAAEa,OAA4BC,gBAGjDnB,EAAA,SAAAC,IAAA,2CACEE,KAAK,YACLD,MAAOL,EACPU,QAAS,GAAGnC,KAAKE,YAAYkC,eAE5BhB,GAEHQ,EAAA,SAAAC,IAAA,2CACEE,KAAK,YACLM,GAAI,GAAGrC,KAAKE,YAAYkC,cACxBT,KAAK,SACLD,KAAMA,EACNY,IAAMA,GAAStC,KAAKS,OAAS6B,EAC7BR,MAAON,EAAY,aACPF,EACZiB,SAAQ,KACRC,IAAKxC,KAAKC,MACV0C,IAAKF,OAAOO,iBACZJ,MAAO5C,KAAKE,YAAYC,OAAOC,IAC/ByC,QAAUZ,GACPjC,KAAKI,IAAO6B,EAAEa,OAA4BC,gBAG/CnB,EAACqB,EAAM,CAAApB,IAAA,2CACLqB,MAAM,kBACNvB,KAAK,SACLI,KAAK,qBACLD,MAAM,2BACNqB,UAAW5B,EACX6B,KAAM/C,I","ignoreList":[]}