{"file":"atomic-commerce-product-list.entry.js","mappings":"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","names":[],"sources":["src/components/commerce/atomic-commerce-product-list/atomic-commerce-product-list.pcss?tag=atomic-commerce-product-list&encapsulation=shadow","src/components/commerce/atomic-commerce-product-list/atomic-commerce-product-list.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n@import '../../../utils/tailwind-utilities/link-style.tw.css';\n@import '../../common/item-list/styles/placeholders.pcss';\n@import '../../common/item-list/styles/table-display.pcss';\n@import '../../common/item-list/styles/list-display.pcss';\n@import '../../common/item-list/styles/grid-display.pcss';\n\n:host {\n  .result-link {\n    @apply link-style;\n  }\n  .result-grid {\n    grid-template-columns: repeat(5, minmax(0, 1fr));\n    justify-items: center;\n    & a {\n      justify-content: center;\n    }\n  }\n\n  .result-list {\n    display: flex;\n    flex-direction: column;\n\n    & .result-item {\n      width: 100%;\n      max-width: 600px;\n      display: flex;\n      flex-wrap: wrap;\n      & .result-detailsÂ  {\n        align-content: center;\n      }\n    }\n  }\n\n  @media (width >= theme(--breakpoint-desktop)) {\n    .result-grid {\n      display: grid;\n    }\n  }\n\n  @media not all and (width >= theme(--breakpoint-desktop)) {\n    .result-grid {\n      display: flex;\n      flex-direction: column;\n    }\n  }\n}\n\natomic-product:not(.hydrated) {\n  visibility: hidden;\n}\n","import {\n  buildProductListing,\n  ProductListingState,\n  ProductListing,\n  buildSearch,\n  SearchState,\n  Search,\n  Product,\n  Summary,\n  ProductListingSummaryState,\n  SearchSummaryState,\n} from '@coveo/headless/commerce';\nimport {\n  Component,\n  Element,\n  Listen,\n  Method,\n  Prop,\n  State,\n  h,\n} from '@stencil/core';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../utils/initialization-utils';\nimport {FocusTargetController} from '../../../utils/stencil-accessibility-utils';\nimport {randomID} from '../../../utils/utils';\nimport {ResultsPlaceholdersGuard} from '../../common/atomic-result-placeholder/stencil-placeholders';\nimport {createAppLoadedListener} from '../../common/interface/store';\nimport {ItemListGuard} from '../../common/item-list/item-list-guard';\nimport {DisplayGrid} from '../../common/item-list/stencil-display-grid';\nimport {\n  DisplayTable,\n  DisplayTableData,\n  DisplayTableRow,\n} from '../../common/item-list/stencil-display-table';\nimport {DisplayWrapper} from '../../common/item-list/stencil-display-wrapper';\nimport {\n  ItemListCommon,\n  ItemRenderingFunction,\n} from '../../common/item-list/stencil-item-list-common';\nimport {\n  ItemDisplayDensity,\n  ItemDisplayImageSize,\n  ItemDisplayLayout,\n  getItemListDisplayClasses,\n} from '../../common/layout/display-options';\nimport {CommerceBindings} from '../atomic-commerce-interface/atomic-commerce-interface';\nimport {ProductTemplateProvider} from '../product-list/product-template-provider';\nimport {SelectChildProductEventArgs} from '../product-template-components/atomic-product-children/select-child-product-event';\n\n/**\n * @alpha\n * The `atomic-commerce-product-list` component is responsible for displaying products.\n *\n * @part result-list - The element containing the list of products.\n *\n * @slot default - The default slot where the product templates are defined.\n */\n@Component({\n  tag: 'atomic-commerce-product-list',\n  styleUrl: 'atomic-commerce-product-list.pcss',\n  shadow: true,\n})\nexport class AtomicCommerceProductList\n  implements InitializableComponent<CommerceBindings>\n{\n  @InitializeBindings() public bindings!: CommerceBindings;\n  public productListing!: ProductListing;\n  public search!: Search;\n  private loadingFlag = randomID('firstProductLoaded-');\n  private itemRenderingFunction: ItemRenderingFunction;\n  private nextNewResultTarget?: FocusTargetController;\n  private productTemplateProvider!: ProductTemplateProvider;\n  private productListCommon!: ItemListCommon;\n\n  @Element() public host!: HTMLDivElement;\n\n  @BindStateToController('productListing')\n  @State()\n  private productListingState!: ProductListingState;\n  @BindStateToController('search')\n  @State()\n  private searchState!: SearchState;\n  public summary!: Summary<ProductListingSummaryState | SearchSummaryState>;\n  @BindStateToController('summary')\n  @State()\n  private summaryState!: SearchSummaryState | ProductListingSummaryState;\n  @State() private resultTemplateRegistered = false;\n  @State() public error!: Error;\n  @State() private templateHasError = false;\n  @State() private isAppLoaded = false;\n\n  /**\n   * The desired number of placeholders to display while the product list is loading.\n   */\n  @Prop({reflect: true}) numberOfPlaceholders = 24;\n\n  /**\n   * The desired layout to use when displaying products. Layouts affect how many products to display per row and how visually distinct they are from each other.\n   */\n  @Prop({reflect: true}) display: ItemDisplayLayout = 'grid'; // TODO KIT-3640 - Support 'table', or use ItemDisplayBasicLayout type.\n\n  /**\n   * The spacing of various elements in the product list, including the gap between products, the gap between parts of a product, and the font sizes of different parts in a product.\n   */\n  @Prop({reflect: true}) density: ItemDisplayDensity = 'normal';\n\n  /**\n   * The expected size of the image displayed for products.\n   */\n  @Prop({reflect: true}) imageSize: ItemDisplayImageSize = 'small';\n\n  /**\n   * Sets a rendering function to bypass the standard HTML template mechanism for rendering products.\n   * You can use this function while working with web frameworks that don't use plain HTML syntax, e.g., React, Angular or Vue.\n   *\n   * Do not use this method if you integrate Atomic in a plain HTML deployment.\n   *\n   * @param productRenderingFunction\n   */\n  @Method() public async setRenderFunction(\n    productRenderingFunction: ItemRenderingFunction\n  ) {\n    this.itemRenderingFunction = productRenderingFunction;\n  }\n\n  public get focusTarget() {\n    if (!this.nextNewResultTarget) {\n      this.nextNewResultTarget = new FocusTargetController(this);\n    }\n    return this.nextNewResultTarget;\n  }\n\n  public initialize() {\n    if (this.bindings.interfaceElement.type === 'product-listing') {\n      this.productListing = buildProductListing(this.bindings.engine);\n      this.summary = this.productListing.summary();\n    } else {\n      this.search = buildSearch(this.bindings.engine);\n      this.summary = this.search.summary();\n    }\n\n    this.productTemplateProvider = new ProductTemplateProvider({\n      includeDefaultTemplate: true,\n      templateElements: Array.from(\n        this.host.querySelectorAll('atomic-product-template')\n      ),\n      getResultTemplateRegistered: () => this.resultTemplateRegistered,\n      getTemplateHasError: () => this.templateHasError,\n      setResultTemplateRegistered: (value: boolean) => {\n        this.resultTemplateRegistered = value;\n      },\n      setTemplateHasError: (value: boolean) => {\n        this.templateHasError = value;\n      },\n    });\n\n    this.productListCommon = new ItemListCommon({\n      engineSubscribe: this.bindings.engine.subscribe,\n      getCurrentNumberOfItems: () => this.productState.products.length,\n      getIsLoading: () => this.productState.isLoading,\n      host: this.host,\n      loadingFlag: this.loadingFlag,\n      nextNewItemTarget: this.focusTarget,\n      store: this.bindings.store,\n    });\n    createAppLoadedListener(this.bindings.store, (isAppLoaded) => {\n      this.isAppLoaded = isAppLoaded;\n    });\n  }\n\n  @Listen('atomic/selectChildProduct')\n  public onSelectChildProduct(event: CustomEvent<SelectChildProductEventArgs>) {\n    event.stopPropagation();\n    const child = event.detail.child;\n\n    if (this.bindings.interfaceElement.type === 'product-listing') {\n      this.productListing.promoteChildToParent(child);\n    } else if (this.bindings.interfaceElement.type === 'search') {\n      this.search.promoteChildToParent(child);\n    }\n  }\n\n  get productState() {\n    return this.bindings.interfaceElement.type === 'product-listing'\n      ? this.productListingState\n      : this.searchState;\n  }\n\n  public render() {\n    const listClasses = this.computeListDisplayClasses();\n\n    const {firstRequestExecuted, hasError, hasProducts} = this.summaryState;\n    return (\n      <ItemListGuard\n        hasError={hasError}\n        hasTemplate={this.resultTemplateRegistered}\n        templateHasError={this.productTemplateProvider.hasError}\n        firstRequestExecuted={firstRequestExecuted}\n        hasItems={hasProducts}\n      >\n        <DisplayWrapper display={this.display} listClasses={listClasses}>\n          <ResultsPlaceholdersGuard\n            density={this.density}\n            display={this.display}\n            imageSize={this.imageSize}\n            displayPlaceholders={!this.isAppLoaded}\n            numberOfPlaceholders={this.numberOfPlaceholders}\n          ></ResultsPlaceholdersGuard>\n          {this.display === 'table'\n            ? this.renderAsTable()\n            : this.display === 'grid'\n              ? this.renderAsGrid()\n              : this.renderAsList()}\n        </DisplayWrapper>\n      </ItemListGuard>\n    );\n  }\n\n  private computeListDisplayClasses() {\n    const displayPlaceholders = !this.isAppLoaded;\n\n    return getItemListDisplayClasses(\n      this.display,\n      this.density,\n      this.imageSize,\n\n      this.productState?.isLoading,\n      displayPlaceholders\n    );\n  }\n\n  private logWarningIfNeeded(message?: string) {\n    if (message) {\n      this.bindings.engine.logger.warn(message);\n    }\n  }\n\n  private getInteractiveProduct(product: Product) {\n    const parentController =\n      this.bindings.interfaceElement.type === 'product-listing'\n        ? this.productListing\n        : this.search;\n\n    return parentController.interactiveProduct({options: {product}});\n  }\n\n  private getPropsForAtomicProduct(product: Product) {\n    return {\n      interactiveProduct: this.getInteractiveProduct(product),\n      product,\n      renderingFunction: this.itemRenderingFunction,\n      loadingFlag: this.loadingFlag,\n      key: this.productListCommon.getResultId(\n        product.permanentid,\n        this.productState.responseId,\n        this.density,\n        this.imageSize\n      ),\n      content: this.productTemplateProvider.getTemplateContent(product),\n      linkContent:\n        this.display === 'grid'\n          ? this.productTemplateProvider.getLinkTemplateContent(product)\n          : this.productTemplateProvider.getEmptyLinkTemplateContent(),\n      store: this.bindings.store,\n      density: this.density,\n      imageSize: this.imageSize,\n      display: this.display,\n    };\n  }\n\n  private renderAsGrid() {\n    return this.productState.products.map((product, i) => {\n      const propsForAtomicProduct = this.getPropsForAtomicProduct(product);\n      const {interactiveProduct} = propsForAtomicProduct;\n      return (\n        <DisplayGrid\n          selectorForItem=\"atomic-product\"\n          item={{\n            ...product,\n            clickUri: product.clickUri,\n            title: product.ec_name ?? 'temp',\n          }}\n          {...propsForAtomicProduct.interactiveProduct}\n          setRef={(element) =>\n            element && this.productListCommon.setNewResultRef(element, i)\n          }\n          select={() => {\n            this.logWarningIfNeeded(interactiveProduct.warningMessage);\n            interactiveProduct.select();\n          }}\n          beginDelayedSelect={() => {\n            this.logWarningIfNeeded(interactiveProduct.warningMessage);\n            interactiveProduct.beginDelayedSelect();\n          }}\n          cancelPendingSelect={() => {\n            this.logWarningIfNeeded(interactiveProduct.warningMessage);\n            interactiveProduct.cancelPendingSelect();\n          }}\n        >\n          <atomic-product {...propsForAtomicProduct}></atomic-product>\n        </DisplayGrid>\n      );\n    });\n  }\n\n  private renderAsTable() {\n    if (this.productState.products.length > 0) {\n      return;\n    }\n    const listClasses = this.computeListDisplayClasses();\n    const firstItem = this.productState.products[0];\n\n    const propsForTableColumns = {\n      firstItem,\n      templateContentForFirstItem:\n        this.productTemplateProvider.getTemplateContent(firstItem),\n    };\n\n    return (\n      <DisplayTable\n        {...propsForTableColumns}\n        listClasses={listClasses}\n        logger={this.bindings.engine.logger}\n        itemRenderingFunction={this.itemRenderingFunction}\n        host={this.host}\n      >\n        {this.productState.products.map((product, i) => {\n          const propsForAtomicProduct = this.getPropsForAtomicProduct(product);\n          return (\n            <DisplayTableRow\n              {...propsForAtomicProduct}\n              rowIndex={i}\n              setRef={(element) =>\n                element && this.productListCommon.setNewResultRef(element, i)\n              }\n            >\n              <DisplayTableData\n                {...propsForTableColumns}\n                {...propsForAtomicProduct}\n                renderItem={(content) => {\n                  return (\n                    <atomic-product\n                      {...this}\n                      {...propsForAtomicProduct}\n                      content={content}\n                    ></atomic-product>\n                  );\n                }}\n              ></DisplayTableData>\n            </DisplayTableRow>\n          );\n        })}\n      </DisplayTable>\n    );\n  }\n\n  private renderAsList() {\n    return this.productState.products.map((product, i) => {\n      const propsForAtomicProduct = this.getPropsForAtomicProduct(product);\n      return (\n        <atomic-product\n          {...propsForAtomicProduct}\n          ref={(element) =>\n            element && this.productListCommon.setNewResultRef(element, i)\n          }\n          part=\"outline\"\n        ></atomic-product>\n      );\n    });\n  }\n}\n"],"version":3}