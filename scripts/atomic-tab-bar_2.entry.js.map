{"file":"atomic-tab-bar.atomic-tab-popover.entry.js","mappings":"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","names":[],"sources":["src/components/common/tabs/tab-bar.pcss?tag=atomic-tab-bar&encapsulation=shadow","src/components/common/tabs/tab-bar.tsx","src/components/common/tabs/tab-popover.pcss?tag=atomic-tab-popover&encapsulation=shadow","src/components/common/tabs/tab-popover.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n\n:host {\n  white-space: nowrap;\n  width: 100%;\n  overflow-x: visible;\n  display: flex;\n  position: relative;\n}\n","import {h, Component, Element, Host, State, Listen} from '@stencil/core';\nimport {Button} from '../stencil-button';\nimport {TabCommonElement} from './tab-common';\n\n/**\n * @internal\n */\n@Component({\n  tag: 'atomic-tab-bar',\n  shadow: true,\n  styleUrl: 'tab-bar.pcss',\n})\nexport class TabBar {\n  @Element() private host!: HTMLElement;\n\n  @State()\n  private popoverTabs: (typeof Button)[] = [];\n\n  private resizeObserver: ResizeObserver | undefined;\n\n  private get tabsFromSlot(): TabCommonElement[] {\n    const isTab = (tagName: string) =>\n      /atomic-.+-tab$/i.test(tagName) || /tab-button$/i.test(tagName);\n    return Array.from(this.host.querySelectorAll<TabCommonElement>('*')).filter(\n      (element) => isTab(element.tagName)\n    );\n  }\n\n  private get selectedTab() {\n    return this.tabsFromSlot.find((tab) => tab.active);\n  }\n\n  private get slotContentWidth() {\n    return this.tabsFromSlot.reduce(\n      (total, el) =>\n        total +\n        parseFloat(window.getComputedStyle(el).getPropertyValue('width')),\n      0\n    );\n  }\n\n  private get containerWidth() {\n    return parseFloat(\n      window.getComputedStyle(this.host).getPropertyValue('width')\n    );\n  }\n\n  private get isOverflow() {\n    return this.slotContentWidth > this.containerWidth;\n  }\n\n  private get tabPopover() {\n    return this.host.shadowRoot?.querySelector('atomic-tab-popover');\n  }\n\n  private get popoverWidth() {\n    return this.tabPopover ? this.getElementWidth(this.tabPopover) : 0;\n  }\n\n  private get overflowingTabs() {\n    const containerRelativeRightPosition =\n      this.host.getBoundingClientRect().right;\n    const selectedTabRelativeRightPosition =\n      this.selectedTab?.getBoundingClientRect().right;\n\n    return this.tabsFromSlot.filter((element) => {\n      const isBeforeSelectedTab = selectedTabRelativeRightPosition\n        ? selectedTabRelativeRightPosition >\n          element.getBoundingClientRect().right\n        : false;\n\n      const minimumWidthNeeded = isBeforeSelectedTab\n        ? this.popoverWidth + this.getElementWidth(this.selectedTab)\n        : this.popoverWidth;\n\n      const rightPositionLimit = !this.isOverflow\n        ? containerRelativeRightPosition\n        : containerRelativeRightPosition - minimumWidthNeeded;\n\n      return (\n        element.getBoundingClientRect().right > rightPositionLimit &&\n        !element.active\n      );\n    });\n  }\n\n  private get displayedTabs() {\n    return this.tabsFromSlot.filter((el) => !this.overflowingTabs.includes(el));\n  }\n\n  private get lastDisplayedTab() {\n    const displayedTabs = this.displayedTabs;\n    return displayedTabs[displayedTabs.length - 1];\n  }\n\n  private get lastDisplayedTabRightPosition() {\n    return (\n      this.lastDisplayedTab.getBoundingClientRect().right -\n      this.host.getBoundingClientRect().left\n    );\n  }\n\n  private updatePopoverPosition() {\n    this.tabPopover?.style.setProperty(\n      'left',\n      `${this.displayedTabs.length ? this.lastDisplayedTabRightPosition : 0}px`\n    );\n  }\n\n  private getElementWidth = (element?: Element) => {\n    return element\n      ? parseFloat(window.getComputedStyle(element).getPropertyValue('width'))\n      : 0;\n  };\n\n  private hideElement = (el: HTMLElement) => {\n    el.style.visibility = 'hidden';\n    el.ariaHidden = 'true';\n  };\n\n  private showElement = (el: HTMLElement) => {\n    el.style.visibility = 'visible';\n    el.ariaHidden = 'false';\n  };\n\n  private updateTabVisibility = (\n    tabs: TabCommonElement[],\n    isVisible: boolean\n  ) => {\n    const tabCount = this.tabsFromSlot.length;\n\n    tabs.forEach((tab, index) => {\n      tab.style.setProperty(\n        'order',\n        String(isVisible ? index + 1 : tabCount - tabs.length + index + 1)\n      );\n      if (isVisible) {\n        this.showElement(tab);\n      } else {\n        this.hideElement(tab);\n      }\n    });\n  };\n\n  private updatePopoverTabs = () => {\n    this.popoverTabs = this.overflowingTabs.map((tab) => (\n      <li>\n        <Button\n          part=\"popover-tab\"\n          style=\"text-transparent\"\n          class=\"w-full truncate rounded px-4 py-2 text-left font-semibold\"\n          ariaLabel={tab.label}\n          title={tab.label}\n          onClick={() => {\n            tab.select();\n            this.updatePopoverTabs();\n            this.tabPopover?.toggle();\n          }}\n        >\n          {tab.label}\n        </Button>\n      </li>\n    ));\n  };\n\n  private setTabButtonMaxWidth = () => {\n    this.displayedTabs.forEach((tab) => {\n      tab.style.setProperty('max-width', `calc(100% - ${this.popoverWidth}px)`);\n    });\n  };\n\n  private updateTabsDisplay = () => {\n    this.updateTabVisibility(this.overflowingTabs, false);\n    this.updateTabVisibility(this.displayedTabs, true);\n    this.setTabButtonMaxWidth();\n    this.updatePopoverPosition();\n    this.updatePopoverTabs();\n    this.tabPopover?.setButtonVisibility(!!this.overflowingTabs.length);\n  };\n\n  @Listen('atomic/tabRendered')\n  public resolveResult(event: CustomEvent<{}>) {\n    event.stopPropagation();\n    this.updatePopoverTabs();\n  }\n  public componentWillUpdate() {\n    this.updateTabsDisplay();\n  }\n\n  public componentDidLoad() {\n    this.resizeObserver = new ResizeObserver(() => {\n      this.updateTabsDisplay();\n    });\n    this.resizeObserver.observe(this.host);\n  }\n\n  public disconnectedCallback() {\n    this.resizeObserver?.disconnect();\n  }\n\n  public render = () => {\n    return (\n      <Host class=\"overflow-x-clip overflow-y-visible\">\n        <slot></slot>\n        <atomic-tab-popover exportparts=\"popover-button, value-label, arrow-icon, backdrop overflow-tabs\">\n          {this.popoverTabs}\n        </atomic-tab-popover>\n      </Host>\n    );\n  };\n}\n","@import '../../../global/global.pcss';\n\n:host {\n  position: absolute;\n}\n\n:host(.visibility-hidden) {\n  visibility: hidden;\n}\n\n[part='overflow-tabs'] {\n  flex-direction: column;\n  max-width: 150px;\n\n  button {\n    text-align: start;\n  }\n}\n","import {\n  createPopperLite as createPopper,\n  preventOverflow,\n  Instance as PopperInstance,\n} from '@popperjs/core';\nimport {\n  Component,\n  h,\n  Listen,\n  State,\n  Element,\n  Host,\n  Method,\n} from '@stencil/core';\nimport ArrowBottomIcon from '../../../images/arrow-bottom-rounded.svg';\nimport {\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../utils/initialization-utils';\nimport {Bindings} from '../../search/atomic-search-interface/atomic-search-interface';\nimport {Button} from '../stencil-button';\n\n/**\n * @internal\n */\n@Component({\n  tag: 'atomic-tab-popover',\n  shadow: true,\n  styleUrl: 'tab-popover.pcss',\n})\nexport class TabPopover implements InitializableComponent {\n  @Element() private host!: HTMLElement;\n\n  @InitializeBindings() public bindings!: Bindings;\n\n  @State()\n  public show = false;\n\n  @State()\n  public error!: Error;\n\n  @State()\n  private isOpen = false;\n\n  private buttonRef!: HTMLElement;\n  private popupRef!: HTMLElement;\n  private popperInstance?: PopperInstance;\n  public popoverId = 'atomic-tab-popover';\n\n  public initialize() {}\n\n  private initializePopover() {\n    this.popupRef.classList.add('popover-nested');\n  }\n\n  @Listen('keydown')\n  public handleKeyDown(e: KeyboardEvent) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    if (e.key === 'Escape') {\n      this.toggle();\n    } else if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n      e.preventDefault();\n      this.navigatePopover(e.key);\n    }\n  }\n\n  private getTabButtons(): HTMLButtonElement[] {\n    const slot = this.popupRef.children[0] as HTMLSlotElement;\n    return Array.from(slot.assignedElements())\n      .map((el) => (el as HTMLElement).querySelector('button'))\n      .filter((el): el is HTMLButtonElement => el !== null);\n  }\n\n  private getCurrentTabIndex(elements: HTMLButtonElement[]): number {\n    const MAX_SHADOW_DEPTH = 3;\n    let currentElement = document.activeElement;\n    let depth = 0;\n\n    while (currentElement?.shadowRoot && depth < MAX_SHADOW_DEPTH) {\n      currentElement = currentElement.shadowRoot.activeElement;\n      depth++;\n    }\n\n    if (!(currentElement instanceof HTMLButtonElement)) {\n      return -1;\n    }\n\n    return elements.indexOf(currentElement);\n  }\n\n  private navigatePopover(key: string): void {\n    const tabButtons = this.getTabButtons();\n    if (!tabButtons.length) {\n      return;\n    }\n\n    const currentIndex = this.getCurrentTabIndex(tabButtons);\n\n    const startIndex = currentIndex > -1 ? currentIndex : -1;\n\n    let nextIndex;\n    if (currentIndex === -1) {\n      nextIndex = key === 'ArrowDown' ? 0 : tabButtons.length - 1;\n    } else {\n      nextIndex =\n        key === 'ArrowDown'\n          ? (startIndex + 1) % tabButtons.length\n          : (startIndex - 1 + tabButtons.length) % tabButtons.length;\n    }\n\n    tabButtons[nextIndex]?.focus();\n  }\n\n  get slotElements() {\n    return this.host.children;\n  }\n\n  get hasTabs() {\n    return !!this.popupRef.children.length;\n  }\n\n  @Method()\n  public async toggle() {\n    this.isOpen = !this.isOpen;\n  }\n\n  @Method()\n  public async setButtonVisibility(isVisible: boolean) {\n    this.show = isVisible;\n  }\n\n  @Method()\n  public async closePopoverOnFocusOut(event: FocusEvent) {\n    const slot = this.popupRef.children[0] as HTMLSlotElement;\n    const assignedElements = slot.assignedElements() as HTMLElement[];\n\n    const isMovingToSlottedElement = assignedElements.some(\n      (element) =>\n        element === event.relatedTarget ||\n        element.contains(event.relatedTarget as Node)\n    );\n\n    if (isMovingToSlottedElement) {\n      return;\n    }\n\n    if (!this.popupRef.contains(event.relatedTarget as Node)) {\n      this.closePopover();\n    }\n  }\n\n  private closePopover() {\n    this.isOpen = false;\n  }\n\n  private renderDropdownButton() {\n    const label = this.bindings?.i18n.t('more');\n    const ariaLabel = this.bindings?.i18n.t('tab-popover', {label});\n    const buttonClasses = [\n      'relative',\n      'pb-1',\n      'mt-1',\n      'group',\n      'mr-6',\n      'font-semibold',\n    ];\n\n    return (\n      <Button\n        ref={(el) => (this.buttonRef = el!)}\n        style=\"text-transparent\"\n        onClick={() => this.toggle()}\n        part=\"popover-button\"\n        ariaExpanded={`${this.isOpen}`}\n        ariaLabel={ariaLabel}\n        ariaControls={this.popoverId}\n        class={`${buttonClasses.join(' ')}`}\n      >\n        <span\n          title={label}\n          part=\"value-label\"\n          class={\n            'group-hover:text-primary-light group-focus:text-primary mr-1.5 truncate'\n          }\n        >\n          {label}\n        </span>\n        <atomic-icon\n          part=\"arrow-icon\"\n          class={`group-hover:text-primary-light group-focus:text-primary ml-auto w-2 ${\n            this.isOpen ? 'rotate-180' : ''\n          }`}\n          icon={ArrowBottomIcon}\n        ></atomic-icon>\n      </Button>\n    );\n  }\n\n  private renderBackdrop() {\n    return (\n      <div\n        part=\"backdrop\"\n        class=\"fixed top-0 right-0 bottom-0 left-0 z-9998 cursor-pointer bg-transparent\"\n        onClick={() => this.toggle()}\n      ></div>\n    );\n  }\n\n  private renderPopover() {\n    return (\n      <div class={`relative ${this.isOpen ? 'z-9999' : ''}`}>\n        {this.renderDropdownButton()}\n        <ul\n          id={this.popoverId}\n          ref={(el) => (this.popupRef = el!)}\n          part=\"overflow-tabs\"\n          class={`bg-background border-neutral absolute rounded-lg border py-2 shadow-lg ${\n            this.isOpen ? 'flex' : 'hidden'\n          }`}\n        >\n          <slot></slot>\n        </ul>\n      </div>\n    );\n  }\n\n  public componentDidRender() {\n    if (this.popperInstance || !this.buttonRef || !this.popupRef) {\n      return;\n    }\n\n    this.popperInstance = createPopper(this.buttonRef, this.popupRef, {\n      placement: 'bottom-end',\n      modifiers: [preventOverflow],\n    });\n    this.initializePopover();\n  }\n\n  public componentDidUpdate() {\n    this.popperInstance?.forceUpdate();\n  }\n\n  public render() {\n    return (\n      <Host\n        onFocusout={(event: FocusEvent) => this.closePopoverOnFocusOut(event)}\n        class={this.show ? '' : 'visibility-hidden'}\n        aria-hidden={!this.show}\n      >\n        {this.renderPopover()}\n        {this.isOpen && this.renderBackdrop()}\n      </Host>\n    );\n  }\n}\n"],"version":3}