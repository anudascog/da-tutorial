{"version":3,"names":["atomicInsightUserActionsToggleCss","AtomicInsightUserActionsToggleStyle0","AtomicInsightUserActionsToggle","this","excludedCustomActions","initialize","userActions","buildInsightUserActions","bindings","engine","options","ticketCreationDate","ticketCreationDateTime","enableModal","modalRef","isOpen","logOpenUserActions","loadModal","document","createElement","host","insertAdjacentElement","openButton","buttonRef","userId","render","h","IconButton","key","partPrefix","style","icon","Clockicon","ariaLabel","i18n","t","onClick","title","button","__decorate","InitializeBindings","BindStateToController"],"sources":["src/components/insight/user-actions/atomic-insight-user-actions-toggle/atomic-insight-user-actions-toggle.pcss?tag=atomic-insight-user-actions-toggle&encapsulation=shadow","src/components/insight/user-actions/atomic-insight-user-actions-toggle/atomic-insight-user-actions-toggle.tsx"],"sourcesContent":["@import '../../../../global/global.pcss';\n","import {\n  buildUserActions as buildInsightUserActions,\n  UserActions as InsightUserActions,\n  UserActionsState as InsightUserActionsState,\n} from '@coveo/headless/insight';\nimport {Component, h, Prop, Element, State} from '@stencil/core';\nimport Clockicon from '../../../../images/clock.svg';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../../utils/initialization-utils';\nimport {IconButton} from '../../../common/iconButton';\nimport {InsightBindings} from '../../atomic-insight-interface/atomic-insight-interface';\n\n/**\n * @internal\n * The `atomic-insight-user-actions-toggle` component displays a button that opens a modal containing the user actions timeline component.\n */\n@Component({\n  tag: 'atomic-insight-user-actions-toggle',\n  styleUrl: 'atomic-insight-user-actions-toggle.pcss',\n  shadow: true,\n})\nexport class AtomicInsightUserActionsToggle\n  implements InitializableComponent<InsightBindings>\n{\n  @Element() public host!: HTMLElement;\n  @InitializeBindings() public bindings!: InsightBindings;\n  public userActions!: InsightUserActions;\n  @BindStateToController('userActions')\n  @State()\n  public userActionsState!: InsightUserActionsState;\n  @State() public error!: Error;\n\n  /**\n   * The ID of the user whose actions are being displayed.\n   */\n  @Prop() public userId!: string;\n  /**\n   * The date and time when the case was created. For example \"2024-01-01T00:00:00Z\"\n   */\n  @Prop() public ticketCreationDateTime!: string;\n  /**\n   * The names of custom events to exclude.\n   */\n  @Prop() public excludedCustomActions: string[] = [];\n\n  public initialize() {\n    this.userActions = buildInsightUserActions(this.bindings.engine, {\n      options: {\n        ticketCreationDate: this.ticketCreationDateTime,\n        excludedCustomActions: this.excludedCustomActions,\n      },\n    });\n  }\n\n  private buttonRef?: HTMLButtonElement;\n  private modalRef?: HTMLAtomicInsightUserActionsModalElement;\n\n  private enableModal() {\n    this.modalRef && (this.modalRef.isOpen = true);\n    this.userActions.logOpenUserActions();\n  }\n\n  private loadModal() {\n    if (this.modalRef) {\n      return;\n    }\n\n    this.modalRef = document.createElement('atomic-insight-user-actions-modal');\n\n    this.host.insertAdjacentElement('beforebegin', this.modalRef);\n    this.modalRef.openButton = this.buttonRef;\n    this.modalRef.userId = this.userId;\n    this.modalRef.ticketCreationDateTime = this.ticketCreationDateTime;\n    this.modalRef.excludedCustomActions = this.excludedCustomActions;\n  }\n\n  public render() {\n    return (\n      <IconButton\n        partPrefix=\"insight-user-actions-toggle\"\n        style=\"outline-neutral\"\n        icon={Clockicon}\n        ariaLabel={this.bindings.i18n.t('user-actions')}\n        onClick={() => {\n          this.enableModal();\n        }}\n        title={this.bindings.i18n.t('user-actions')}\n        buttonRef={(button?: HTMLButtonElement) => {\n          if (!button) {\n            return;\n          }\n          this.buttonRef = button;\n          this.loadModal();\n        }}\n      />\n    );\n  }\n}\n"],"mappings":"wYAAA,MAAMA,EAAoC,k60DAC1C,MAAAC,EAAeD,E,iXCuBFE,EAA8B,M,yBAsB1BC,KAAAC,sBAAkC,G,4IAAA,E,CAE1C,UAAAC,GACLF,KAAKG,YAAcC,EAAwBJ,KAAKK,SAASC,OAAQ,CAC/DC,QAAS,CACPC,mBAAoBR,KAAKS,uBACzBR,sBAAuBD,KAAKC,wB,CAQ1B,WAAAS,GACNV,KAAKW,WAAaX,KAAKW,SAASC,OAAS,MACzCZ,KAAKG,YAAYU,oB,CAGX,SAAAC,GACN,GAAId,KAAKW,SAAU,CACjB,M,CAGFX,KAAKW,SAAWI,SAASC,cAAc,qCAEvChB,KAAKiB,KAAKC,sBAAsB,cAAelB,KAAKW,UACpDX,KAAKW,SAASQ,WAAanB,KAAKoB,UAChCpB,KAAKW,SAASU,OAASrB,KAAKqB,OAC5BrB,KAAKW,SAASF,uBAAyBT,KAAKS,uBAC5CT,KAAKW,SAASV,sBAAwBD,KAAKC,qB,CAGtC,MAAAqB,GACL,OACEC,EAACC,EAAU,CAAAC,IAAA,2CACTC,WAAW,8BACXC,MAAM,kBACNC,KAAMC,EACNC,UAAW9B,KAAKK,SAAS0B,KAAKC,EAAE,gBAChCC,QAAS,KACPjC,KAAKU,aAAa,EAEpBwB,MAAOlC,KAAKK,SAAS0B,KAAKC,EAAE,gBAC5BZ,UAAYe,IACV,IAAKA,EAAQ,CACX,M,CAEFnC,KAAKoB,UAAYe,EACjBnC,KAAKc,WAAW,G,6BAnEKsB,EAAA,CAA5BC,K,+BAIMD,EAAA,CAFNE,EAAsB,gB","ignoreList":[]}