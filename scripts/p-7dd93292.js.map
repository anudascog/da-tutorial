{"version":3,"names":["DEFAULT_MOBILE_BREAKPOINT","replaceMediaQuery","style","mobileBreakpoint","regex","RegExp","replace","replaceStyleSheet","element","stylesheets","shadowRoot","adoptedStyleSheets","length","stylesheet","Object","values","cssRules","map","rule","cssText","join","replaceSync","replateStyleContent","breakpoint","styleTag","querySelector","textContent","layouts","updateBreakpoints","layout","closest"],"sources":["src/utils/replace-breakpoint.ts"],"sourcesContent":["import {closest} from './dom-utils';\n\nexport const DEFAULT_MOBILE_BREAKPOINT = '1024px';\n\nfunction replaceMediaQuery(style: string, mobileBreakpoint: string) {\n  const regex = new RegExp(\n    `\\\\(min-width: ${DEFAULT_MOBILE_BREAKPOINT}\\\\)|\\\\(width >= ${DEFAULT_MOBILE_BREAKPOINT}\\\\)`,\n    'g'\n  );\n  return style.replace(regex, `(width >= ${mobileBreakpoint})`);\n}\n\nfunction replaceStyleSheet(element: HTMLElement, mobileBreakpoint: string) {\n  const stylesheets = element.shadowRoot?.adoptedStyleSheets;\n  if (!stylesheets || !stylesheets.length) {\n    return;\n  }\n\n  const stylesheet = stylesheets[0];\n  const style = Object.values(stylesheet.cssRules)\n    .map((rule) => rule.cssText)\n    .join('');\n  stylesheet.replaceSync(replaceMediaQuery(style, mobileBreakpoint));\n}\n\nfunction replateStyleContent(element: HTMLElement, breakpoint: string) {\n  const styleTag = element.shadowRoot?.querySelector('style');\n  if (!styleTag) {\n    return;\n  }\n\n  styleTag.textContent = replaceMediaQuery(styleTag.textContent!, breakpoint);\n}\n\nconst layouts = ['atomic-search-layout', 'atomic-insight-layout'];\ntype LayoutElement = HTMLElement & {mobileBreakpoint: string};\nexport function updateBreakpoints(element: HTMLElement) {\n  const layout: LayoutElement | null = closest(element, layouts.join(', '));\n\n  if (!layout?.mobileBreakpoint) {\n    return;\n  }\n\n  if (layout.mobileBreakpoint === DEFAULT_MOBILE_BREAKPOINT) {\n    return;\n  }\n\n  replaceStyleSheet(element, layout.mobileBreakpoint);\n  replateStyleContent(element, layout.mobileBreakpoint);\n}\n"],"mappings":"0CAEaA,EAA4B,SAEzC,SAASC,EAAkBC,EAAeC,GACxC,MAAMC,EAAQ,IAAIC,OAChB,iBAAiBL,oBAA4CA,OAC7D,KAEF,OAAOE,EAAMI,QAAQF,EAAO,aAAaD,KAC3C,CAEA,SAASI,EAAkBC,EAAsBL,GAC/C,MAAMM,EAAcD,EAAQE,YAAYC,mBACxC,IAAKF,IAAgBA,EAAYG,OAAQ,CACvC,M,CAGF,MAAMC,EAAaJ,EAAY,GAC/B,MAAMP,EAAQY,OAAOC,OAAOF,EAAWG,UACpCC,KAAKC,GAASA,EAAKC,UACnBC,KAAK,IACRP,EAAWQ,YAAYpB,EAAkBC,EAAOC,GAClD,CAEA,SAASmB,EAAoBd,EAAsBe,GACjD,MAAMC,EAAWhB,EAAQE,YAAYe,cAAc,SACnD,IAAKD,EAAU,CACb,M,CAGFA,EAASE,YAAczB,EAAkBuB,EAASE,YAAcH,EAClE,CAEA,MAAMI,EAAU,CAAC,uBAAwB,yB,SAEzBC,EAAkBpB,GAChC,MAAMqB,EAA+BC,EAAQtB,EAASmB,EAAQP,KAAK,OAEnE,IAAKS,GAAQ1B,iBAAkB,CAC7B,M,CAGF,GAAI0B,EAAO1B,mBAAqBH,EAA2B,CACzD,M,CAGFO,EAAkBC,EAASqB,EAAO1B,kBAClCmB,EAAoBd,EAASqB,EAAO1B,iBACtC,Q","ignoreList":[]}