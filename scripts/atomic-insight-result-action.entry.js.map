{"file":"atomic-insight-result-action.entry.js","mappings":"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","names":[],"sources":["src/components/insight/atomic-insight-result-action/atomic-insight-result-action.pcss?tag=atomic-insight-result-action","src/components/insight/atomic-insight-result-action/atomic-insight-result-action.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n\n:host {\n  &::part(result-action-button) {\n    @apply flex items-center justify-center;\n    @apply h-8 w-8;\n  }\n}\n","import {Result} from '@coveo/headless';\nimport {\n  InsightAnalyticsActionCreators,\n  loadInsightAnalyticsActions,\n} from '@coveo/headless/insight';\nimport {Component, Event, EventEmitter, Prop, State, h} from '@stencil/core';\nimport AttachIcon from '../../../images/attach.svg';\nimport CopyIcon from '../../../images/copy-dark.svg';\nimport EmailIcon from '../../../images/email.svg';\nimport QuickviewIcon from '../../../images/preview.svg';\nimport FeedIcon from '../../../images/share-post.svg';\nimport {\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../utils/initialization-utils';\nimport {IconButton} from '../../common/iconButton';\nimport {ResultContext} from '../../search/result-template-components/result-template-decorators';\nimport {InsightBindings} from '../atomic-insight-interface/atomic-insight-interface';\n\nexport interface InsightResultActionClickedEvent {\n  action: string;\n  result: Result;\n}\n\nexport enum Actions {\n  CopyToClipboard = 'copyToClipboard',\n  AttachToCase = 'attachToCase',\n  Quickview = 'quickview',\n  PostToFeed = 'postToFeed',\n  SendAsEmail = 'sendAsEmail',\n}\n\n/**\n * @internal\n */\n@Component({\n  tag: 'atomic-insight-result-action',\n  styleUrl: 'atomic-insight-result-action.pcss',\n})\nexport class AtomicInsightResultAction\n  implements InitializableComponent<InsightBindings>\n{\n  @InitializeBindings() public bindings!: InsightBindings;\n  @ResultContext() private result!: Result;\n  @State() public error!: Error;\n\n  @Event({\n    eventName: 'atomicInsightResultActionClicked',\n    composed: true,\n    cancelable: true,\n    bubbles: true,\n  })\n  private actionClicked!: EventEmitter<InsightResultActionClickedEvent>;\n\n  /**\n   * Specify the result action icon to display.\n   */\n  @Prop({mutable: true}) public icon = '';\n\n  /**\n   * The text tooltip to show on the result action icon.\n   */\n  @Prop({mutable: true}) public tooltip = '';\n\n  /**\n   * The text tooltip to show on the result action icon for some time after clicking the button.\n   */\n  @Prop({mutable: true}) public tooltipOnClick = '';\n\n  /**\n   * The type of action to perform when the result action is clicked. This will be sent along the event fired when the button is clicked.\n   */\n  @Prop({mutable: true}) public action: Actions | string = '';\n\n  private actions!: InsightAnalyticsActionCreators;\n\n  public initialize() {\n    this.actions = loadInsightAnalyticsActions(this.bindings.engine);\n  }\n\n  private onClick() {\n    if (this.tooltipOnClick) {\n      const originalTooltip = this.tooltip;\n      this.tooltip = this.tooltipOnClick;\n      setTimeout(() => {\n        this.tooltip = originalTooltip;\n      }, 1000);\n    }\n\n    switch (this.action) {\n      case Actions.CopyToClipboard:\n        this.bindings.engine.dispatch(\n          this.actions.logCopyToClipboard(this.result)\n        );\n        navigator.clipboard.writeText(this.result?.clickUri);\n        break;\n      case Actions.PostToFeed:\n        this.bindings.engine.dispatch(\n          this.actions.logFeedItemTextPost(this.result)\n        );\n        break;\n      case Actions.SendAsEmail:\n        this.bindings.engine.dispatch(\n          this.actions.logCaseSendEmail(this.result)\n        );\n        break;\n    }\n\n    this.actionClicked.emit({action: this.action, result: this.result});\n  }\n\n  private getIcon() {\n    if (this.icon) {\n      return this.icon;\n    }\n\n    switch (this.action) {\n      case Actions.CopyToClipboard:\n        return CopyIcon;\n      case Actions.AttachToCase:\n        return AttachIcon;\n      case Actions.Quickview:\n        return QuickviewIcon;\n      case Actions.PostToFeed:\n        return FeedIcon;\n      case Actions.SendAsEmail:\n        return EmailIcon;\n      default:\n        return QuickviewIcon;\n    }\n  }\n\n  public render() {\n    return (\n      <IconButton\n        partPrefix=\"result-action\"\n        style=\"outline-neutral\"\n        icon={this.getIcon()}\n        title={this.tooltip}\n        onClick={() => this.onClick()}\n      />\n    );\n  }\n}\n"],"version":3}