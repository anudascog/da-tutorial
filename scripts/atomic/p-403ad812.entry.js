import{r as t,c as e,h as i}from"./p-dc3df5ce.js";import{isUndefined as s}from"@coveo/bueno";import{B as a}from"./p-f5982205.js";import{buildDateRange as n}from"@coveo/headless";import{p as r}from"./p-10f62f16.js";import"./p-f7133a5a.js";import"./p-1580513b.js";import"./p-21ab6f55.js";import"./p-35e58270.js";import"./p-0462f723.js";const p="[part='input-form']{display:grid;grid-template-areas:'label-start label-end .'\n    'input-start input-end apply-button';grid-template-columns:1fr 1fr auto}[part='label-start']{grid-area:label-start}[part='label-end']{grid-area:label-end}[part='input-start']{grid-area:input-start}[part='input-end']{grid-area:input-end}[part='input-apply-button']{grid-area:apply-button}";const d=p;const u=class{constructor(i){t(this,i);this.applyInput=e(this,"atomic/numberInputApply",7);this.start=undefined;this.end=undefined;this.bindings=undefined;this.label=undefined;this.range=undefined;this.facet=undefined}connectedCallback(){this.start=this.range?.start;this.end=this.range?.end}apply(){if(!this.startRef.validity.valid||!this.endRef.validity.valid){return}this.applyInput.emit({start:this.start,end:this.end})}get absoluteMinimum(){const{field:t}=this.facet.state;const e=["ec_price","ec_promo_price"].includes(t);return e?0:Number.MIN_SAFE_INTEGER}get minimumInputValue(){return s(this.start)?this.absoluteMinimum:this.start}get maximumInputValue(){return s(this.end)?Number.MAX_SAFE_INTEGER:this.end}render(){const{facetId:t}=this.facet.state;const e=this.bindings.i18n.t(this.label);const s=this.bindings.i18n.t("min");const n=this.bindings.i18n.t("max");const r=this.bindings.i18n.t("number-input-minimum",{label:e});const p=this.bindings.i18n.t("number-input-maximum",{label:e});const d=this.bindings.i18n.t("apply");const u=this.bindings.i18n.t("number-input-apply",{label:e});const l="p-2.5 input-primary placeholder-neutral-dark min-w-0 mr-1";const h="text-neutral-dark text-sm";const c="any";return i("form",{key:"957339b20ee1dd2ad3eb657bf6c7926bb3506290",class:"mt-4 gap-y-0.5 px-2",part:"input-form",onSubmit:t=>{t.preventDefault();this.apply();return false}},i("label",{key:"39a2983aaf170c6a0560dd9e9e398cff65b9dd2b",part:"label-start",class:h,htmlFor:`${t}_start`},s),i("input",{key:"2a0a15acb9b7b0ba9a0c76444a998210d4f94a33",part:"input-start",id:`${t}_start`,type:"number",step:c,ref:t=>this.startRef=t,class:l,"aria-label":r,required:true,min:this.absoluteMinimum,max:this.maximumInputValue,value:this.range?.start,onInput:t=>this.start=t.target.valueAsNumber}),i("label",{key:"b5e52ee4b228add01f4a341b7ee90c10bb2e9dde",part:"label-end",class:h,htmlFor:`${t}_end`},n),i("input",{key:"cfabe3fb219bc478831c3fd4c6e93513ce116b79",part:"input-end",id:`${t}_end`,type:"number",step:c,ref:t=>this.endRef=t,class:l,"aria-label":p,required:true,min:this.minimumInputValue,max:Number.MAX_SAFE_INTEGER,value:this.range?.end,onInput:t=>this.end=t.target.valueAsNumber}),i(a,{key:"4a7b8104fc8933b319459b557ae91ebdbe238ab0",style:"outline-primary",type:"submit",part:"input-apply-button",class:"flex-none truncate p-2.5",ariaLabel:u,text:d}))}};u.style=d;const l=class{constructor(i){t(this,i);this.applyInput=e(this,"atomic/dateInputApply",7);this.start=undefined;this.end=undefined;this.bindings=undefined;this.rangeGetter=undefined;this.rangeSetter=undefined;this.facetId=undefined;this.label=undefined;this.min=undefined;this.max=undefined}connectedCallback(){const t=this.rangeGetter();this.start=t?r(t.start).toDate():undefined;this.end=t?r(t.end).toDate():undefined}componentDidUpdate(){if(!this.startRef.value&&!this.endRef.value){this.startRef.min=this.min||this.formattedDateValue("1401-01-01");this.endRef.max=this.max||"";this.startRef.max=this.max||"";this.endRef.min=this.min||""}}apply(){if(!this.startRef.validity.valid||!this.endRef.validity.valid){return}this.applyInput.emit({start:this.start,end:this.end});const t=n({start:this.start,end:this.end.setHours(23,59,59,999)});this.rangeSetter(t)}formattedDateValue(t){if(!t){return""}return r(t).format("YYYY-MM-DD")}render(){const t=this.bindings.i18n.t(this.label);const e=this.bindings.i18n.t("start");const s=this.bindings.i18n.t("end");const n=this.bindings.i18n.t("date-input-start",{label:t});const p=this.bindings.i18n.t("date-input-end",{label:t});const d=this.bindings.i18n.t("apply");const u=this.bindings.i18n.t("date-input-apply",{label:t});const l="input-primary p-2.5";const h="text-neutral-dark self-center";const c="yyyy-mm-dd";const b="^(1[4-9]\\d{2}|2\\d{3})-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$";const o=this.rangeGetter();return i("form",{key:"d3c50385b27ffa80d2d34b67ab9bca14823406f7",class:"mt-4 grid grid-cols-[min-content_1fr] gap-2 px-2",onSubmit:t=>{t.preventDefault();this.apply();return false}},i("label",{key:"1d8e3e495308b8afaf1dee3158ef421de00bfb35",part:"input-label",class:h,htmlFor:`${this.facetId}_start`},e,":"),i("input",{key:"5402d1ac25a1b84924070674b5a93927ea9b62e2",id:`${this.facetId}_start`,part:"input-start",type:"date",ref:t=>this.startRef=t,class:l,"aria-label":n,placeholder:c,pattern:b,required:true,min:this.min||this.formattedDateValue("1401-01-01"),max:this.end?this.formattedDateValue(this.end):this.max,value:this.formattedDateValue(o?.start),onInput:t=>this.start=r(t.target.value).toDate()}),i("label",{key:"2b051dacd5307b4ce09bb2952887deab05f795f3",part:"input-label",class:h,htmlFor:`${this.facetId}_end`},s,":"),i("input",{key:"75df74b2c7b0e9b8c9de2def45f55f38eb0ba749",id:`${this.facetId}_end`,part:"input-end",type:"date",ref:t=>this.endRef=t,class:l,"aria-label":p,placeholder:c,pattern:b,required:true,min:this.formattedDateValue(this.start)||this.min,max:this.max,value:this.formattedDateValue(o?.end),onInput:t=>this.end=r(t.target.value).toDate()}),i(a,{key:"8bb1a0946c522258e1bc3c32da1e011acb28b8d9",style:"outline-primary",type:"submit",part:"input-apply-button",class:"col-span-2 truncate p-2.5",ariaLabel:u,text:d}))}};export{u as atomic_commerce_facet_number_input,l as atomic_facet_date_input};
//# sourceMappingURL=p-403ad812.entry.js.map