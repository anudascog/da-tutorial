import{b as t}from"./p-1580513b.js";import{d as s}from"./p-cbd58764.js";const e="atomic/accessibility/findAriaLive";function i(s,i=false){function n(){const s=t(e,{});document.dispatchEvent(s);const{element:i}=s.detail;return i}function r(t){n()?.updateMessage(s,t,i)}function a(){n()?.registerRegion(s,i)}return(t,s)=>{const{componentWillRender:e}=t;Object.defineProperty(t,s,{set:t=>r(t)});t.componentWillRender=function(){e&&e.call(this);a()}}}class n{constructor(t){this.component=t;this.doFocusAfterSearch=false;this.doFocusOnNextTarget=false;this.bindings=t.bindings;this.handleComponentRenderLoop()}setTarget(t){if(!t){return}this.element=t;if(this.doFocusOnNextTarget){this.doFocusOnNextTarget=false;this.focus()}}async focus(){await s();this.element?.focus();this.onFocusCallback?.()}focusAfterSearch(){this.lastSearchId=this.bindings.store.getUniqueIDFromEngine(this.bindings.engine);this.doFocusAfterSearch=true;return new Promise((t=>this.onFocusCallback=t))}focusOnNextTarget(){this.doFocusOnNextTarget=true;return new Promise((t=>this.onFocusCallback=t))}disableForCurrentSearch(){if(this.bindings.store.getUniqueIDFromEngine(this.bindings.engine)!==this.lastSearchId){this.doFocusAfterSearch=false}}handleComponentRenderLoop(){const t=this.component.componentDidRender;this.component.componentDidRender=()=>{t&&t.call(this.component);if(!this.bindings){return}if(this.doFocusAfterSearch&&this.bindings.store.getUniqueIDFromEngine(this.bindings.engine)!==this.lastSearchId){this.doFocusAfterSearch=false;if(this.element){const t=this.element;s().then((()=>{t.focus();this.onFocusCallback?.()}))}}}}}function r(t){if(t.getAttribute("tabindex")==="-1"){return false}if(t.hasAttribute("tabindex")){return true}if(t.getAttribute("contentEditable")==="true"){return true}switch(t.tagName){case"A":case"AREA":return t.hasAttribute("href");case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":return!t.hasAttribute("disabled");case"IFRAME":return true;default:return false}}function*a(t){if(r(t)){yield t}let s=Array.from(t.children);if(t instanceof HTMLSlotElement){s=t.assignedElements()}else if(t.shadowRoot){s.push(...Array.from(t.shadowRoot.children))}for(const t of s){yield*a(t)}}function c(t){return a(t).next().value??null}export{i as A,n as F,c as g};
//# sourceMappingURL=p-c3f41fca.js.map