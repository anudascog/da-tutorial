{"version":3,"names":["AtomicSuggestionRenderer","parts","part","this","isSelected","suggestion","query","classes","content","isHTMLElement","h","Fragment","ariaLabel","isButton","contentLabel","i18n","t","labelWithType","isMacOS","label","interpolation","escapeValue","position","index","count","lastIndex","isDoubleList","side","ensureContentForRenderedSuggestion","element","replaceChildren","el","HTMLElement","render","onSelect","Host","key","class","id","onMouseDown","e","preventDefault","onClick","onMouseOver","ref"],"sources":["src/components/common/atomic-suggestion-renderer/atomic-suggestion-renderer.tsx"],"sourcesContent":["import {isMacOS} from '@/src/utils/device-utils';\nimport {Component, Fragment, Host, Prop, VNode, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {SearchBoxSuggestionElement} from '../suggestions/suggestions-common';\n\n/**\n * The `atomic-suggestion-renderer` component is used to render individual suggestions. It was created to isolate\n * the rendering logic of the 'content' property of the `SearchBoxSuggestionElement` interface. This property can be Stencil\n * VNode or native Element so there must be a Stencil component to render it. For Lit components using this component, they will\n * use native Elements.\n *\n * @internal\n */\n@Component({\n  tag: 'atomic-suggestion-renderer',\n  shadow: false,\n})\nexport class AtomicSuggestionRenderer {\n  @Prop() public i18n!: i18n;\n  @Prop() public id!: string;\n  @Prop() public suggestion!: SearchBoxSuggestionElement;\n  @Prop() public isSelected!: boolean;\n  @Prop() public side!: 'left' | 'right';\n  @Prop() public index!: number;\n  @Prop() public lastIndex!: number;\n  @Prop() public isDoubleList!: boolean;\n  @Prop() public onClick?: (e: Event) => void;\n  @Prop() public onMouseOver?: (e: Event) => void;\n\n  private get parts() {\n    let part = 'suggestion';\n    if (this.isSelected) {\n      part += ' active-suggestion';\n    }\n    if (this.suggestion.query) {\n      part += ' suggestion-with-query';\n    }\n    if (this.suggestion.part) {\n      part += ` ${this.suggestion.part}`;\n    }\n    return part;\n  }\n\n  private get classes() {\n    return `flex px-4 min-h-10 items-center text-left text-neutral-dark cursor-pointer ${\n      this.isSelected ? 'bg-neutral-light' : ''\n    }`;\n  }\n\n  private get content() {\n    return this.isHTMLElement(this.suggestion.content) ? (\n      <Fragment></Fragment>\n    ) : (\n      this.suggestion.content\n    );\n  }\n\n  private ariaLabel(isButton: boolean) {\n    const contentLabel =\n      this.suggestion.ariaLabel ??\n      this.suggestion.query ??\n      this.i18n.t('no-title');\n\n    const labelWithType =\n      isMacOS() && isButton\n        ? this.i18n.t('search-suggestion-button', {\n            label: contentLabel,\n            interpolation: {escapeValue: false},\n          })\n        : contentLabel;\n\n    const position = this.index + 1;\n    const count = this.lastIndex + 1;\n\n    if (!this.isDoubleList) {\n      return this.i18n.t('search-suggestion-single-list', {\n        label: labelWithType,\n        position,\n        count,\n        interpolation: {escapeValue: false},\n      });\n    }\n\n    return this.i18n.t('search-suggestion-double-list', {\n      label: labelWithType,\n      position,\n      count,\n      side: this.i18n.t(this.side === 'left' ? 'left' : 'right'),\n      interpolation: {escapeValue: false},\n    });\n  }\n\n  private ensureContentForRenderedSuggestion(element: HTMLElement) {\n    if (this.isHTMLElement(this.suggestion.content)) {\n      element.replaceChildren(this.suggestion.content);\n    }\n  }\n\n  private isHTMLElement(el: VNode | Element): el is HTMLElement {\n    return el instanceof HTMLElement;\n  }\n\n  render() {\n    const isButton = !!(this.suggestion.onSelect || this.suggestion.query);\n\n    return (\n      <Host class=\"contents\">\n        {isButton ? (\n          <button\n            id={this.id}\n            key={this.suggestion.key}\n            part={this.parts}\n            class={this.classes}\n            onMouseDown={(e) => e.preventDefault()}\n            onClick={(e: Event) => this.onClick?.(e)}\n            onMouseOver={(e: Event) => this.onMouseOver?.(e)}\n            data-query={this.suggestion.query}\n            aria-label={this.ariaLabel(isButton)}\n            ref={(el) => {\n              if (!el) {\n                return;\n              }\n              this.ensureContentForRenderedSuggestion(el);\n            }}\n          >\n            {this.content}\n          </button>\n        ) : (\n          <span\n            id={this.id}\n            key={this.suggestion.key}\n            part={this.parts}\n            class={this.classes}\n            aria-label={this.ariaLabel(isButton)}\n            ref={(el) => {\n              if (!el) {\n                return;\n              }\n              this.ensureContentForRenderedSuggestion(el);\n            }}\n          >\n            {this.content}\n          </span>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"mGAiBaA,EAAwB,M,mQAYnC,SAAYC,GACV,IAAIC,EAAO,aACX,GAAIC,KAAKC,WAAY,CACnBF,GAAQ,oB,CAEV,GAAIC,KAAKE,WAAWC,MAAO,CACzBJ,GAAQ,wB,CAEV,GAAIC,KAAKE,WAAWH,KAAM,CACxBA,GAAQ,IAAIC,KAAKE,WAAWH,M,CAE9B,OAAOA,C,CAGT,WAAYK,GACV,MAAO,8EACLJ,KAAKC,WAAa,mBAAqB,I,CAI3C,WAAYI,GACV,OAAOL,KAAKM,cAAcN,KAAKE,WAAWG,SACxCE,EAACC,EAAQ,MAETR,KAAKE,WAAkB,O,CAInB,SAAAO,CAAUC,GAChB,MAAMC,EACJX,KAAKE,WAAWO,WAChBT,KAAKE,WAAWC,OAChBH,KAAKY,KAAKC,EAAE,YAEd,MAAMC,EACJC,KAAaL,EACTV,KAAKY,KAAKC,EAAE,2BAA4B,CACtCG,MAAOL,EACPM,cAAe,CAACC,YAAa,SAE/BP,EAEN,MAAMQ,EAAWnB,KAAKoB,MAAQ,EAC9B,MAAMC,EAAQrB,KAAKsB,UAAY,EAE/B,IAAKtB,KAAKuB,aAAc,CACtB,OAAOvB,KAAKY,KAAKC,EAAE,gCAAiC,CAClDG,MAAOF,EACPK,WACAE,QACAJ,cAAe,CAACC,YAAa,Q,CAIjC,OAAOlB,KAAKY,KAAKC,EAAE,gCAAiC,CAClDG,MAAOF,EACPK,WACAE,QACAG,KAAMxB,KAAKY,KAAKC,EAAEb,KAAKwB,OAAS,OAAS,OAAS,SAClDP,cAAe,CAACC,YAAa,Q,CAIzB,kCAAAO,CAAmCC,GACzC,GAAI1B,KAAKM,cAAcN,KAAKE,WAAWG,SAAU,CAC/CqB,EAAQC,gBAAgB3B,KAAKE,WAAWG,Q,EAIpC,aAAAC,CAAcsB,GACpB,OAAOA,aAAcC,W,CAGvB,MAAAC,GACE,MAAMpB,KAAcV,KAAKE,WAAW6B,UAAY/B,KAAKE,WAAWC,OAEhE,OACEI,EAACyB,EAAI,CAAAC,IAAA,2CAACC,MAAM,YACTxB,EACCH,EAAA,UACE4B,GAAInC,KAAKmC,GACTF,IAAKjC,KAAKE,WAAW+B,IACrBlC,KAAMC,KAAKF,MACXoC,MAAOlC,KAAKI,QACZgC,YAAcC,GAAMA,EAAEC,iBACtBC,QAAUF,GAAarC,KAAKuC,UAAUF,GACtCG,YAAcH,GAAarC,KAAKwC,cAAcH,GAAE,aACpCrC,KAAKE,WAAWC,MAAK,aACrBH,KAAKS,UAAUC,GAC3B+B,IAAMb,IACJ,IAAKA,EAAI,CACP,M,CAEF5B,KAAKyB,mCAAmCG,EAAG,GAG5C5B,KAAKK,SAGRE,EAAA,QACE4B,GAAInC,KAAKmC,GACTF,IAAKjC,KAAKE,WAAW+B,IACrBlC,KAAMC,KAAKF,MACXoC,MAAOlC,KAAKI,QAAO,aACPJ,KAAKS,UAAUC,GAC3B+B,IAAMb,IACJ,IAAKA,EAAI,CACP,M,CAEF5B,KAAKyB,mCAAmCG,EAAG,GAG5C5B,KAAKK,S","ignoreList":[]}