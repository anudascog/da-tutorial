import{r as t,h as e,g as s}from"./p-dc3df5ce.js";import{Schema as i,NumberValue as a}from"@coveo/bueno";import{buildFacetManager as o}from"@coveo/headless";import{I as c,B as n}from"./p-d6e6dbc3.js";import{g as r,s as d,a as f,c as h}from"./p-66f4521a.js";import"./p-c9074946.js";import"./p-1580513b.js";import"./p-05de7ca3.js";import"./p-f77160c6.js";var l=undefined&&undefined.__decorate||function(t,e,s,i){var a=arguments.length,o=a<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,s):i,c;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(t,e,s,i);else for(var n=t.length-1;n>=0;n--)if(c=t[n])o=(a<3?c(o):a>3?c(e,s,o):c(e,s))||o;return a>3&&o&&Object.defineProperty(e,s,o),o};const p=class{constructor(e){t(this,e);this.collapseFacetsAfter=4;this.sortFacets=()=>{const t=r(this.host);const e=this.sortFacetsUsingManager(t,this.facetManager);const{visibleFacets:s,invisibleFacets:i}=d(e,this.bindings.store.getAllFacets());const a=f(this.host);h(s,this.collapseFacetsAfter);a?.updateCollapseFacetsDependingOnFacetsVisibility(this.collapseFacetsAfter,s.length);this.host.append(...[...s,...i,...a?[a]:[]])};this.facetManagerState=undefined;this.error=undefined;this.collapseFacetsAfter=4}initialize(){this.validateProps();this.facetManager=o(this.bindings.engine);this.bindings.i18n.on("languageChanged",this.sortFacets)}validateProps(){new i({collapseFacetAfter:new a({min:-1,required:true})}).validate({collapseFacetAfter:this.collapseFacetsAfter})}sortFacetsUsingManager(t,e){const s=t.map((t=>({facetId:t.facetId,payload:t})));return e.sort(s).map((t=>t.payload))}disconnectedCallback(){this.bindings?.i18n.off("languageChanged",this.sortFacets)}render(){return e("slot",{key:"61472d27c4a78d0cd3637e34d10c2dedddea647b"})}get host(){return s(this)}};l([c()],p.prototype,"bindings",void 0);l([n("facetManager",{onUpdateCallbackMethod:"sortFacets"})],p.prototype,"facetManagerState",void 0);export{p as atomic_facet_manager};
//# sourceMappingURL=p-d38cef60.entry.js.map