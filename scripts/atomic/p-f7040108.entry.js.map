{"version":3,"names":["atomicNotificationsCss","AtomicNotificationsStyle0","AtomicNotifications","this","headingLevel","initialize","notifyTrigger","buildNotifyTrigger","bindings","engine","generateAriaMessage","notifications","length","map","text","i","i18n","t","n","join","renderNotification","h","part","class","icon","InfoIcon","renderNotifications","render","Hidden","ariaMessage","Fragment","Heading","level","notifyTriggerState","__decorate","InitializeBindings","BindStateToController","AriaLiveRegion"],"sources":["src/components/search/atomic-notification/atomic-notifications.pcss?tag=atomic-notifications&encapsulation=shadow","src/components/search/atomic-notification/atomic-notifications.tsx"],"sourcesContent":["@import '../../../global/global.pcss';\n","import {\n  NotifyTrigger,\n  NotifyTriggerState,\n  buildNotifyTrigger,\n} from '@coveo/headless';\nimport {Component, h, State, Fragment, Prop} from '@stencil/core';\nimport InfoIcon from '../../../images/info.svg';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../utils/initialization-utils';\nimport {AriaLiveRegion} from '../../../utils/stencil-accessibility-utils';\nimport {Heading} from '../../common/stencil-heading';\nimport {Hidden} from '../../common/stencil-hidden';\nimport {Bindings} from '../atomic-search-interface/atomic-search-interface';\n\n/**\n * The `atomic-notifications` component is responsible for displaying notifications generated by the Coveo Search API (see [Trigger](https://docs.coveo.com/en/1458)).\n *\n * @part notifications - The wrapper around the notifications.\n * @part notification - The wrapper around a single notification.\n * @part icon - The icon of the notification.\n * @part text - The text of the notification.\n */\n@Component({\n  tag: 'atomic-notifications',\n  styleUrl: 'atomic-notifications.pcss',\n  shadow: true,\n})\nexport class AtomicNotifications implements InitializableComponent {\n  @InitializeBindings() public bindings!: Bindings;\n  protected notifyTrigger!: NotifyTrigger;\n\n  @BindStateToController('notifyTrigger')\n  @State()\n  private notifyTriggerState?: NotifyTriggerState;\n  @State() public error!: Error;\n\n  @AriaLiveRegion('notifications') ariaMessage!: string;\n\n  /**\n   * The [heading level](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements) to use above the notifications, from 1 to 6.\n   */\n  @Prop({reflect: true}) public headingLevel = 0;\n\n  /**\n   * Specifies an icon to display at the left-end of a notification.\n   *\n   * - Use a value that starts with `http://`, `https://`, `./`, or `../`, to fetch and display an icon from a given location.\n   * - Use a value that starts with `assets://`, to display an icon from the Atomic package.\n   * - Use a stringified SVG to display it directly\n   */\n  @Prop({reflect: true}) public icon?: string;\n\n  public initialize() {\n    this.notifyTrigger = buildNotifyTrigger(this.bindings.engine);\n  }\n\n  public generateAriaMessage() {\n    if (this.notifications.length === 1) {\n      return this.notifications[0];\n    }\n    return this.notifications\n      .map((text, i) =>\n        this.bindings.i18n.t('notification-n', {n: i + 1, text})\n      )\n      .join('\\n');\n  }\n\n  public renderNotification(text: string) {\n    return (\n      <div\n        part=\"notification\"\n        class=\"bg-background border-neutral-dark flex items-center rounded-md border p-6 shadow-lg\"\n      >\n        <atomic-icon\n          icon={this.icon ?? InfoIcon}\n          part=\"icon\"\n          class=\"text-neutral-dark mr-6 h-7 w-7\"\n        />\n        <span part=\"text\" class=\"text-on-background text-base leading-5\">\n          {text}\n        </span>\n      </div>\n    );\n  }\n\n  public renderNotifications() {\n    return (\n      <div part=\"notifications\" class=\"flex flex-col gap-4\">\n        {this.notifications.map((text) => this.renderNotification(text))}\n      </div>\n    );\n  }\n\n  public render() {\n    if (!this.notifications.length) {\n      return <Hidden></Hidden>;\n    }\n\n    this.ariaMessage = this.generateAriaMessage();\n\n    return (\n      <Fragment>\n        <Heading level={this.headingLevel ?? 0} class=\"sr-only\">\n          {this.bindings.i18n.t('notifications')}\n        </Heading>\n        {this.renderNotifications()}\n      </Fragment>\n    );\n  }\n\n  private get notifications(): string[] {\n    return this.notifyTriggerState?.notifications || [];\n  }\n}\n"],"mappings":"wsBAAA,MAAMA,EAAyB,k60DAC/B,MAAAC,EAAeD,E,iXC6BFE,EAAmB,M,yBAcAC,KAAAC,aAAe,E,yEAAA,E,oBAWtC,UAAAC,GACLF,KAAKG,cAAgBC,EAAmBJ,KAAKK,SAASC,O,CAGjD,mBAAAC,GACL,GAAIP,KAAKQ,cAAcC,SAAW,EAAG,CACnC,OAAOT,KAAKQ,cAAc,E,CAE5B,OAAOR,KAAKQ,cACTE,KAAI,CAACC,EAAMC,IACVZ,KAAKK,SAASQ,KAAKC,EAAE,iBAAkB,CAACC,EAAGH,EAAI,EAAGD,WAEnDK,KAAK,K,CAGH,kBAAAC,CAAmBN,GACxB,OACEO,EAAA,OACEC,KAAK,eACLC,MAAM,uFAENF,EAAA,eACEG,KAAMrB,KAAKqB,MAAQC,EACnBH,KAAK,OACLC,MAAM,mCAERF,EAAA,QAAMC,KAAK,OAAOC,MAAM,0CACrBT,G,CAMF,mBAAAY,GACL,OACEL,EAAA,OAAKC,KAAK,gBAAgBC,MAAM,uBAC7BpB,KAAKQ,cAAcE,KAAKC,GAASX,KAAKiB,mBAAmBN,K,CAKzD,MAAAa,GACL,IAAKxB,KAAKQ,cAAcC,OAAQ,CAC9B,OAAOS,EAACO,EAAM,K,CAGhBzB,KAAK0B,YAAc1B,KAAKO,sBAExB,OACEW,EAACS,EAAQ,KACPT,EAACU,EAAO,CAACC,MAAO7B,KAAKC,cAAgB,EAAGmB,MAAM,WAC3CpB,KAAKK,SAASQ,KAAKC,EAAE,kBAEvBd,KAAKuB,sB,CAKZ,iBAAYf,GACV,OAAOR,KAAK8B,oBAAoBtB,eAAiB,E,GAnFtBuB,EAAA,CAA5BC,K,+BAKOD,EAAA,CAFPE,EAAsB,kB,yCAKUF,EAAA,CAAhCG,EAAe,kB","ignoreList":[]}