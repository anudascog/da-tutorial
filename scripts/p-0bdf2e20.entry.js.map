{"version":3,"names":["atomicRatingFacetCss","AtomicRatingFacetStyle0","AtomicRatingFacet","this","label","tabsIncluded","tabsExcluded","numberOfIntervals","maxValueInIndex","minValueInIndex","displayValuesAs","icon","Star","isCollapsed","headingLevel","filterFacetCount","injectionDepth","dependsOn","focusTarget","headerFocus","FocusTargetController","validateProps","Schema","StringValue","constrainTo","validate","initialize","length","console","warn","searchStatus","buildSearchStatus","bindings","engine","tabManager","buildTabManager","initializeFacet","initializeDependenciesManager","options","facetId","field","numberOfValues","currentValues","generateCurrentValues","sortCriteria","generateAutomaticRanges","tabs","included","excluded","facet","buildNumericFacet","state","facetInfo","i18n","t","element","host","isHidden","store","registerFacet","format","value","formatFacetValue","content","ratingContent","initializePopover","hasValues","valuesToRender","numberOfActiveValues","numberOfSelectedValues","disconnectedCallback","isConnected","dependenciesManager","stopWatching","searchStatusState","hasError","enabled","scaleFactor","facetState","values","filter","buildFacetConditionsManager","conditions","parseDependsOn","i","push","buildNumericRange","start","Math","round","end","endInclusive","facetValue","count","max","h","Rating","numberOfTotalIcons","numberOfActiveIcons","renderHeader","FacetHeader","onClearFilters","focusAfterSearch","deselectAll","onToggleCollapse","headerRef","el","setTarget","renderValue","onClick","displayValue","isSelected","shouldBeDimmed","hasActiveValues","FacetValueCheckbox","numberOfResults","FacetValueLink","class","undefined","renderValuesContainer","children","FacetValuesGroup","part","renderValues","map","toggleSingleSelect","toggleSelect","render","Hidden","firstSearchExecuted","FacetPlaceholder","FacetContainer","__decorate","InitializeBindings","BindStateToController","ArrayProp","MapProp"],"sources":["src/components/search/facets/atomic-rating-facet/atomic-rating-facet.pcss?tag=atomic-rating-facet&encapsulation=shadow","src/components/search/facets/atomic-rating-facet/atomic-rating-facet.tsx"],"sourcesContent":["@import '../../../common/facets/facet-common.pcss';\n@import '../../../common/facets/facet-value-checkbox/facet-value-checkbox.pcss';\n@import '../../../common/atomic-rating/atomic-rating.pcss';\n","import {Schema, StringValue} from '@coveo/bueno';\nimport {\n  NumericFacet,\n  buildNumericFacet,\n  NumericFacetState,\n  NumericFacetOptions,\n  SearchStatus,\n  SearchStatusState,\n  buildSearchStatus,\n  NumericFacetValue,\n  NumericRangeRequest,\n  buildNumericRange,\n  buildFacetConditionsManager,\n  FacetConditionsManager,\n  FacetValueRequest,\n  CategoryFacetValueRequest,\n  buildTabManager,\n  TabManager,\n  TabManagerState,\n} from '@coveo/headless';\nimport {Component, h, State, Prop, VNode, Element} from '@stencil/core';\nimport Star from '../../../../images/star.svg';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../../utils/initialization-utils';\nimport {ArrayProp, MapProp} from '../../../../utils/props-utils';\nimport {FocusTargetController} from '../../../../utils/stencil-accessibility-utils';\nimport {Rating} from '../../../common/atomic-rating/atomic-rating';\nimport {parseDependsOn} from '../../../common/facets/depends-on';\nimport {FacetInfo} from '../../../common/facets/facet-common-store';\nimport {FacetContainer} from '../../../common/facets/facet-container/stencil-facet-container';\nimport {FacetHeader} from '../../../common/facets/facet-header/stencil-facet-header';\nimport {FacetPlaceholder} from '../../../common/facets/facet-placeholder/facet-placeholder';\nimport {FacetValueCheckbox} from '../../../common/facets/facet-value-checkbox/stencil-facet-value-checkbox';\nimport {FacetValueLink} from '../../../common/facets/facet-value-link/stencil-facet-value-link';\nimport {FacetValuesGroup} from '../../../common/facets/facet-values-group/stencil-facet-values-group';\nimport {initializePopover} from '../../../common/facets/popover/popover-type';\nimport {Hidden} from '../../../common/stencil-hidden';\nimport {Bindings} from '../../atomic-search-interface/atomic-search-interface';\n\n/**\n * A facet is a list of values for a certain field occurring in the results, ordered using a configurable criteria (e.g., number of occurrences).\n * An `atomic-rating-facet` displays a facet of the results for the current query as ratings.\n * It only supports numeric fields.\n *\n * @part facet - The wrapper for the entire facet.\n * @part placeholder - The placeholder shown before the first search is executed.\n *\n * @part label-button - The button that displays the label and toggles to expand or collapse the facet.\n * @part label-button-icon - The label button icon.\n * @part clear-button - The button that resets the actively selected facet values.\n * @part clear-button-icon - The clear button icon.\n *\n * @part values - The facet values container.\n * @part value-count - The facet value count, common for all displays.\n * @part value-rating - The facet value rating, common for all displays.\n * @part value-rating-icon - The individual star icons used in the rating display.\n *\n * @part value-checkbox - The facet value checkbox, available when display is 'checkbox'.\n * @part value-checkbox-checked - The checked facet value checkbox, available when display is 'checkbox'.\n * @part value-checkbox-label - The facet value checkbox clickable label, available when display is 'checkbox'.\n * @part value-checkbox-icon - The facet value checkbox icon, available when display is 'checkbox'.\n * @part value-link - The facet value when display is 'link'.\n * @part value-link-selected - The selected facet value when display is 'link'.\n */\n@Component({\n  tag: 'atomic-rating-facet',\n  styleUrl: 'atomic-rating-facet.pcss',\n  shadow: true,\n})\nexport class AtomicRatingFacet implements InitializableComponent {\n  @InitializeBindings() public bindings!: Bindings;\n  public facet!: NumericFacet;\n  private dependenciesManager?: FacetConditionsManager;\n  public searchStatus!: SearchStatus;\n  public tabManager!: TabManager;\n  @Element() private host!: HTMLElement;\n\n  @BindStateToController('facet')\n  @State()\n  public facetState!: NumericFacetState;\n  @BindStateToController('searchStatus')\n  @State()\n  public searchStatusState!: SearchStatusState;\n  @BindStateToController('tabManager')\n  @State()\n  public tabManagerState!: TabManagerState;\n  @State() public error!: Error;\n\n  /**\n   * Specifies a unique identifier for the facet.\n   */\n  @Prop({mutable: true, reflect: true}) public facetId?: string;\n  /**\n   * The non-localized label for the facet.\n   * Used in the `atomic-breadbox` component through the bindings store.\n   */\n  @Prop({reflect: true}) public label = 'no-label';\n  /**\n   * The field whose values you want to display in the facet.\n   */\n  @Prop({reflect: true}) public field!: string;\n  /**\n   * The tabs on which the facet can be displayed. This property should not be used at the same time as `tabs-excluded`.\n   *\n   * Set this property as a stringified JSON array, e.g.,\n   * ```html\n   *  <atomic-timeframe-facet tabs-included='[\"tabIDA\", \"tabIDB\"]'></atomic-timeframe-facet>\n   * ```\n   * If you don't set this property, the facet can be displayed on any tab. Otherwise, the facet can only be displayed on the specified tabs.\n   */\n  @ArrayProp()\n  @Prop({reflect: true, mutable: true})\n  public tabsIncluded: string[] | string = '[]';\n\n  /**\n   * The tabs on which this facet must not be displayed. This property should not be used at the same time as `tabs-included`.\n   *\n   * Set this property as a stringified JSON array, e.g.,\n   * ```html\n   *  <atomic-timeframe-facet tabs-excluded='[\"tabIDA\", \"tabIDB\"]'></atomic-timeframe-facet>\n   * ```\n   * If you don't set this property, the facet can be displayed on any tab. Otherwise, the facet won't be displayed on any of the specified tabs.\n   */\n  @ArrayProp()\n  @Prop({reflect: true, mutable: true})\n  public tabsExcluded: string[] | string = '[]';\n\n  /**\n   * The number of options to display in the facet. If `maxValueInIndex` isn't specified, it will be assumed that this is also the maximum number of rating icons.\n   */\n  @Prop({reflect: true}) public numberOfIntervals = 5;\n  /**\n   * The maximum value in the field's index and the number of rating icons to display in the facet. If not assigned a value, this property will default to the same value as `numberOfIntervals`.\n   */\n  @Prop({reflect: true}) public maxValueInIndex = this.numberOfIntervals;\n  /**\n   * The minimum value of the field.\n   */\n  @Prop({reflect: true}) public minValueInIndex = 1;\n  /**\n   * Whether to display the facet values as checkboxes (multiple selection) or links (single selection).\n   * Possible values are 'checkbox' and 'link'.\n   */\n  @Prop({reflect: true}) public displayValuesAs: 'checkbox' | 'link' =\n    'checkbox';\n  /**\n   * The SVG icon to use to display the rating.\n   *\n   * - Use a value that starts with `http://`, `https://`, `./`, or `../`, to fetch and display an icon from a given location.\n   * - Use a value that starts with `assets://`, to display an icon from the Atomic package.\n   * - Use a stringified SVG to display it directly.\n   *\n   * When using a custom icon, at least part of your icon should have the color set to `fill=\"currentColor\"`.\n   * This part of the SVG will take on the colors set in the following [variables](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties):\n   *\n   * - `--atomic-rating-icon-active-color`\n   * - `--atomic-rating-icon-inactive-color`\n\n   */\n  @Prop({reflect: true}) public icon = Star;\n  /**\n   * Specifies whether the facet is collapsed. When the facet is the child of an `atomic-facet-manager` component, the facet manager controls this property.\n   */\n  @Prop({reflect: true, mutable: true}) public isCollapsed = false;\n  /**\n   * The [heading level](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements) to use for the heading over the facet, from 1 to 6.\n   */\n  @Prop({reflect: true}) public headingLevel = 0;\n  /**\n   * Whether to exclude the parents of folded results when estimating the result count for each facet value.\n   *\n   *\n   * Note: Resulting count is only an estimation, in some cases this value could be incorrect.\n   */\n  @Prop({reflect: true}) public filterFacetCount = true;\n  /**\n   * The maximum number of results to scan in the index to ensure that the facet lists all potential facet values.\n   * Note: A high injectionDepth may negatively impact the facet request performance.\n   * Minimum: `0`\n   */\n  @Prop({reflect: true}) public injectionDepth = 1000;\n\n  /**\n   * The required facets and values for this facet to be displayed.\n   * Examples:\n   * ```html\n   * <atomic-facet facet-id=\"abc\" field=\"objecttype\" ...></atomic-facet>\n   *\n   * <!-- To show the facet when any value is selected in the facet with id \"abc\": -->\n   * <atomic-rating-facet\n   *   depends-on-abc\n   *   ...\n   * ></atomic-rating-facet>\n   *\n   * <!-- To show the facet when value \"doc\" is selected in the facet with id \"abc\": -->\n   * <atomic-rating-facet\n   *   depends-on-abc=\"doc\"\n   *   ...\n   * ></atomic-rating-facet>\n   * ```\n   */\n  @MapProp() @Prop() public dependsOn: Record<string, string> = {};\n\n  private headerFocus?: FocusTargetController;\n\n  private get focusTarget(): FocusTargetController {\n    if (!this.headerFocus) {\n      this.headerFocus = new FocusTargetController(this);\n    }\n    return this.headerFocus;\n  }\n  private validateProps() {\n    new Schema({\n      displayValuesAs: new StringValue({constrainTo: ['checkbox', 'link']}),\n    }).validate({\n      displayValuesAs: this.displayValuesAs,\n    });\n  }\n\n  public initialize() {\n    if (\n      [...this.tabsIncluded].length > 0 &&\n      [...this.tabsExcluded].length > 0\n    ) {\n      console.warn(\n        'Values for both \"tabs-included\" and \"tabs-excluded\" have been provided. This is could lead to unexpected behaviors.'\n      );\n    }\n    this.validateProps();\n    this.searchStatus = buildSearchStatus(this.bindings.engine);\n    this.tabManager = buildTabManager(this.bindings.engine);\n    this.initializeFacet();\n    this.initializeDependenciesManager();\n  }\n\n  private initializeFacet() {\n    const options: NumericFacetOptions = {\n      facetId: this.facetId,\n      field: this.field,\n      numberOfValues: this.numberOfIntervals,\n      currentValues: this.generateCurrentValues(),\n      sortCriteria: 'descending',\n      generateAutomaticRanges: false,\n      filterFacetCount: this.filterFacetCount,\n      injectionDepth: this.injectionDepth,\n      tabs: {\n        included: [...this.tabsIncluded],\n        excluded: [...this.tabsExcluded],\n      },\n    };\n    this.facet = buildNumericFacet(this.bindings.engine, {options});\n    this.facetId = this.facet.state.facetId;\n    const facetInfo: FacetInfo = {\n      label: () => this.bindings.i18n.t(this.label),\n      facetId: this.facetId!,\n      element: this.host,\n      isHidden: () => this.isHidden,\n    };\n    this.bindings.store.registerFacet('numericFacets', {\n      ...facetInfo,\n      format: (value) => this.formatFacetValue(value),\n      content: (value) => this.ratingContent(value),\n    });\n    initializePopover(this.host, {\n      ...facetInfo,\n      hasValues: () => !!this.valuesToRender.length,\n      numberOfActiveValues: () => this.numberOfSelectedValues,\n    });\n  }\n\n  public disconnectedCallback() {\n    if (this.host.isConnected) {\n      return;\n    }\n    this.dependenciesManager?.stopWatching();\n  }\n  private get isHidden() {\n    return (\n      this.searchStatusState.hasError ||\n      !this.facet.state.enabled ||\n      !this.valuesToRender.length\n    );\n  }\n\n  private get scaleFactor() {\n    return this.maxValueInIndex / this.numberOfIntervals;\n  }\n\n  private get numberOfSelectedValues() {\n    return this.facetState.values.filter(({state}) => state === 'selected')\n      .length;\n  }\n\n  private initializeDependenciesManager() {\n    this.dependenciesManager = buildFacetConditionsManager(\n      this.bindings.engine,\n      {\n        facetId: this.facetId!,\n        conditions: parseDependsOn<\n          FacetValueRequest | CategoryFacetValueRequest\n        >(this.dependsOn),\n      }\n    );\n  }\n\n  private generateCurrentValues() {\n    const currentValues: NumericRangeRequest[] = [];\n    for (let i = this.minValueInIndex; i <= this.numberOfIntervals; i++) {\n      currentValues.push(\n        buildNumericRange({\n          start: Math.round(i * this.scaleFactor * 100) / 100,\n          end: Math.round((i + 1) * this.scaleFactor * 100) / 100,\n          endInclusive: false,\n        })\n      );\n    }\n    return currentValues;\n  }\n\n  private formatFacetValue(facetValue: NumericFacetValue) {\n    if (facetValue.start === this.maxValueInIndex) {\n      return this.bindings.i18n.t('stars-only', {count: facetValue.start});\n    }\n    return this.bindings.i18n.t('stars', {\n      count: facetValue.start,\n      max: this.maxValueInIndex,\n    });\n  }\n\n  private ratingContent(facetValue: NumericFacetValue) {\n    return (\n      <Rating\n        i18n={this.bindings.i18n}\n        numberOfTotalIcons={this.maxValueInIndex}\n        numberOfActiveIcons={facetValue.start}\n        icon={this.icon}\n      ></Rating>\n    );\n  }\n\n  private renderHeader() {\n    return (\n      <FacetHeader\n        i18n={this.bindings.i18n}\n        label={this.label}\n        onClearFilters={() => {\n          this.focusTarget.focusAfterSearch();\n          this.facet.deselectAll();\n        }}\n        numberOfActiveValues={this.numberOfSelectedValues}\n        isCollapsed={this.isCollapsed}\n        headingLevel={this.headingLevel}\n        onToggleCollapse={() => (this.isCollapsed = !this.isCollapsed)}\n        headerRef={(el) => this.focusTarget.setTarget(el)}\n      ></FacetHeader>\n    );\n  }\n\n  private renderValue(facetValue: NumericFacetValue, onClick: () => void) {\n    const displayValue = this.formatFacetValue(facetValue);\n    const isSelected = facetValue.state === 'selected';\n    const shouldBeDimmed = this.facetState.hasActiveValues && !isSelected;\n    switch (this.displayValuesAs) {\n      case 'checkbox':\n        return (\n          <FacetValueCheckbox\n            displayValue={displayValue}\n            numberOfResults={facetValue.numberOfResults}\n            isSelected={isSelected}\n            i18n={this.bindings.i18n}\n            onClick={onClick}\n          >\n            {this.ratingContent(facetValue)}\n          </FacetValueCheckbox>\n        );\n      case 'link':\n        return (\n          <FacetValueLink\n            displayValue={displayValue}\n            numberOfResults={facetValue.numberOfResults}\n            isSelected={isSelected}\n            i18n={this.bindings.i18n}\n            onClick={onClick}\n            class={shouldBeDimmed ? 'opacity-80' : undefined}\n          >\n            {this.ratingContent(facetValue)}\n          </FacetValueLink>\n        );\n    }\n  }\n\n  private renderValuesContainer(children: VNode[]) {\n    return (\n      <FacetValuesGroup i18n={this.bindings.i18n} label={this.label}>\n        <ul class=\"mt-3\" part=\"values\">\n          {children}\n        </ul>\n      </FacetValuesGroup>\n    );\n  }\n\n  private renderValues() {\n    return this.renderValuesContainer(\n      this.valuesToRender.map((value) =>\n        this.renderValue(value, () =>\n          this.displayValuesAs === 'link'\n            ? this.facet.toggleSingleSelect(value)\n            : this.facet.toggleSelect(value)\n        )\n      )\n    );\n  }\n\n  private get valuesToRender() {\n    return this.facet.state.values.filter(\n      (value) => value.numberOfResults || value.state !== 'idle'\n    );\n  }\n\n  public render() {\n    if (this.searchStatusState.hasError || !this.facet.state.enabled) {\n      return <Hidden></Hidden>;\n    }\n\n    if (!this.searchStatusState.firstSearchExecuted) {\n      return (\n        <FacetPlaceholder\n          numberOfValues={this.numberOfIntervals}\n          isCollapsed={this.isCollapsed}\n        ></FacetPlaceholder>\n      );\n    }\n\n    if (!this.valuesToRender.length) {\n      return <Hidden></Hidden>;\n    }\n\n    return (\n      <FacetContainer>\n        {this.renderHeader()}\n        {!this.isCollapsed && this.renderValues()}\n      </FacetContainer>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}